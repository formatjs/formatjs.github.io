<!DOCTYPE html>
    <html lang="en">
      <head>
        <link rel="stylesheet" type="text/css" href="/assets/static/src_styles_global-00f5cfaf.DBuxgd3B.css">
        <link rel="stylesheet" type="text/css" href="/assets/static/style-f8c9f72e.C6uyB5YP.css">
        <link rel="stylesheet" type="text/css" href="/assets/static/src_styles_global-00f5cfaf.Dnlg8_lG.css">
        <meta charset="UTF-8" />
        
        
    <title>Upgrade Guide 3.x | FormatJS</title><meta property="og:title" content="Upgrade Guide 3.x | FormatJS" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Upgrade Guide 3.x | FormatJS</title><meta name="description" content="- addLocaleData has been removed. See Migrate to using native Intl APIs for more details."/><meta property="og:title" content="Upgrade Guide 3.x | FormatJS"/><meta property="og:description" content="- addLocaleData has been removed. See Migrate to using native Intl APIs for more details."/><meta property="og:type" content="article"/><meta property="og:url" content="https://formatjs.io/docs/react-intl/upgrade-guide-3.x"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Upgrade Guide 3.x | FormatJS"/><meta name="twitter:description" content="- addLocaleData has been removed. See Migrate to using native Intl APIs for more details."/><link rel="canonical" href="https://formatjs.io/docs/react-intl/upgrade-guide-3.x"/>
<meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="icon" href="/img/logo-icon.svg" type="image/svg+xml"/><meta name="theme-color" content="#6f3c97"/>
    
    <meta name="description" content="- addLocaleData has been removed. See Migrate to using native Intl APIs for more details." /><meta property="og:description" content="- addLocaleData has been removed. See Migrate to using native Intl APIs for more details." />
    
  
        
      </head>
      <body>
        
        <div id="root"><link rel="preload" as="image" href="/img/logo-icon.svg"/><div class="flex flex-col h-screen bg-gradient-to-br from-gray-950 via-background to-gray-950"><nav class="sticky top-0 z-50 bg-gradient-to-r from-purple-600/90 via-purple-700/90 to-indigo-700/90 backdrop-blur-lg border-b border-white/10 shadow-xl"><div class="max-w-7xl mx-auto flex items-center h-16 px-4 lg:px-6"><a href="/" class="flex items-center gap-3 mr-8 group"><div class="relative"><div class="absolute inset-0 bg-white/20 rounded-lg blur-md group-hover:bg-white/30 transition-all"></div><img src="/img/logo-icon.svg" alt="FormatJS" class="relative h-8 w-8 transition-transform group-hover:scale-110"/></div><span class="hidden sm:block text-xl font-bold text-white tracking-tight">FormatJS</span></a><div class="flex flex-1 md:hidden"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:text-accent-foreground h-9 w-9 text-white hover:bg-white/10" aria-label="navigation menu" type="button" id="radix-:R9:" aria-haspopup="menu" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-5 w-5"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button></div><div class="hidden md:flex flex-1 gap-1 items-center"><a href="/docs/getting-started/installation" class="px-4 py-2 text-sm font-medium text-white/90 no-underline rounded-lg transition-all hover:bg-white/10 hover:text-white cursor-pointer">Docs</a><a href="/docs/react-intl" class="px-4 py-2 text-sm font-medium text-white/90 no-underline rounded-lg transition-all hover:bg-white/10 hover:text-white cursor-pointer">API References</a><a href="/docs/polyfills" class="px-4 py-2 text-sm font-medium text-white/90 no-underline rounded-lg transition-all hover:bg-white/10 hover:text-white cursor-pointer">Polyfills</a><a href="/docs/tooling/cli" class="px-4 py-2 text-sm font-medium text-white/90 no-underline rounded-lg transition-all hover:bg-white/10 hover:text-white cursor-pointer">Tooling</a></div><div class="mr-3 flex-1 sm:flex-initial"><button class="flex items-center gap-2 h-10 px-3 rounded-lg border border-border bg-popover text-sm text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search h-4 w-4"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg><span class="hidden sm:inline">Search docs...</span><kbd class="hidden sm:inline-flex items-center gap-1 rounded border border-border bg-muted px-1.5 text-[10px] font-medium text-muted-foreground"><span class="text-xs">âŒ˜</span>K</kbd></button></div><a href="https://github.com/formatjs/formatjs" target="_blank" rel="noopener noreferrer" class="hidden md:flex items-center gap-2 px-4 py-2 text-sm font-medium text-white/90 no-underline rounded-lg transition-all hover:bg-white/10 hover:text-white group"><span>GitHub</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-4 w-4 transition-transform group-hover:translate-x-0.5 group-hover:-translate-y-0.5"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></div></nav><div class="flex flex-grow overflow-hidden"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 text-primary-foreground hover:bg-primary/90 h-9 w-9 fixed top-[68px] left-2.5 z-[1200] md:hidden bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 shadow-lg" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R6:" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-5 w-5"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button><aside class="hidden md:block w-[280px] shrink-0 border-r border-purple-500/20 top-16 h-[calc(100%-64px)] fixed overflow-auto z-[1000]"><div class="overflow-auto h-full bg-gradient-to-b from-background to-gray-950/50 backdrop-blur-sm"><nav class="py-3"><h3 class="px-4 py-2 text-xs font-bold text-purple-400 uppercase tracking-wider">Getting Started</h3><ul class="space-y-0.5 px-2"><li><a href="/docs/getting-started/installation" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Installation</a></li><li><a href="/docs/getting-started/message-declaration" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Message Declaration</a></li><li><a href="/docs/getting-started/message-extraction" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Message Extraction</a></li><li><a href="/docs/getting-started/message-distribution" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Message Distribution</a></li><li><a href="/docs/getting-started/application-workflow" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Application Workflow</a></li></ul></nav><div data-orientation="horizontal" role="none" class="shrink-0 h-[1px] w-full my-3 bg-gradient-to-r from-transparent via-purple-500/20 to-transparent"></div><nav class="py-3"><h3 class="px-4 py-2 text-xs font-bold text-purple-400 uppercase tracking-wider">Core Concepts</h3><ul class="space-y-0.5 px-2"><li><a href="/docs/core-concepts/basic-internationalization-principles" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Basic Internationalization Principles</a></li><li><a href="/docs/core-concepts/icu-syntax" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">ICU Message Syntax</a></li></ul></nav><div data-orientation="horizontal" role="none" class="shrink-0 h-[1px] w-full my-3 bg-gradient-to-r from-transparent via-purple-500/20 to-transparent"></div><nav class="py-3"><h3 class="px-4 py-2 text-xs font-bold text-purple-400 uppercase tracking-wider">React Intl</h3><ul class="space-y-0.5 px-2"><li><a href="/docs/react-intl" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Overview</a></li><li><a href="/docs/react-intl/api" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">API</a></li><li><a href="/docs/react-intl/components" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Components</a></li><li><a href="/docs/react-intl/upgrade-guide-2.x" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Upgrade Guide 2.x</a></li><li><a href="/docs/react-intl/upgrade-guide-3.x" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-medium shadow-lg shadow-purple-500/30">Upgrade Guide 3.x</a></li><li><a href="/docs/react-intl/upgrade-guide-4.x" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Upgrade Guide 4.x</a></li><li><a href="/docs/react-intl/upgrade-guide-5.x" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Upgrade Guide 5.x</a></li></ul></nav><div data-orientation="horizontal" role="none" class="shrink-0 h-[1px] w-full my-3 bg-gradient-to-r from-transparent via-purple-500/20 to-transparent"></div><nav class="py-3"><h3 class="px-4 py-2 text-xs font-bold text-purple-400 uppercase tracking-wider">Polyfills</h3><ul class="space-y-0.5 px-2"><li><a href="/docs/polyfills" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Overview</a></li><li><a href="/docs/polyfills/intl-datetimeformat" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Intl.DateTimeFormat</a></li><li><a href="/docs/polyfills/intl-displaynames" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Intl.DisplayNames</a></li><li><a href="/docs/polyfills/intl-durationformat" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Intl.DurationFormat</a></li><li><a href="/docs/polyfills/intl-getcanonicallocales" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Intl.GetCanonicalLocales</a></li><li><a href="/docs/polyfills/intl-listformat" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Intl.ListFormat</a></li><li><a href="/docs/polyfills/intl-locale" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Intl.Locale</a></li><li><a href="/docs/polyfills/intl-localematcher" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Intl.LocaleMatcher</a></li><li><a href="/docs/polyfills/intl-numberformat" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Intl.NumberFormat</a></li><li><a href="/docs/polyfills/intl-pluralrules" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Intl.PluralRules</a></li><li><a href="/docs/polyfills/intl-relativetimeformat" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Intl.RelativeTimeFormat</a></li><li><a href="/docs/polyfills/intl-segmenter" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Intl.Segmenter</a></li></ul></nav><div data-orientation="horizontal" role="none" class="shrink-0 h-[1px] w-full my-3 bg-gradient-to-r from-transparent via-purple-500/20 to-transparent"></div><nav class="py-3"><h3 class="px-4 py-2 text-xs font-bold text-purple-400 uppercase tracking-wider">Tooling</h3><ul class="space-y-0.5 px-2"><li><a href="/docs/tooling/cli" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">CLI</a></li><li><a href="/docs/tooling/babel-plugin" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Babel Plugin</a></li><li><a href="/docs/tooling/ts-transformer" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">TypeScript Transformer</a></li><li><a href="/docs/tooling/swc-plugin" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">SWC Plugin</a></li><li><a href="/docs/tooling/linter" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">ESLint Plugin</a></li></ul></nav><div data-orientation="horizontal" role="none" class="shrink-0 h-[1px] w-full my-3 bg-gradient-to-r from-transparent via-purple-500/20 to-transparent"></div><nav class="py-3"><h3 class="px-4 py-2 text-xs font-bold text-purple-400 uppercase tracking-wider">Guides</h3><ul class="space-y-0.5 px-2"><li><a href="/docs/guides/testing-with-react-intl" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Testing with React Intl</a></li><li><a href="/docs/guides/runtime-requirements" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Runtime Requirements</a></li><li><a href="/docs/guides/advanced-usage" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Advanced Usage</a></li><li><a href="/docs/guides/distribute-libraries" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Distribute Libraries</a></li><li><a href="/docs/guides/develop" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Development</a></li></ul></nav><div data-orientation="horizontal" role="none" class="shrink-0 h-[1px] w-full my-3 bg-gradient-to-r from-transparent via-purple-500/20 to-transparent"></div><nav class="py-3"><h3 class="px-4 py-2 text-xs font-bold text-purple-400 uppercase tracking-wider">Other APIs</h3><ul class="space-y-0.5 px-2"><li><a href="/docs/vue-intl" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Vue Intl</a></li><li><a href="/docs/intl-messageformat" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">Intl MessageFormat</a></li><li><a href="/docs/icu-messageformat-parser" class="block px-3 py-2.5 text-sm rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-white/5 hover:translate-x-0.5">ICU MessageFormat Parser</a></li></ul></nav></div></aside><main class="flex-grow p-6 md:p-8 lg:p-10 md:ml-[280px] overflow-auto"><div class="max-w-4xl mx-auto"><nav aria-label="breadcrumb" class="mb-6 pb-4 border-b border-purple-500/10"><ol class="flex flex-wrap items-center gap-1.5 break-words text-muted-foreground sm:gap-2.5 text-sm"><li class="inline-flex items-center gap-1.5"><a class="text-purple-400 hover:text-purple-300 transition-colors" href="/">Home</a></li><li role="presentation" aria-hidden="true" class="[&amp;&gt;svg]:size-3.5 text-purple-500/50"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"></path></svg></li><li class="inline-flex items-center gap-1.5"><a class="text-gray-400 hover:text-purple-300 transition-colors" href="/docs">Docs</a></li><li role="presentation" aria-hidden="true" class="[&amp;&gt;svg]:size-3.5 text-purple-500/50"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"></path></svg></li><li class="inline-flex items-center gap-1.5"><a class="text-gray-400 hover:text-purple-300 transition-colors" href="/docs/react-intl">React Intl</a></li><li role="presentation" aria-hidden="true" class="[&amp;&gt;svg]:size-3.5 text-purple-500/50"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"></path></svg></li><li class="inline-flex items-center gap-1.5"><span aria-current="page" class="text-white font-medium">Upgrade Guide 3.x</span></li></ol></nav><div class="prose prose-invert max-w-none"><article class="doc-article"><h2 id="breaking-api-changes" class="text-3xl font-bold mt-10 mb-4 text-white hover:[&amp;_.header-link]:visible border-b border-purple-500/20 pb-3">Breaking API Changes<a href="#breaking-api-changes" class="header-link invisible ml-2 text-purple-400 no-underline text-sm hover:text-purple-300 transition-colors">#</a></h2>
<ul class="pl-6 mb-4 list-disc marker:text-purple-400 space-y-2">
<li class="mb-2 text-gray-300"><code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">addLocaleData</code> has been removed. See <a href="#migrate-to-using-native-intl-apis" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">Migrate to using native Intl APIs</a> for more details.</li>
<li class="mb-2 text-gray-300"><code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">ReactIntlLocaleData</code> has been removed. See <a href="#migrate-to-using-native-intl-apis" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">Migrate to using native Intl APIs</a> for more details.</li>
<li class="mb-2 text-gray-300"><code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">intlShape</code> has been removed. See <a href="#typescript-support" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">TypeScript Support</a> for more details.</li>
<li class="mb-2 text-gray-300">Change default <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">textComponent</code> in <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">IntlProvider</code> to <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">React.Fragment</code>. In order to keep the old behavior, you can explicitly set <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">textComponent</code> to <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">span</code>.</li>
</ul>
<pre class="relative group p-5 mb-6 overflow-auto bg-gradient-to-br from-gray-900 to-gray-950 text-gray-200 rounded-lg border border-purple-500/20 shadow-xl hover:border-purple-500/40 transition-colors"><code class="font-mono text-sm"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">IntlProvider</span></span> <span class="token attr-name">textComponent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>span<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</span></code></pre>
<ul class="pl-6 mb-4 list-disc marker:text-purple-400 space-y-2">
<li class="mb-2 text-gray-300"><code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">FormattedRelative</code> has been renamed to <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">FormattedRelativeTime</code> and its API has changed significantly. See <a href="#formattedrelativetime" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">FormattedRelativeTime</a> for more details.</li>
<li class="mb-2 text-gray-300"><code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">formatRelative</code> has been renamed to <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">formatRelativeTime</code> and its API has changed significantly. See <a href="#formattedrelativetime" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">FormattedRelativeTime</a> for more details.</li>
<li class="mb-2 text-gray-300">Message Format syntax changes. See <a href="#message-format-syntax-changes" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">Message Format Syntax Changes</a> for more details.</li>
<li class="mb-2 text-gray-300"><code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">IntlProvider</code> no longer inherits from upstream <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">IntlProvider</code>.</li>
</ul>
<h2 id="use-react-163-and-upwards" class="text-3xl font-bold mt-10 mb-4 text-white hover:[&amp;_.header-link]:visible border-b border-purple-500/20 pb-3">Use React 16.3 and upwards<a href="#use-react-163-and-upwards" class="header-link invisible ml-2 text-purple-400 no-underline text-sm hover:text-purple-300 transition-colors">#</a></h2>
<p class="mb-4 leading-7 text-gray-300">React Intl v3 supports the new context API, fixing all kinds of tree update problems :tada:
In addition it makes use of the new lifecycle hooks (and gets rid of the <a href="https://reactjs.org/blog/2018/03/27/update-on-async-rendering.html" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">deprecated</a> ones).
It also supports the new <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">React.forwardRef()</code> enabling users to directly access refs using the standard <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">ref</code> prop (see beneath for further information).</p>
<h2 id="migrate-withref-to-forwardref" class="text-3xl font-bold mt-10 mb-4 text-white hover:[&amp;_.header-link]:visible border-b border-purple-500/20 pb-3">Migrate withRef to forwardRef<a href="#migrate-withref-to-forwardref" class="header-link invisible ml-2 text-purple-400 no-underline text-sm hover:text-purple-300 transition-colors">#</a></h2>
<p class="mb-4 leading-7 text-gray-300">With the update to React <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">&gt;= 16.3</code> we got the option to use the new <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">React.forwardRef()</code> feature and because of this deprecated the use of the <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">withRef</code> option for the <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">injectIntl</code> HOC in favour of <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">forwardRef</code>.
When <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">forwardRef</code> is set to true, you can now simply pretend the HOC wasn&#x27;t there at all.</p>
<p class="mb-4 leading-7 text-gray-300">Intl v2:</p>
<pre class="relative group p-5 mb-6 overflow-auto bg-gradient-to-br from-gray-900 to-gray-950 text-gray-200 rounded-lg border border-purple-500/20 shadow-xl hover:border-purple-500/40 transition-colors"><code class="font-mono text-sm"><span class="code-line">
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Component</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function-variable function">doSomething</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span> <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello World</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">injectIntl</span><span class="token punctuation">(</span><span class="token maybe-class-name">MyComponent</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>withRef<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// somewhere else</span>
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Component</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">myComponentRef</span><span class="token punctuation">.</span><span class="token method function property-access">getWrappedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyComponent</span></span>
</span></span><span class="code-line"><span class="token tag">        <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">myComponentRef</span> <span class="token operator">=</span> ref
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">      <span class="token punctuation">/&gt;</span></span>
</span><span class="code-line">    <span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p class="mb-4 leading-7 text-gray-300">Intl v3:</p>
<pre class="relative group p-5 mb-6 overflow-auto bg-gradient-to-br from-gray-900 to-gray-950 text-gray-200 rounded-lg border border-purple-500/20 shadow-xl hover:border-purple-500/40 transition-colors"><code class="font-mono text-sm"><span class="code-line">
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Component</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function-variable function">doSomething</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span> <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello World</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">injectIntl</span><span class="token punctuation">(</span><span class="token maybe-class-name">MyComponent</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>forwardRef<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// somewhere else</span>
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Component</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">  myComponentRef <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">myComponentRef</span><span class="token punctuation">.</span><span class="token method function property-access">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// no need to call getWrappedInstance()</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyComponent</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">myComponentRef</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h2 id="new-useintl-hook-as-an-alternative-of-injectintl-hoc" class="text-3xl font-bold mt-10 mb-4 text-white hover:[&amp;_.header-link]:visible border-b border-purple-500/20 pb-3">New useIntl hook as an alternative of injectIntl HOC<a href="#new-useintl-hook-as-an-alternative-of-injectintl-hoc" class="header-link invisible ml-2 text-purple-400 no-underline text-sm hover:text-purple-300 transition-colors">#</a></h2>
<p class="mb-4 leading-7 text-gray-300">This v3 release also supports the latest React hook API for user with React <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">&gt;= 16.8</code>. You can now take <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">useIntl</code> hook as an alternative to <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">injectIntl</code> HOC on <em>function components</em>. Both methods allow you to access the <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">intl</code> instance, here is a quick comparison:</p>
<pre class="relative group p-5 mb-6 overflow-auto bg-gradient-to-br from-gray-900 to-gray-950 text-gray-200 rounded-lg border border-purple-500/20 shadow-xl hover:border-purple-500/40 transition-colors"><code class="font-mono text-sm"><span class="code-line"><span class="token comment">// injectIntl</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token maybe-class-name">MyComponentWithHOC</span> <span class="token operator">=</span> <span class="token function">injectIntl</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span>intl<span class="token punctuation">,</span> <span class="token spread operator">...</span>props<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// do something</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// useIntl</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">MyComponentWithHook</span> <span class="token operator">=</span> props <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> intl <span class="token operator">=</span> <span class="token function">useIntl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// do something</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p class="mb-4 leading-7 text-gray-300">To keep the API surface clean and simple, we only provide <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">useIntl</code> hook in the package. If preferable, user can wrap this built-in hook to make customized hook like <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">useFormatMessage</code> easily. Please visit React&#x27;s official website for more general <a href="https://reactjs.org/docs/hooks-intro.html" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">introduction on React hooks</a>.</p>
<h2 id="migrate-to-using-native-intl-apis" class="text-3xl font-bold mt-10 mb-4 text-white hover:[&amp;_.header-link]:visible border-b border-purple-500/20 pb-3">Migrate to using native Intl APIs<a href="#migrate-to-using-native-intl-apis" class="header-link invisible ml-2 text-purple-400 no-underline text-sm hover:text-purple-300 transition-colors">#</a></h2>
<p class="mb-4 leading-7 text-gray-300">React Intl v3 no longer comes with CLDR data and rely on native Intl API instead. Specifically the new APIs we&#x27;re relying on are:</p>
<ul class="pl-6 mb-4 list-disc marker:text-purple-400 space-y-2">
<li class="mb-2 text-gray-300"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/PluralRules" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">Intl.PluralRules</a>: This can be polyfilled using <a href="https://www.npmjs.com/package/@formatjs/intl-pluralrules" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">this package</a>.</li>
<li class="mb-2 text-gray-300"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RelativeTimeFormat" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">Intl.RelativeTimeFormat</a>: This can be polyfilled using <a href="https://www.npmjs.com/package/@formatjs/intl-relativetimeformat" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">this package</a>.</li>
</ul>
<p class="mb-4 leading-7 text-gray-300">This shift is meant to future-proof React Intl as these APIs are all stable and being implemented in modern browsers. This also means we no longer package and consume CLDRs in this package.</p>
<p class="mb-4 leading-7 text-gray-300">If you previously were using <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">addLocaleData</code> to support older browsers, we recommend you do the following:</p>
<ol class="pl-6 mb-4 list-decimal marker:text-purple-400 space-y-2">
<li class="mb-2 text-gray-300">If you&#x27;re supporting browsers that do not have <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/PluralRules" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">Intl.PluralRules</a> (e.g IE11 &amp; Safari 12-), include this <a href="https://www.npmjs.com/package/@formatjs/intl-pluralrules" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">polyfill</a> in your build.</li>
<li class="mb-2 text-gray-300">If you&#x27;re supporting browsers that do not have <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RelativeTimeFormat" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">Intl.RelativeTimeFormat</a> (e.g IE11, Edge, Safari 13-), include this <a href="https://www.npmjs.com/package/@formatjs/intl-relativetimeformat" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">polyfill</a> in your build along with individual CLDR data for each locale you support.</li>
</ol>
<pre class="relative group p-5 mb-6 overflow-auto bg-gradient-to-br from-gray-900 to-gray-950 text-gray-200 rounded-lg border border-purple-500/20 shadow-xl hover:border-purple-500/40 transition-colors"><code class="font-mono text-sm"><span class="code-line"><span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#x27;@formatjs/intl-pluralrules/polyfill&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#x27;@formatjs/intl-pluralrules/locale-data/de&#x27;</span><span class="token punctuation">)</span> <span class="token comment">// Add locale data for de</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#x27;@formatjs/intl-relativetimeformat/polyfill&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#x27;@formatjs/intl-relativetimeformat/locale-data/de&#x27;</span><span class="token punctuation">)</span> <span class="token comment">// Add locale data for de</span>
</span></code></pre>
<p class="mb-4 leading-7 text-gray-300">When using React Intl in Node.js, you need <strong>Node.js 16 or later</strong>, which includes full internationalization support by default.</p>
<h2 id="typescript-support" class="text-3xl font-bold mt-10 mb-4 text-white hover:[&amp;_.header-link]:visible border-b border-purple-500/20 pb-3">TypeScript Support<a href="#typescript-support" class="header-link invisible ml-2 text-purple-400 no-underline text-sm hover:text-purple-300 transition-colors">#</a></h2>
<p class="mb-4 leading-7 text-gray-300"><code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">react-intl</code> has been rewritten in TypeScript and thus has native TypeScript support. Therefore, we&#x27;ve also removed <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">prop-types</code> dependency and expose <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">IntlShape</code> as an interface instead.</p>
<p class="mb-4 leading-7 text-gray-300">All types should be available from top level <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">index</code> file without importing from specific subfiles. For example:</p>
<pre class="relative group p-5 mb-6 overflow-auto bg-gradient-to-br from-gray-900 to-gray-950 text-gray-200 rounded-lg border border-purple-500/20 shadow-xl hover:border-purple-500/40 transition-colors"><code class="font-mono text-sm"></code></pre>
<p class="mb-4 leading-7 text-gray-300">If we&#x27;re missing any interface top level support, please let us know and/or submitting a PR is greatly appreciated :)</p>
<div role="alert" class="relative w-full rounded-lg border px-4 py-3 text-sm [&amp;&gt;svg+div]:translate-y-[-3px] [&amp;&gt;svg]:absolute [&amp;&gt;svg]:left-4 [&amp;&gt;svg]:top-4 [&amp;&gt;svg]:text-foreground [&amp;&gt;svg~*]:pl-7 my-4 border-blue-500 bg-blue-50 text-blue-900 dark:bg-blue-950 dark:text-blue-100"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info h-4 w-4"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg><h5 class="mb-1 font-medium leading-none tracking-tight">Info</h5><div class="text-sm [&amp;_p]:leading-relaxed"><p class="mb-4 leading-7 text-gray-300">You might need to make a few changes to your code if you were relying on the now deprecated <strong>@types/react-intl</strong> package. The most common example is <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">InjectedIntlProps</code> which must be replaced with <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">WrappedComponentProps</code>.</p></div></div>
<h2 id="formattedrelativetime" class="text-3xl font-bold mt-10 mb-4 text-white hover:[&amp;_.header-link]:visible border-b border-purple-500/20 pb-3">FormattedRelativeTime<a href="#formattedrelativetime" class="header-link invisible ml-2 text-purple-400 no-underline text-sm hover:text-purple-300 transition-colors">#</a></h2>
<p class="mb-4 leading-7 text-gray-300">When we introduced <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">FormattedRelative</code>, the spec for <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RelativeTimeFormat" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors"><code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">Intl.RelativeTimeFormat</code></a> was still unstable. It has now reached stage 3 and multiple browsers have implemented it. However, its API is different from <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">FormattedRelative</code> so we&#x27;ve adjusted its API to match the spec which means it&#x27;s not backwards compatible.</p>
<ol class="pl-6 mb-4 list-decimal marker:text-purple-400 space-y-2">
<li class="mb-2 text-gray-300">All <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">units</code> (such as <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">day-short</code>) becomes a combination of <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">unit</code> &amp; <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">style</code>:</li>
</ol>
<pre class="relative group p-5 mb-6 overflow-auto bg-gradient-to-br from-gray-900 to-gray-950 text-gray-200 rounded-lg border border-purple-500/20 shadow-xl hover:border-purple-500/40 transition-colors"><code class="font-mono text-sm"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedRelative</span></span> <span class="token attr-name">units</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>second-short<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</span><span class="code-line"><span class="token comment">// will be</span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedRelativeTime</span></span> <span class="token attr-name">unit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>second<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css">short</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">/&gt;</span></span>
</span></code></pre>
<ol class="pl-6 mb-4 list-decimal marker:text-purple-400 space-y-2">
<li class="mb-2 text-gray-300"><code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">style</code> becomes <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">numeric</code> (which is the default):</li>
</ol>
<pre class="relative group p-5 mb-6 overflow-auto bg-gradient-to-br from-gray-900 to-gray-950 text-gray-200 rounded-lg border border-purple-500/20 shadow-xl hover:border-purple-500/40 transition-colors"><code class="font-mono text-sm"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedRelative</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css">numeric</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">/&gt;</span></span>
</span><span class="code-line"><span class="token comment">// will be</span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedRelativeTime</span></span> <span class="token punctuation">/&gt;</span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedRelative</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css">best fit</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">/&gt;</span></span>
</span><span class="code-line"><span class="token comment">// will be</span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedRelativeTime</span></span> <span class="token attr-name">numeric</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>auto<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</span></code></pre>
<ol class="pl-6 mb-4 list-decimal marker:text-purple-400 space-y-2">
<li class="mb-2 text-gray-300">Type of <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">value</code> is no longer <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">Date</code>, but rather <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">delta</code> in the specified <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">unit</code>:</li>
</ol>
<pre class="relative group p-5 mb-6 overflow-auto bg-gradient-to-br from-gray-900 to-gray-950 text-gray-200 rounded-lg border border-purple-500/20 shadow-xl hover:border-purple-500/40 transition-colors"><code class="font-mono text-sm"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedRelative</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token known-class-name class-name">Date</span><span class="token punctuation">.</span><span class="token method function property-access">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1000</span><span class="token punctuation">}</span></span> <span class="token attr-name">units</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>second-narrow<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</span><span class="code-line"><span class="token comment">// will be</span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedRelativeTime</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span></span> <span class="token attr-name">unit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>second<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css">narrow</span><span class="token punctuation">&quot;</span></span></span> <span class="token punctuation">/&gt;</span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedRelative</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token known-class-name class-name">Date</span><span class="token punctuation">.</span><span class="token method function property-access">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2000</span><span class="token punctuation">}</span></span> <span class="token attr-name">units</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>second-narrow<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</span><span class="code-line"><span class="token comment">// will be</span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedRelativeTime</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span></span> <span class="token attr-name">unit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>second<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css">narrow</span><span class="token punctuation">&quot;</span></span></span> <span class="token punctuation">/&gt;</span></span>
</span></code></pre>
<ol class="pl-6 mb-4 list-decimal marker:text-purple-400 space-y-2">
<li class="mb-2 text-gray-300"><code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">updateInterval</code> becomes <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">updateIntervalInSeconds</code> and will only take the time delta in seconds. Update behavior remains the same, e.g:</li>
</ol>
<pre class="relative group p-5 mb-6 overflow-auto bg-gradient-to-br from-gray-900 to-gray-950 text-gray-200 rounded-lg border border-purple-500/20 shadow-xl hover:border-purple-500/40 transition-colors"><code class="font-mono text-sm"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedRelativeTime</span></span>
</span></span><span class="code-line"><span class="token tag">  <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">  <span class="token attr-name">numeric</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>auto<span class="token punctuation">&quot;</span></span>
</span></span><span class="code-line"><span class="token tag">  <span class="token attr-name">unit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>second<span class="token punctuation">&quot;</span></span>
</span></span><span class="code-line"><span class="token tag">  <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css">narrow</span><span class="token punctuation">&quot;</span></span></span>
</span></span><span class="code-line"><span class="token tag">  <span class="token attr-name">updateIntervalInSeconds</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag"><span class="token punctuation">/&gt;</span></span>
</span><span class="code-line"><span class="token comment">// Initially prints: `in 2s`</span>
</span><span class="code-line"><span class="token comment">// 1 second later: `in 1s`</span>
</span><span class="code-line"><span class="token comment">// 1 second later: `now`</span>
</span><span class="code-line"><span class="token comment">// 1 second later: `1s ago`</span>
</span><span class="code-line"><span class="token comment">// 60 seconds later: `1m ago`</span>
</span></code></pre>
<ol class="pl-6 mb-4 list-decimal marker:text-purple-400 space-y-2">
<li class="mb-2 text-gray-300"><code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">initialNow</code> has been removed.</li>
</ol>
<p class="mb-4 leading-7 text-gray-300">Similarly, the functional counterpart of this component which is <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">formatRelative</code> has been renamed to <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">formatRelativeTime</code> and its parameters have been changed to reflect this component&#x27;s props accordingly.</p>
<ol class="pl-6 mb-4 list-decimal marker:text-purple-400 space-y-2">
<li class="mb-2 text-gray-300">Implementing <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">FormattedRelative</code> behavior</li>
</ol>
<p class="mb-4 leading-7 text-gray-300">You can use <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">@formatjs/intl-utils</code> to get close to the previous behavior like this:</p>
<pre class="relative group p-5 mb-6 overflow-auto bg-gradient-to-br from-gray-900 to-gray-950 text-gray-200 rounded-lg border border-purple-500/20 shadow-xl hover:border-purple-500/40 transition-colors"><code class="font-mono text-sm"><span class="code-line"><span class="token keyword">const</span> <span class="token punctuation">{</span>value<span class="token punctuation">,</span> unit<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">selectUnit</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Date</span><span class="token punctuation">.</span><span class="token method function property-access">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">48</span> <span class="token operator">*</span> <span class="token number">3600</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token comment">// render</span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedRelativeTime</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span> <span class="token attr-name">unit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>unit<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</span></code></pre>
<h2 id="enhanced-formattedmessage--formatmessage-rich-text-formatting" class="text-3xl font-bold mt-10 mb-4 text-white hover:[&amp;_.header-link]:visible border-b border-purple-500/20 pb-3">Enhanced <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">FormattedMessage</code> &amp; <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">formatMessage</code> rich text formatting<a href="#enhanced-formattedmessage--formatmessage-rich-text-formatting" class="header-link invisible ml-2 text-purple-400 no-underline text-sm hover:text-purple-300 transition-colors">#</a></h2>
<p class="mb-4 leading-7 text-gray-300">In v2, in order to do rich text formatting (embedding a <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">ReactElement</code>), you had to do this:</p>
<pre class="relative group p-5 mb-6 overflow-auto bg-gradient-to-br from-gray-900 to-gray-950 text-gray-200 rounded-lg border border-purple-500/20 shadow-xl hover:border-purple-500/40 transition-colors"><code class="font-mono text-sm"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedMessage</span></span>
</span></span><span class="code-line"><span class="token tag">  <span class="token attr-name">defaultMessage</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>To buy a shoe, { link } and { cta }<span class="token punctuation">&quot;</span></span>
</span></span><span class="code-line"><span class="token tag">  <span class="token attr-name">values</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">    link<span class="token operator">:</span> <span class="token punctuation">(</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>external_link<span class="token punctuation">&quot;</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_blank<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://www.shoe.com/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript"><span class="token plain-text">        visit our website
</span></span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">    <span class="token punctuation">)</span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">    cta<span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>important<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">eat a shoe</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag"><span class="token punctuation">/&gt;</span></span>
</span></code></pre>
<p class="mb-4 leading-7 text-gray-300">Now you can do:</p>
<pre class="relative group p-5 mb-6 overflow-auto bg-gradient-to-br from-gray-900 to-gray-950 text-gray-200 rounded-lg border border-purple-500/20 shadow-xl hover:border-purple-500/40 transition-colors"><code class="font-mono text-sm"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedMessage</span></span>
</span></span><span class="code-line"><span class="token tag">  <span class="token attr-name">defaultMessage</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>To buy a shoe, &lt;a&gt;visit our website&lt;/a&gt; and &lt;cta&gt;eat a shoe&lt;/cta&gt;<span class="token punctuation">&quot;</span></span>
</span></span><span class="code-line"><span class="token tag">  <span class="token attr-name">values</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">    <span class="token function-variable function">a</span><span class="token operator">:</span> msg <span class="token arrow operator">=&gt;</span> <span class="token punctuation">(</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>external_link<span class="token punctuation">&quot;</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_blank<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://www.shoe.com/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript"><span class="token plain-text">        </span><span class="token punctuation">{</span>msg<span class="token punctuation">}</span><span class="token plain-text">
</span></span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">    <span class="token punctuation">)</span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">    <span class="token function-variable function">cta</span><span class="token operator">:</span> msg <span class="token arrow operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>important<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>msg<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag"><span class="token punctuation">/&gt;</span></span>
</span></code></pre>
<p class="mb-4 leading-7 text-gray-300">The change solves several issues:</p>
<ol class="pl-6 mb-4 list-decimal marker:text-purple-400 space-y-2">
<li class="mb-2 text-gray-300">Contextual information was lost when you need to style part of the string: In this example above, <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">link</code> effectively is a blackbox placeholder to a translator. It can be a person, an animal, or a timestamp. Conveying contextual information via <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">description</code> &amp; <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">placeholder</code> variable is often not enough since the variable can get sufficiently complicated.</li>
<li class="mb-2 text-gray-300">This brings feature-parity with other translation libs, such as <a href="https://projectfluent.org/" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">fluent</a> by Mozilla (using Overlays).</li>
</ol>
<p class="mb-4 leading-7 text-gray-300">If previously in cases where you pass in a <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">ReactElement</code> to a placeholder we highly recommend that you rethink the structure so that as much text is declared as possible:</p>
<p class="mb-4 leading-7 text-gray-300">Before</p>
<pre class="relative group p-5 mb-6 overflow-auto bg-gradient-to-br from-gray-900 to-gray-950 text-gray-200 rounded-lg border border-purple-500/20 shadow-xl hover:border-purple-500/40 transition-colors"><code class="font-mono text-sm"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedMessage</span></span>
</span></span><span class="code-line"><span class="token tag">  <span class="token attr-name">defaultMessage</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Hello, {name} is {awesome} and {fun}<span class="token punctuation">&quot;</span></span>
</span></span><span class="code-line"><span class="token tag">  <span class="token attr-name">values</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">    name<span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">John</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">    awesome<span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">awesome</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">    fun<span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">fun and </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedTime</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token known-class-name class-name">Date</span><span class="token punctuation">.</span><span class="token method function property-access">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag"><span class="token punctuation">/&gt;</span></span>
</span></code></pre>
<p class="mb-4 leading-7 text-gray-300">After</p>
<pre class="relative group p-5 mb-6 overflow-auto bg-gradient-to-br from-gray-900 to-gray-950 text-gray-200 rounded-lg border border-purple-500/20 shadow-xl hover:border-purple-500/40 transition-colors"><code class="font-mono text-sm"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedMessage</span></span>
</span></span><span class="code-line"><span class="token tag">  <span class="token attr-name">defaultMessage</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Hello, &lt;b&gt;John&lt;/b&gt; is &lt;custom&gt;awesome&lt;/custom&gt; and &lt;more&gt;fun and {ts, time}&lt;/more&gt;<span class="token punctuation">&quot;</span></span>
</span></span><span class="code-line"><span class="token tag">  <span class="token attr-name">values</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">    <span class="token function-variable function">b</span><span class="token operator">:</span> name <span class="token arrow operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">    <span class="token function-variable function">custom</span><span class="token operator">:</span> str <span class="token arrow operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>str<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">    <span class="token function-variable function">more</span><span class="token operator">:</span> chunks <span class="token arrow operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>chunks<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag"><span class="token punctuation">/&gt;</span></span>
</span></code></pre>
<h2 id="esm-build" class="text-3xl font-bold mt-10 mb-4 text-white hover:[&amp;_.header-link]:visible border-b border-purple-500/20 pb-3">ESM Build<a href="#esm-build" class="header-link invisible ml-2 text-purple-400 no-underline text-sm hover:text-purple-300 transition-colors">#</a></h2>
<p class="mb-4 leading-7 text-gray-300"><code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">react-intl</code> and its underlying libraries (<code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">intl-messageformat-parser</code>, <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">intl-messageformat</code>, <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">@formatjs/intl-relativetimeformat</code>, <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">intl-format-cache</code>, <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">intl-utils</code>) export ESM artifacts. This means you should configure your build toolchain to transpile those libraries.</p>
<h3 id="jest" class="text-2xl font-semibold mt-8 mb-3 text-purple-300 hover:[&amp;_.header-link]:visible">Jest<a href="#jest" class="header-link invisible ml-2 text-purple-400 no-underline text-sm hover:text-purple-300 transition-colors">#</a></h3>
<p class="mb-4 leading-7 text-gray-300">Add <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">transformIgnorePatterns</code> to always include those libraries, e.g:</p>
<pre class="relative group p-5 mb-6 overflow-auto bg-gradient-to-br from-gray-900 to-gray-950 text-gray-200 rounded-lg border border-purple-500/20 shadow-xl hover:border-purple-500/40 transition-colors"><code class="font-mono text-sm"><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  transformIgnorePatterns<span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token string">&#x27;/node_modules/(?!intl-messageformat|intl-messageformat-parser).+\\.js$&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h3 id="webpack" class="text-2xl font-semibold mt-8 mb-3 text-purple-300 hover:[&amp;_.header-link]:visible">webpack<a href="#webpack" class="header-link invisible ml-2 text-purple-400 no-underline text-sm hover:text-purple-300 transition-colors">#</a></h3>
<p class="mb-4 leading-7 text-gray-300">If you&#x27;re using <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">babel-loader</code>, add those libraries in <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">include</code>, e.g:</p>
<pre class="relative group p-5 mb-6 overflow-auto bg-gradient-to-br from-gray-900 to-gray-950 text-gray-200 rounded-lg border border-purple-500/20 shadow-xl hover:border-purple-500/40 transition-colors"><code class="font-mono text-sm"><span class="code-line">include<span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">  path<span class="token punctuation">.</span><span class="token method function property-access">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;node_modules/react-intl&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">  path<span class="token punctuation">.</span><span class="token method function property-access">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;node_modules/intl-messageformat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">  path<span class="token punctuation">.</span><span class="token method function property-access">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;node_modules/intl-messageformat-parser&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span></code></pre>
<h2 id="creating-intl-without-using-provider" class="text-3xl font-bold mt-10 mb-4 text-white hover:[&amp;_.header-link]:visible border-b border-purple-500/20 pb-3">Creating intl without using Provider<a href="#creating-intl-without-using-provider" class="header-link invisible ml-2 text-purple-400 no-underline text-sm hover:text-purple-300 transition-colors">#</a></h2>
<p class="mb-4 leading-7 text-gray-300">We&#x27;ve added a new API called <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">createIntl</code> that allows you to create an <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">IntlShape</code> object without using <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">Provider</code>. This allows you to format things outside of React lifecycle while reusing the same <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">intl</code> object. For example:</p>
<pre class="relative group p-5 mb-6 overflow-auto bg-gradient-to-br from-gray-900 to-gray-950 text-gray-200 rounded-lg border border-purple-500/20 shadow-xl hover:border-purple-500/40 transition-colors"><code class="font-mono text-sm"><span class="code-line">
</span><span class="code-line"><span class="token comment">// This is optional but highly recommended</span>
</span><span class="code-line"><span class="token comment">// since it prevents memory leak</span>
</span><span class="code-line"><span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token function">createIntlCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> intl <span class="token operator">=</span> <span class="token function">createIntl</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  locale<span class="token operator">:</span> <span class="token string">&#x27;fr-FR&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  messages<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> cache<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// Call imperatively</span>
</span><span class="code-line">intl<span class="token punctuation">.</span><span class="token method function property-access">formatNumber</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// Pass it to IntlProvider</span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">RawIntlProvider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>intl<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>foo<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">RawIntlProvider</span></span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
<p class="mb-4 leading-7 text-gray-300">This is especially beneficial in SSR where you can reuse the same <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">intl</code> object across requests.</p>
<h2 id="message-format-syntax-changes" class="text-3xl font-bold mt-10 mb-4 text-white hover:[&amp;_.header-link]:visible border-b border-purple-500/20 pb-3">Message Format Syntax Changes<a href="#message-format-syntax-changes" class="header-link invisible ml-2 text-purple-400 no-underline text-sm hover:text-purple-300 transition-colors">#</a></h2>
<p class="mb-4 leading-7 text-gray-300">We&#x27;ve rewritten our parser to be more faithful to <a href="https://unicode-org.github.io/icu/userguide/format_parse/messages/" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">ICU Message Format</a>, in order to potentially support skeleton. So far the backwards-incompatible changes are:</p>
<h3 id="escape-character-has-been-changed-to-apostrophe-" class="text-2xl font-semibold mt-8 mb-3 text-purple-300 hover:[&amp;_.header-link]:visible">Escape character has been changed to apostrophe (<code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">&#x27;</code>).<a href="#escape-character-has-been-changed-to-apostrophe-" class="header-link invisible ml-2 text-purple-400 no-underline text-sm hover:text-purple-300 transition-colors">#</a></h3>
<p class="mb-4 leading-7 text-gray-300">Previously while we were using ICU message format syntax, our escape char was backslash (<code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">\</code>). This however creates issues with strict ICU translation vendors that support other implementations like ICU4J/ICU4C. Thanks to <a href="https://github.com/pyrocat101" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">@pyrocat101</a> we&#x27;ve changed this behavior to be spec-compliant. This means:</p>
<pre class="relative group p-5 mb-6 overflow-auto bg-gradient-to-br from-gray-900 to-gray-950 text-gray-200 rounded-lg border border-purple-500/20 shadow-xl hover:border-purple-500/40 transition-colors"><code class="font-mono text-sm"><span class="code-line"><span class="token comment">// Before</span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedMessage</span></span> <span class="token attr-name">defaultMessage</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\\{foo\\}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token comment">//prints out &quot;{foo}&quot;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// After</span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedMessage</span></span> <span class="token attr-name">defaultMessage</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#x27;</span>{foo}&#x27;<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token comment">//prints out &quot;{foo}&quot;</span>
</span></code></pre>
<p class="mb-4 leading-7 text-gray-300">We highly recommend reading the spec to learn more about how quote/escaping works <a href="https://unicode-org.github.io/icu/userguide/format_parse/messages" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">here</a> under <strong>Quoting/Escaping</strong> section.</p>
<h3 id="placeholder-argument-syntax-change" class="text-2xl font-semibold mt-8 mb-3 text-purple-300 hover:[&amp;_.header-link]:visible">Placeholder argument syntax change<a href="#placeholder-argument-syntax-change" class="header-link invisible ml-2 text-purple-400 no-underline text-sm hover:text-purple-300 transition-colors">#</a></h3>
<p class="mb-4 leading-7 text-gray-300">Placeholder argument can no longer have <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">-</code> (e.g: <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">this is a {placeholder-var}</code> is invalid but <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">this is a {placeholder_var}</code> is).</p>
<h2 id="testing" class="text-3xl font-bold mt-10 mb-4 text-white hover:[&amp;_.header-link]:visible border-b border-purple-500/20 pb-3">Testing<a href="#testing" class="header-link invisible ml-2 text-purple-400 no-underline text-sm hover:text-purple-300 transition-colors">#</a></h2>
<p class="mb-4 leading-7 text-gray-300">We&#x27;ve removed <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">IntlProvider.getChildContext</code> for testing and now you can use <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">createIntl</code> to create a standalone <code class="px-2 py-1 rounded-md bg-purple-900/30 text-purple-300 font-mono text-sm border border-purple-500/20">intl</code> object outside of React and use that for testing purposes. See <a href="../guides/testing-with-react-intl" class="text-purple-400 hover:text-purple-300 underline decoration-purple-500/50 hover:decoration-purple-400 transition-colors">Testing with React Intl</a> for more details.</p></article></div></div></main></div></div></div>
        
        <script id="vike_pageContext" type="application/json">{"pageId":"\\/src\\/pages\\/docs\\/@path","routeParams":{"path":"react-intl\\/upgrade-guide-3.x"}}</script>
        <script id="vike_globalContext" type="application/json">{}</script>
        <script src="/assets/entries/entry-client-routing.BVfV3HgL.js" type="module" async></script>
        <link rel="modulepreload" href="/assets/entries/src_pages_docs_-path.Rg_GjLSf.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/assets/chunks/chunk-JiiPkRzF.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/assets/chunks/chunk-BN-kbICk.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/assets/chunks/chunk-CNlPHOEp.js" as="script" type="text/javascript">
      </body>
    </html>