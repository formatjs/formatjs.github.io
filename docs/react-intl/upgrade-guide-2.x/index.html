<!DOCTYPE html>
    <html lang="en">
      <head>
        <link rel="stylesheet" type="text/css" href="/assets/static/src_styles_global-00f5cfaf.DBgb4BRi.css">
        <link rel="stylesheet" type="text/css" href="/assets/static/style-f8c9f72e.C6uyB5YP.css">
        <link rel="stylesheet" type="text/css" href="/assets/static/src_styles_global-00f5cfaf.Dc7HkZwY.css">
        <meta charset="UTF-8" />
        
        
    
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
    
    
    
  
        
      </head>
      <body>
        
        <div id="root"><link rel="preload" as="image" href="/img/logo-icon.svg"/><div class="flex flex-col h-screen"><nav class="sticky top-0 z-50 bg-primary text-primary-foreground shadow-md"><div class="flex items-center h-16 px-4"><a href="/" class="flex h-10 mr-4"><img src="/img/logo-icon.svg" alt="FormatJS" class="h-10 cursor-pointer"/></a><div class="flex flex-1 md:hidden"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:text-accent-foreground h-9 w-9 text-primary-foreground hover:bg-primary/90" aria-label="navigation menu" type="button" id="radix-:R9:" aria-haspopup="menu" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-6 w-6"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button></div><div class="hidden md:flex flex-1 gap-6 items-center"><a href="/docs/getting-started/installation" class="text-primary-foreground no-underline cursor-pointer hover:underline">Docs</a><a href="/docs/react-intl" class="text-primary-foreground no-underline cursor-pointer hover:underline">API References</a><a href="/docs/polyfills" class="text-primary-foreground no-underline cursor-pointer hover:underline">Polyfills</a><a href="/docs/tooling/cli" class="text-primary-foreground no-underline cursor-pointer hover:underline">Tooling</a></div><div class="mr-4 flex-1 sm:flex-initial"><button class="flex items-center gap-2 h-10 px-3 rounded-lg border border-border bg-popover text-sm text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search h-4 w-4"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg><span class="hidden sm:inline">Search docs...</span><kbd class="hidden sm:inline-flex items-center gap-1 rounded border border-border bg-muted px-1.5 text-[10px] font-medium text-muted-foreground"><span class="text-xs">âŒ˜</span>K</kbd></button></div><a href="https://github.com/formatjs/formatjs" target="_blank" rel="noopener noreferrer" class="hidden md:flex items-center gap-2 text-primary-foreground no-underline">GitHub<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-4 w-4"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></div></nav><div class="flex flex-grow overflow-hidden"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 text-primary-foreground shadow h-9 w-9 fixed top-[60px] left-2.5 z-[1200] md:hidden bg-primary hover:bg-primary/90" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R6:" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-5 w-5"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button><aside class="hidden md:block w-[280px] shrink-0 border-r border-border top-16 h-[calc(100%-64px)] fixed overflow-auto z-[1000]"><div class="overflow-auto h-full"><nav class="py-2"><h3 class="px-4 py-2 text-sm font-semibold text-foreground/70 uppercase tracking-wide">Getting Started</h3><ul class="space-y-1"><li><a href="/docs/getting-started/installation" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Installation</a></li><li><a href="/docs/getting-started/message-declaration" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Message Declaration</a></li><li><a href="/docs/getting-started/message-extraction" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Message Extraction</a></li><li><a href="/docs/getting-started/message-distribution" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Message Distribution</a></li><li><a href="/docs/getting-started/application-workflow" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Application Workflow</a></li></ul></nav><div data-orientation="horizontal" role="none" class="shrink-0 bg-border h-[1px] w-full"></div><nav class="py-2"><h3 class="px-4 py-2 text-sm font-semibold text-foreground/70 uppercase tracking-wide">Core Concepts</h3><ul class="space-y-1"><li><a href="/docs/core-concepts/basic-internationalization-principles" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Basic Internationalization Principles</a></li><li><a href="/docs/core-concepts/icu-syntax" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">ICU Message Syntax</a></li></ul></nav><div data-orientation="horizontal" role="none" class="shrink-0 bg-border h-[1px] w-full"></div><nav class="py-2"><h3 class="px-4 py-2 text-sm font-semibold text-foreground/70 uppercase tracking-wide">React Intl</h3><ul class="space-y-1"><li><a href="/docs/react-intl" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Overview</a></li><li><a href="/docs/react-intl/api" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">API</a></li><li><a href="/docs/react-intl/components" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Components</a></li><li><a href="/docs/react-intl/upgrade-guide-2.x" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground bg-accent text-accent-foreground font-medium">Upgrade Guide 2.x</a></li><li><a href="/docs/react-intl/upgrade-guide-3.x" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Upgrade Guide 3.x</a></li><li><a href="/docs/react-intl/upgrade-guide-4.x" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Upgrade Guide 4.x</a></li><li><a href="/docs/react-intl/upgrade-guide-5.x" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Upgrade Guide 5.x</a></li></ul></nav><div data-orientation="horizontal" role="none" class="shrink-0 bg-border h-[1px] w-full"></div><nav class="py-2"><h3 class="px-4 py-2 text-sm font-semibold text-foreground/70 uppercase tracking-wide">Polyfills</h3><ul class="space-y-1"><li><a href="/docs/polyfills" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Overview</a></li><li><a href="/docs/polyfills/intl-datetimeformat" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Intl.DateTimeFormat</a></li><li><a href="/docs/polyfills/intl-displaynames" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Intl.DisplayNames</a></li><li><a href="/docs/polyfills/intl-durationformat" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Intl.DurationFormat</a></li><li><a href="/docs/polyfills/intl-getcanonicallocales" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Intl.GetCanonicalLocales</a></li><li><a href="/docs/polyfills/intl-listformat" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Intl.ListFormat</a></li><li><a href="/docs/polyfills/intl-locale" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Intl.Locale</a></li><li><a href="/docs/polyfills/intl-localematcher" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Intl.LocaleMatcher</a></li><li><a href="/docs/polyfills/intl-numberformat" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Intl.NumberFormat</a></li><li><a href="/docs/polyfills/intl-pluralrules" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Intl.PluralRules</a></li><li><a href="/docs/polyfills/intl-relativetimeformat" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Intl.RelativeTimeFormat</a></li><li><a href="/docs/polyfills/intl-segmenter" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Intl.Segmenter</a></li></ul></nav><div data-orientation="horizontal" role="none" class="shrink-0 bg-border h-[1px] w-full"></div><nav class="py-2"><h3 class="px-4 py-2 text-sm font-semibold text-foreground/70 uppercase tracking-wide">Tooling</h3><ul class="space-y-1"><li><a href="/docs/tooling/cli" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">CLI</a></li><li><a href="/docs/tooling/babel-plugin" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Babel Plugin</a></li><li><a href="/docs/tooling/ts-transformer" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">TypeScript Transformer</a></li><li><a href="/docs/tooling/swc-plugin" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">SWC Plugin</a></li><li><a href="/docs/tooling/linter" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">ESLint Plugin</a></li></ul></nav><div data-orientation="horizontal" role="none" class="shrink-0 bg-border h-[1px] w-full"></div><nav class="py-2"><h3 class="px-4 py-2 text-sm font-semibold text-foreground/70 uppercase tracking-wide">Guides</h3><ul class="space-y-1"><li><a href="/docs/guides/testing-with-react-intl" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Testing with React Intl</a></li><li><a href="/docs/guides/runtime-requirements" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Runtime Requirements</a></li><li><a href="/docs/guides/advanced-usage" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Advanced Usage</a></li><li><a href="/docs/guides/distribute-libraries" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Distribute Libraries</a></li><li><a href="/docs/guides/develop" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Development</a></li></ul></nav><div data-orientation="horizontal" role="none" class="shrink-0 bg-border h-[1px] w-full"></div><nav class="py-2"><h3 class="px-4 py-2 text-sm font-semibold text-foreground/70 uppercase tracking-wide">Other APIs</h3><ul class="space-y-1"><li><a href="/docs/vue-intl" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Vue Intl</a></li><li><a href="/docs/intl-messageformat" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">Intl MessageFormat</a></li><li><a href="/docs/icu-messageformat-parser" class="block px-4 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-muted-foreground">ICU MessageFormat Parser</a></li></ul></nav></div></aside><main class="flex-grow p-6 md:ml-[280px] overflow-auto"><nav aria-label="breadcrumb" class="mb-4"><ol class="flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5"><li class="inline-flex items-center gap-1.5"><a class="transition-colors hover:text-foreground" href="/">Home</a></li><li role="presentation" aria-hidden="true" class="[&amp;&gt;svg]:size-3.5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"></path></svg></li><li class="inline-flex items-center gap-1.5"><a class="transition-colors hover:text-foreground" href="/docs">Docs</a></li><li role="presentation" aria-hidden="true" class="[&amp;&gt;svg]:size-3.5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"></path></svg></li><li class="inline-flex items-center gap-1.5"><a class="transition-colors hover:text-foreground" href="/docs/react-intl">React Intl</a></li><li role="presentation" aria-hidden="true" class="[&amp;&gt;svg]:size-3.5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"></path></svg></li><li class="inline-flex items-center gap-1.5"><span role="link" aria-disabled="true" aria-current="page" class="font-normal text-foreground">Upgrade Guide 2.x</span></li></ol></nav><article class="doc-article"><h2 id="use-react-014-or-15" class="text-2xl font-bold mt-6 mb-3 hover:[&amp;_.header-link]:visible">Use React 0.14 or 15<a href="#use-react-014-or-15" class="header-link invisible ml-2 text-primary no-underline text-sm">#</a></h2>
<p class="mb-4 leading-7">React Intl v2 has a peer dependency on <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">react@^0.14.0 || ^15.0.0-0</code> and now takes advantage of features and changes in React 0.14 and also works with React 15.</p>
<h2 id="update-how-locale-data-is-added" class="text-2xl font-bold mt-6 mb-3 hover:[&amp;_.header-link]:visible">Update How Locale Data is Added<a href="#update-how-locale-data-is-added" class="header-link invisible ml-2 text-primary no-underline text-sm">#</a></h2>
<p class="mb-4 leading-7">The locale data modules in React Intl v2 have been refactored to <em>provide</em> data, instead of mutating React Intl&#x27;s internal locale data registry. The <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">react-intl/locale-data/*</code> files are also decoupled from the <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">ReactIntl</code> global and instead provide UMD modules with a new <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">ReactIntlLocaleData</code> global. These changes, mean apps need update how they are registering the locale data they need in the browser.</p>
<h3 id="add-call-to-addlocaledata-in-browser" class="text-xl font-semibold mt-4 mb-2 hover:[&amp;_.header-link]:visible">Add Call to <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">addLocaleData()</code> in Browser<a href="#add-call-to-addlocaledata-in-browser" class="header-link invisible ml-2 text-primary no-underline text-sm">#</a></h3>
<p class="mb-4 leading-7">There is now an <a href="api.md#addlocaledata" class="text-primary hover:underline"><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">addLocaleData()</code></a> function that needs to be called with the locale data that has been loaded. You can do the following in your main client JavaScript entry point:</p>
<p class="mb-4 leading-7">This assumes a locale data <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">&lt;script&gt;</code> is added based on the request; e.g., for French speaking users:</p>
<pre class="p-4 mb-4 overflow-auto bg-[#2d2d2d] text-gray-200 rounded-md"><code class="font-mono text-sm"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>react-intl/locale-data/fr.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
<p class="mb-4 leading-7"><strong>Using <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">&lt;script src=&quot;react-intl/dist/react-intl.js&gt;</code></strong></p>
<pre class="p-4 mb-4 overflow-auto bg-[#2d2d2d] text-gray-200 rounded-md"><code class="font-mono text-sm"><span class="code-line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&#x27;ReactIntl&#x27;</span> <span class="token keyword">in</span> <span class="token dom variable">window</span> <span class="token operator">&amp;&amp;</span> <span class="token string">&#x27;ReactIntlLocaleData&#x27;</span> <span class="token keyword">in</span> <span class="token dom variable">window</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">keys</span><span class="token punctuation">(</span><span class="token maybe-class-name">ReactIntlLocaleData</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span>lang <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token maybe-class-name">ReactIntl</span><span class="token punctuation">.</span><span class="token method function property-access">addLocaleData</span><span class="token punctuation">(</span><span class="token maybe-class-name">ReactIntlLocaleData</span><span class="token punctuation">[</span>lang<span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p class="mb-4 leading-7"><strong>Using Browserify/Webpack to Load React Intl</strong></p>
<pre class="p-4 mb-4 overflow-auto bg-[#2d2d2d] text-gray-200 rounded-md"><code class="font-mono text-sm"><span class="code-line">
</span><span class="code-line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&#x27;ReactIntlLocaleData&#x27;</span> <span class="token keyword">in</span> <span class="token dom variable">window</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">keys</span><span class="token punctuation">(</span><span class="token maybe-class-name">ReactIntlLocaleData</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span>lang <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">addLocaleData</span><span class="token punctuation">(</span><span class="token maybe-class-name">ReactIntlLocaleData</span><span class="token punctuation">[</span>lang<span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<div role="alert" class="relative w-full rounded-lg border px-4 py-3 text-sm [&amp;&gt;svg+div]:translate-y-[-3px] [&amp;&gt;svg]:absolute [&amp;&gt;svg]:left-4 [&amp;&gt;svg]:top-4 [&amp;&gt;svg]:text-foreground [&amp;&gt;svg~*]:pl-7 my-4 border-blue-500 bg-blue-50 text-blue-900 dark:bg-blue-950 dark:text-blue-100"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info h-4 w-4"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg><h5 class="mb-1 font-medium leading-none tracking-tight">Info</h5><div class="text-sm [&amp;_p]:leading-relaxed"><p class="mb-4 leading-7">This decoupling of the library from the locale data, allows for the files to be loaded via <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">&lt;script async&gt;</code>. When using async scripts, your client bootstrapping code will need to wait for the <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">load</code> event, including the code above.</p></div></div>
<h2 id="remove-intl-mixin" class="text-2xl font-bold mt-6 mb-3 hover:[&amp;_.header-link]:visible">Remove Intl Mixin<a href="#remove-intl-mixin" class="header-link invisible ml-2 text-primary no-underline text-sm">#</a></h2>
<p class="mb-4 leading-7"><strong>The <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">IntlMixin</code> has been removed from React Intl v2.</strong> The mixin did two things: it automatically propagated <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">locales</code>, <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">formats</code>, and <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">messages</code> throughout an app&#x27;s hierarchy, and it provided an imperative API via <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">format*()</code> functions. These jobs are now handled by <a href="components.md#intlprovider" class="text-primary hover:underline"><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">&lt;IntlProvider&gt;</code></a> and <a href="api.md#injection-api" class="text-primary hover:underline"><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">injectIntl()</code></a>, respectively:</p>
<h3 id="update-to-intlprovider" class="text-xl font-semibold mt-4 mb-2 hover:[&amp;_.header-link]:visible">Update to <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">IntlProvider</code><a href="#update-to-intlprovider" class="header-link invisible ml-2 text-primary no-underline text-sm">#</a></h3>
<p class="mb-4 leading-7">In React Intl v1, you would add the <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">IntlMixin</code> to your root component; e.g., <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">&lt;App&gt;</code>. Remove the <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">IntlMixin</code> and instead wrap your root component with <a href="components.md#intlprovider" class="text-primary hover:underline"><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">&lt;IntlProvider&gt;</code></a>:</p>
<pre class="p-4 mb-4 overflow-auto bg-[#2d2d2d] text-gray-200 rounded-md"><code class="font-mono text-sm"><span class="code-line">
</span><span class="code-line"><span class="token maybe-class-name">ReactDOM</span><span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">IntlProvider</span></span> <span class="token attr-name">locale</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">IntlProvider</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">&#x27;container&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">)</span>
</span></code></pre>
<div role="alert" class="relative w-full rounded-lg border px-4 py-3 text-sm [&amp;&gt;svg+div]:translate-y-[-3px] [&amp;&gt;svg]:absolute [&amp;&gt;svg]:left-4 [&amp;&gt;svg]:top-4 [&amp;&gt;svg]:text-foreground [&amp;&gt;svg~*]:pl-7 my-4 border-blue-500 bg-blue-50 text-blue-900 dark:bg-blue-950 dark:text-blue-100"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info h-4 w-4"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg><h5 class="mb-1 font-medium leading-none tracking-tight">Info</h5><div class="text-sm [&amp;_p]:leading-relaxed"><p class="mb-4 leading-7">The <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">locale</code> prop is <strong>singular</strong>, required, and only accepts a string value. This is a simplification of the plural <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">locales</code> prop used by the <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">IntlMixin</code>.</p></div></div>
<h3 id="update-to-injectintl" class="text-xl font-semibold mt-4 mb-2 hover:[&amp;_.header-link]:visible">Update to <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">injectIntl()</code><a href="#update-to-injectintl" class="header-link invisible ml-2 text-primary no-underline text-sm">#</a></h3>
<p class="mb-4 leading-7">The <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">IntlMixin</code> also provided the imperative API for custom components to use the <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">format*()</code> methods; e.g., <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">formatDate()</code> to get formatted strings for using in places like <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">title</code> and <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">aria</code> attribute. Remove the <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">IntlMixin</code> and instead use the <a href="api.md#injectintl" class="text-primary hover:underline"><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">injectIntl()</code></a> Hight Order Component (HOC) factory function to inject the imperative API via <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">props</code>.</p>
<p class="mb-4 leading-7">Here&#x27;s an example of a custom <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">&lt;RelativeTime&gt;</code> stateless component which uses <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">injectIntl()</code> and the imperative <a href="api.md#formatdate" class="text-primary hover:underline"><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">formatDate()</code></a> API:</p>
<pre class="p-4 mb-4 overflow-auto bg-[#2d2d2d] text-gray-200 rounded-md"><code class="font-mono text-sm"><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">to2Digits</span> <span class="token operator">=</span> num <span class="token arrow operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>num <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">0</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>num<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> num<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">RelativeTime</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>date<span class="token punctuation">,</span> intl<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">let</span> year <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token method function property-access">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">let</span> month <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token method function property-access">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>
</span><span class="code-line">  <span class="token keyword">let</span> day <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token method function property-access">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">let</span> formattedDate <span class="token operator">=</span> intl<span class="token punctuation">.</span><span class="token method function property-access">formatDate</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line">    year<span class="token operator">:</span> <span class="token string">&#x27;long&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    month<span class="token operator">:</span> <span class="token string">&#x27;numeric&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    day<span class="token operator">:</span> <span class="token string">&#x27;numeric&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>time</span>
</span></span><span class="code-line"><span class="token tag">      <span class="token attr-name">dateTime</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>year<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">to2Digits</span><span class="token punctuation">(</span>month<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">to2Digits</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">      <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>formattedDate<span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedRelative</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>date<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>time</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">injectIntl</span><span class="token punctuation">(</span><span class="token maybe-class-name">RelativeTime</span><span class="token punctuation">)</span>
</span></code></pre>
<p class="mb-4 leading-7"><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">injectIntl()</code> is similar to a <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">connect()</code> HOC factory function you might find in a Flux framework to connect a component to a store.</p>
<h2 id="change-how-messages-are-formatted" class="text-2xl font-bold mt-6 mb-3 hover:[&amp;_.header-link]:visible">Change How Messages are Formatted<a href="#change-how-messages-are-formatted" class="header-link invisible ml-2 text-primary no-underline text-sm">#</a></h2>
<p class="mb-4 leading-7"><strong>The way string messages are formatted in React Intl v2 has changed significantly!</strong> This is the most disruptive set of change when upgrading from v1 to v2; but it enables many great new features.</p>
<p class="mb-4 leading-7">React Intl v2 introduces a new <a href="api.md#message-descriptor" class="text-primary hover:underline"><strong>Message Descriptor</strong></a> concept which can be used to define an app&#x27;s default string messages. A Message Descriptor is an object with the following properties, <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">id</code> is the only required prop:</p>
<ul class="pl-6 mb-4 list-disc">
<li class="mb-2"><strong><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">id</code></strong>: A unique, stable identifier for the message</li>
<li class="mb-2"><strong><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">description</code></strong>: Context for the translator about how it&#x27;s used in the UI</li>
<li class="mb-2"><strong><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">defaultMessage</code></strong>: The default message (probably in English)</li>
</ul>
<div role="alert" class="relative w-full rounded-lg border px-4 py-3 text-sm [&amp;&gt;svg+div]:translate-y-[-3px] [&amp;&gt;svg]:absolute [&amp;&gt;svg]:left-4 [&amp;&gt;svg]:top-4 [&amp;&gt;svg]:text-foreground [&amp;&gt;svg~*]:pl-7 my-4 border-blue-500 bg-blue-50 text-blue-900 dark:bg-blue-950 dark:text-blue-100"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info h-4 w-4"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg><h5 class="mb-1 font-medium leading-none tracking-tight">Info</h5><div class="text-sm [&amp;_p]:leading-relaxed"><p class="mb-4 leading-7">This upgrade guide will focus on using Message Descriptors that only contain an <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">id</code> property.</p></div></div>
<h3 id="flatten-messages-object" class="text-xl font-semibold mt-4 mb-2 hover:[&amp;_.header-link]:visible">Flatten <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">messages</code> Object<a href="#flatten-messages-object" class="header-link invisible ml-2 text-primary no-underline text-sm">#</a></h3>
<p class="mb-4 leading-7">React Intl v2 no longer supports nested <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">messages</code> objects, instead the collection of translated string messages passed to <a href="components.md#intlprovider" class="text-primary hover:underline"><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">&lt;IntlProvider&gt;</code></a> must be flat. This is an explicit design choice which simplifies while increasing flexibility. React Intl v2 does not apply any special semantics to strings with dots; e.g., <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">&quot;namespaced.string_id&quot;</code>.</p>
<p class="mb-4 leading-7">Apps using a nested <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">messages</code> object structure could use the following function to flatten their object according to React Intl v1&#x27;s semantics:</p>
<pre class="p-4 mb-4 overflow-auto bg-[#2d2d2d] text-gray-200 rounded-md"><code class="font-mono text-sm"><span class="code-line"><span class="token keyword">function</span> <span class="token function">flattenMessages</span><span class="token punctuation">(</span>nestedMessages<span class="token punctuation">,</span> prefix <span class="token operator">=</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">keys</span><span class="token punctuation">(</span>nestedMessages<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>messages<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">let</span> value <span class="token operator">=</span> nestedMessages<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token keyword">let</span> prefixedKey <span class="token operator">=</span> prefix <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>prefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> key
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&#x27;string&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      messages<span class="token punctuation">[</span>prefixedKey<span class="token punctuation">]</span> <span class="token operator">=</span> value
</span><span class="code-line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">assign</span><span class="token punctuation">(</span>messages<span class="token punctuation">,</span> <span class="token function">flattenMessages</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> prefixedKey<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">return</span> messages
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">let</span> messages <span class="token operator">=</span> <span class="token function">flattenMessages</span><span class="token punctuation">(</span>nestedMessages<span class="token punctuation">)</span>
</span></code></pre>
<div role="alert" class="relative w-full rounded-lg border px-4 py-3 text-sm [&amp;&gt;svg+div]:translate-y-[-3px] [&amp;&gt;svg]:absolute [&amp;&gt;svg]:left-4 [&amp;&gt;svg]:top-4 [&amp;&gt;svg]:text-foreground [&amp;&gt;svg~*]:pl-7 my-4 border-blue-500 bg-blue-50 text-blue-900 dark:bg-blue-950 dark:text-blue-100"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info h-4 w-4"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg><h5 class="mb-1 font-medium leading-none tracking-tight">Info</h5><div class="text-sm [&amp;_p]:leading-relaxed"><p class="mb-4 leading-7">Message ids can still contain <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">&quot;.&quot;</code>s, so the ids themselves remain the same, it&#x27;s only the <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">messages</code> object structure that needs to change.</p></div></div>
<h3 id="replace-getintlmessage-calls-with-message-descriptors" class="text-xl font-semibold mt-4 mb-2 hover:[&amp;_.header-link]:visible">Replace <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">getIntlMessage()</code> Calls with Message Descriptors<a href="#replace-getintlmessage-calls-with-message-descriptors" class="header-link invisible ml-2 text-primary no-underline text-sm">#</a></h3>
<p class="mb-4 leading-7">The <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">getIntlMessage()</code> method that was provided by the <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">IntlMixin</code> has been removed in React Intl v2. It was simply a helper that interpreted a message id string with <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">&quot;.&quot;</code>s by looking up the translated message in a nested <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">messages</code> object. With the removal of <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">IntlMixin</code> and the change to a flat <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">messages</code> object, this method has been removed.</p>
<p class="mb-4 leading-7">All calls to <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">getIntlMessage()</code> need to be replaced with a Message Descriptor.</p>
<p class="mb-4 leading-7"><strong>Replace:</strong></p>
<pre class="p-4 mb-4 overflow-auto bg-[#2d2d2d] text-gray-200 rounded-md"><code class="font-mono text-sm"><span class="code-line"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">getIntlMessage</span><span class="token punctuation">(</span><span class="token string">&#x27;some.message.id&#x27;</span><span class="token punctuation">)</span>
</span></code></pre>
<p class="mb-4 leading-7"><strong>With:</strong></p>
<pre class="p-4 mb-4 overflow-auto bg-[#2d2d2d] text-gray-200 rounded-md"><code class="font-mono text-sm"><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  id<span class="token operator">:</span> <span class="token string">&#x27;some.message.id&#x27;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h3 id="update-formatmessage-calls" class="text-xl font-semibold mt-4 mb-2 hover:[&amp;_.header-link]:visible">Update <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">formatMessage()</code> Calls<a href="#update-formatmessage-calls" class="header-link invisible ml-2 text-primary no-underline text-sm">#</a></h3>
<p class="mb-4 leading-7">A typical pattern when calling <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">formatMessage()</code> is to nest a call to <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">getIntlMessage()</code>. These can be easily updated:</p>
<p class="mb-4 leading-7"><strong>1.0:</strong></p>
<pre class="p-4 mb-4 overflow-auto bg-[#2d2d2d] text-gray-200 rounded-md"><code class="font-mono text-sm"><span class="code-line"><span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">formatMessage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">getIntlMessage</span><span class="token punctuation">(</span><span class="token string">&#x27;some.message.id&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> values<span class="token punctuation">)</span>
</span></code></pre>
<p class="mb-4 leading-7"><strong>2.0:</strong></p>
<pre class="p-4 mb-4 overflow-auto bg-[#2d2d2d] text-gray-200 rounded-md"><code class="font-mono text-sm"><span class="code-line"><span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">intl</span><span class="token punctuation">.</span><span class="token method function property-access">formatMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token string">&#x27;some.message.id&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> values<span class="token punctuation">)</span>
</span></code></pre>
<div role="alert" class="relative w-full rounded-lg border px-4 py-3 text-sm [&amp;&gt;svg+div]:translate-y-[-3px] [&amp;&gt;svg]:absolute [&amp;&gt;svg]:left-4 [&amp;&gt;svg]:top-4 [&amp;&gt;svg]:text-foreground [&amp;&gt;svg~*]:pl-7 my-4 border-blue-500 bg-blue-50 text-blue-900 dark:bg-blue-950 dark:text-blue-100"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info h-4 w-4"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg><h5 class="mb-1 font-medium leading-none tracking-tight">Info</h5><div class="text-sm [&amp;_p]:leading-relaxed"><p class="mb-4 leading-7">In React Intl v2, the <a href="api.md#formatmessage" class="text-primary hover:underline"><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">formatMessage()</code></a> function is injected via <a href="api.md#injectintl" class="text-primary hover:underline"><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">injectIntl()</code></a>.</p></div></div>
<h3 id="update-formattedmessage-and-formattedhtmlmessage-instances" class="text-xl font-semibold mt-4 mb-2 hover:[&amp;_.header-link]:visible">Update <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">FormattedMessage</code> and <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">FormattedHTMLMessage</code> Instances<a href="#update-formattedmessage-and-formattedhtmlmessage-instances" class="header-link invisible ml-2 text-primary no-underline text-sm">#</a></h3>
<p class="mb-4 leading-7">The props for these two components have completely changed in React Intl v2. Instead of taking a <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">message</code> prop and treating all other props as values to fill in placeholders in a message, <a href="components.md#formattedmessage" class="text-primary hover:underline"><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">&lt;FormattedMessage&gt;</code></a> and <a href="components.md#formattedhtmlmessage" class="text-primary hover:underline"><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">&lt;FormattedHTMLMessage&gt;</code></a> now the same props as a Message Descriptor plus a new <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">values</code> prop.</p>
<p class="mb-4 leading-7">The new <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">values</code> prop groups all of the message&#x27;s placeholder values together into an object.</p>
<p class="mb-4 leading-7">The following example shows up to update a <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">&lt;FormattedMessage&gt;</code> instance to use the new props and remove the call to <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">getIntlMessage()</code>:</p>
<p class="mb-4 leading-7"><strong>1.0:</strong></p>
<pre class="p-4 mb-4 overflow-auto bg-[#2d2d2d] text-gray-200 rounded-md"><code class="font-mono text-sm"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedMessage</span></span> <span class="token attr-name">message</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">getIntlMessage</span><span class="token punctuation">(</span><span class="token string">&#x27;greeting&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Eric<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</span></code></pre>
<p class="mb-4 leading-7"><strong>2.0:</strong></p>
<pre class="p-4 mb-4 overflow-auto bg-[#2d2d2d] text-gray-200 rounded-md"><code class="font-mono text-sm"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedMessage</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>greeting<span class="token punctuation">&quot;</span></span> <span class="token attr-name">values</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">&#x27;Eric&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</span></code></pre>
<h2 id="update-how-relative-times-are-formatted" class="text-2xl font-bold mt-6 mb-3 hover:[&amp;_.header-link]:visible">Update How Relative Times are Formatted<a href="#update-how-relative-times-are-formatted" class="header-link invisible ml-2 text-primary no-underline text-sm">#</a></h2>
<p class="mb-4 leading-7">Minor changes have been made to how the &quot;now&quot; reference time is specified when formatting relative times in React Intl v2. It&#x27;s uncommon to specify this value outside of test code, so it might not exist in your app.</p>
<h3 id="rename-formattedrelatives-now-prop-to-initialnow" class="text-xl font-semibold mt-4 mb-2 hover:[&amp;_.header-link]:visible">Rename <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">FormattedRelative</code>&#x27;s <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">now</code> Prop to <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">initialNow</code><a href="#rename-formattedrelatives-now-prop-to-initialnow" class="header-link invisible ml-2 text-primary no-underline text-sm">#</a></h3>
<p class="mb-4 leading-7">A new feature has been added to <a href="components.md#formattedrelative" class="text-primary hover:underline"><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">&lt;FormattedRelative&gt;</code></a> instances in React Intl v2, they now &quot;tick&quot; and stay up to date. Since time moves forward, it was confusing to have a prop named <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">now</code>, so it has been renamed to <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">initialNow</code>. Any <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">&lt;FormattedRelative&gt;</code> instances that use <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">now</code> should update to prop name to <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">initialNow</code>:</p>
<p class="mb-4 leading-7"><strong>1.0:</strong></p>
<pre class="p-4 mb-4 overflow-auto bg-[#2d2d2d] text-gray-200 rounded-md"><code class="font-mono text-sm"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedRelative</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>date<span class="token punctuation">}</span></span> <span class="token attr-name">now</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>otherDate<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</span></code></pre>
<p class="mb-4 leading-7"><strong>2.0:</strong></p>
<pre class="p-4 mb-4 overflow-auto bg-[#2d2d2d] text-gray-200 rounded-md"><code class="font-mono text-sm"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedRelative</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>date<span class="token punctuation">}</span></span> <span class="token attr-name">initialNow</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>otherDate<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</span></code></pre>
<div role="alert" class="relative w-full rounded-lg border px-4 py-3 text-sm [&amp;&gt;svg+div]:translate-y-[-3px] [&amp;&gt;svg]:absolute [&amp;&gt;svg]:left-4 [&amp;&gt;svg]:top-4 [&amp;&gt;svg]:text-foreground [&amp;&gt;svg~*]:pl-7 my-4 border-blue-500 bg-blue-50 text-blue-900 dark:bg-blue-950 dark:text-blue-100"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info h-4 w-4"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg><h5 class="mb-1 font-medium leading-none tracking-tight">Info</h5><div class="text-sm [&amp;_p]:leading-relaxed"><p class="mb-4 leading-7">The <a href="components.md#intlprovider" class="text-primary hover:underline"><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">&lt;IntlProvider&gt;</code></a> component also has a <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">initialNow</code> prop which can be assigned a value to stabilize the &quot;now&quot; reference time for <em>all</em> <a href="components.md#formattedrelative" class="text-primary hover:underline"><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">&lt;FormattedRelative&gt;</code></a> instances. This is useful for universal/isomorphic apps to proper React checksums between the server and client initial render.</p></div></div>
<h3 id="merge-formatrelatives-second-and-third-arguments" class="text-xl font-semibold mt-4 mb-2 hover:[&amp;_.header-link]:visible">Merge <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">formatRelative()</code>&#x27;s Second and Third Arguments<a href="#merge-formatrelatives-second-and-third-arguments" class="header-link invisible ml-2 text-primary no-underline text-sm">#</a></h3>
<p class="mb-4 leading-7">The signature of the <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">formatRelative()</code> function has been aligned with the other <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">format*()</code> functions and in React Intl v2, it only accepts two arguments: <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">value</code> and <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">options</code>. To specify a &quot;now&quot; reference time, add it to the <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">options</code> argument, and remove the third <code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">formatOptions</code> argument:</p>
<p class="mb-4 leading-7"><strong>1.0:</strong></p>
<pre class="p-4 mb-4 overflow-auto bg-[#2d2d2d] text-gray-200 rounded-md"><code class="font-mono text-sm"><span class="code-line"><span class="token keyword">let</span> relative <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">formatRelative</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token punctuation">{</span>units<span class="token operator">:</span> <span class="token string">&#x27;hour&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>now<span class="token operator">:</span> otherDate<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
<p class="mb-4 leading-7"><strong>2.0:</strong></p>
<pre class="p-4 mb-4 overflow-auto bg-[#2d2d2d] text-gray-200 rounded-md"><code class="font-mono text-sm"><span class="code-line"><span class="token keyword">let</span> relative <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">intl</span><span class="token punctuation">.</span><span class="token method function property-access">formatRelative</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line">  units<span class="token operator">:</span> <span class="token string">&#x27;hour&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  now<span class="token operator">:</span> otherDate<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
<div role="alert" class="relative w-full rounded-lg border px-4 py-3 text-sm [&amp;&gt;svg+div]:translate-y-[-3px] [&amp;&gt;svg]:absolute [&amp;&gt;svg]:left-4 [&amp;&gt;svg]:top-4 [&amp;&gt;svg]:text-foreground [&amp;&gt;svg~*]:pl-7 my-4 border-blue-500 bg-blue-50 text-blue-900 dark:bg-blue-950 dark:text-blue-100"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info h-4 w-4"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg><h5 class="mb-1 font-medium leading-none tracking-tight">Info</h5><div class="text-sm [&amp;_p]:leading-relaxed"><p class="mb-4 leading-7">In React Intl v2, the <a href="api.md#formatrelative" class="text-primary hover:underline"><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">formatRelative()</code></a> function is injected via <a href="api.md#injectintl" class="text-primary hover:underline"><code class="px-1.5 py-0.5 rounded bg-muted text-muted-foreground font-mono text-sm">injectIntl()</code></a>.</p></div></div></article></main></div></div></div>
        
        <script id="vike_pageContext" type="application/json">{"pageId":"\\/src\\/pages\\/docs\\/@path","routeParams":{"path":"react-intl\\/upgrade-guide-2.x"}}</script>
        <script id="vike_globalContext" type="application/json">{}</script>
        <script src="/assets/entries/entry-client-routing.BmPT9ywx.js" type="module" async></script>
        <link rel="modulepreload" href="/assets/entries/src_pages_docs_-path.Dn3h36x9.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/assets/chunks/chunk-JnKA-Zm6.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/assets/chunks/chunk-B6b-fCh-.js" as="script" type="text/javascript">
      </body>
    </html>