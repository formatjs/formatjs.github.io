(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{115:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"frontMatter",(function(){return u})),r.d(t,"metadata",(function(){return l})),r.d(t,"rightToc",(function(){return i})),r.d(t,"default",(function(){return p}));var n=r(1),a=r(6),c=(r(0),r(134)),o=r(143),u={id:"intl-messageformat-parser",title:"Intl MessageFormat Parser"},l={id:"intl-messageformat-parser",title:"Intl MessageFormat Parser",description:"Parses [ICU Message strings][icu] into an AST via JavaScript.",source:"@site/docs/intl-messageformat-parser.md",permalink:"/docs/intl-messageformat-parser",editUrl:"https://github.com/formatjs/formatjs/edit/master/website/docs/intl-messageformat-parser.md",sidebar:"docs",previous:{title:"Intl MessageFormat",permalink:"/docs/intl-messageformat"},next:{title:"Overview",permalink:"/docs/react-intl"}};e.parse=o.a;var i=[{value:"Overview",id:"overview",children:[]},{value:"Usage",id:"usage",children:[{value:"Example",id:"example",children:[]}]},{value:"Supported DateTime Skeleton",id:"supported-datetime-skeleton",children:[]},{value:"Benchmarks",id:"benchmarks",children:[]}],s={rightToc:i};function p(e){var t=e.components,r=Object(a.a)(e,["components"]);return Object(c.b)("wrapper",Object(n.a)({},s,r,{components:t,mdxType:"MDXLayout"}),Object(c.b)("p",null,"Parses ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"http://userguide.icu-project.org/formatparse/messages"}),"ICU Message strings")," into an AST via JavaScript."),Object(c.b)("p",null,Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.npmjs.com/package/intl-messageformat-parser"}),Object(c.b)("img",Object(n.a)({parentName:"a"},{src:"https://badgen.net/npm/v/intl-messageformat-parser",alt:"npm Version"}))),"\n",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"https://bundlephobia.com/result?p=intl-messageformat-parser"}),Object(c.b)("img",Object(n.a)({parentName:"a"},{src:"https://badgen.net/bundlephobia/minzip/intl-messageformat-parser",alt:"size"})))),Object(c.b)("h2",{id:"overview"},"Overview"),Object(c.b)("p",null,"This package implements a parser in JavaScript that parses the industry standard ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"http://userguide.icu-project.org/formatparse/messages"}),"ICU Message strings")," \u2014 used for internationalization \u2014 into an AST. The produced AST can then be used by a compiler, like ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/formatjs/formatjs"}),Object(c.b)("inlineCode",{parentName:"a"},"intl-messageformat")),", to produce localized formatted strings for display to users."),Object(c.b)("p",null,"This parser is written in ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"https://pegjs.org/"}),"PEG.js"),", a parser generator for JavaScript."),Object(c.b)("h2",{id:"usage"},"Usage"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-ts"}),"import {parse} from 'intl-messageformat-parser';\nconst ast = parse('this is {count, plural, one{# dog} other{# dogs}}');\n")),Object(c.b)("h3",{id:"example"},"Example"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-tsx",metastring:"live",live:!0}),"function () {\n  const ast = parse(\n        `On {takenDate, date, short} <bold>{name}</bold> took {numPhotos, plural,\n      =0 {no photos.}\n      =1 {one photo.}\n      other {# photos.}\n  }`)\n  return (\n    <pre>\n      {JSON.stringify(ast, null, 2)}\n    </pre>\n  )\n}\n")),Object(c.b)("h2",{id:"supported-datetime-skeleton"},"Supported DateTime Skeleton"),Object(c.b)("p",null,"ICU provides a ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table"}),"wide array of pattern")," to customize date time format. However, not all of them are available via ECMA402's Intl API. Therefore, our parser only support the following patterns"),Object(c.b)("table",null,Object(c.b)("thead",{parentName:"table"},Object(c.b)("tr",{parentName:"thead"},Object(c.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Symbol"),Object(c.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Meaning"),Object(c.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Notes"))),Object(c.b)("tbody",{parentName:"table"},Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"G"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Era designator"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"y"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"year"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"M"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"month in year"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"L"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"stand-alone month in year"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"d"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"day in month"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"E"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"day of week"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"e"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"local day of week"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"e..eee")," is not supported")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"c"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"stand-alone local day of week"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"c..ccc")," is not supported")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"a"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"AM/PM marker"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"h"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Hour ","[1-12]"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"H"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Hour ","[0-23]"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"K"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Hour ","[0-11]"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"k"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Hour ","[1-24]"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"m"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Minute"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"s"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Second"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"z"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Time Zone"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}))))),Object(c.b)("h2",{id:"benchmarks"},"Benchmarks"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{}),"complex_msg AST length 2053\nnormal_msg AST length 410\nsimple_msg AST length 79\nstring_msg AST length 36\ncomplex_msg x 3,926 ops/sec \xb12.37% (90 runs sampled)\nnormal_msg x 27,641 ops/sec \xb13.93% (86 runs sampled)\nsimple_msg x 100,764 ops/sec \xb15.35% (79 runs sampled)\nstring_msg x 120,362 ops/sec \xb17.11% (74 runs sampled)\n")))}p.isMDXComponent=!0}.call(this,r(52))},134:function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return d}));var n=r(0),a=r.n(n);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var i=a.a.createContext({}),s=function(e){var t=a.a.useContext(i),r=t;return e&&(r="function"==typeof e?e(t):u({},t,{},e)),r},p=function(e){var t=s(e.components);return a.a.createElement(i.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},f=Object(n.forwardRef)((function(e,t){var r=e.components,n=e.mdxType,c=e.originalType,o=e.parentName,i=l(e,["components","mdxType","originalType","parentName"]),p=s(r),f=n,d=p["".concat(o,".").concat(f)]||p[f]||b[f]||c;return r?a.a.createElement(d,u({ref:t},i,{components:r})):a.a.createElement(d,u({ref:t},i))}));function d(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var c=r.length,o=new Array(c);o[0]=f;var u={};for(var l in t)hasOwnProperty.call(t,l)&&(u[l]=t[l]);u.originalType=e,u.mdxType="string"==typeof e?e:n,o[1]=u;for(var i=2;i<c;i++)o[i]=r[i];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,r)}f.displayName="MDXCreateElement"},136:function(e,t,r){"use strict";var n,a;function c(e){return e.type===n.literal}function o(e){return e.type===n.argument}function u(e){return e.type===n.number}function l(e){return e.type===n.date}function i(e){return e.type===n.time}function s(e){return e.type===n.select}function p(e){return e.type===n.plural}function b(e){return e.type===n.pound}function f(e){return e.type===n.tag}function d(e){return!(!e||"object"!=typeof e||0!==e.type)}function m(e){return!(!e||"object"!=typeof e||1!==e.type)}r.d(t,"a",(function(){return n})),r.d(t,"e",(function(){return c})),r.d(t,"b",(function(){return o})),r.d(t,"f",(function(){return u})),r.d(t,"c",(function(){return l})),r.d(t,"l",(function(){return i})),r.d(t,"j",(function(){return s})),r.d(t,"h",(function(){return p})),r.d(t,"i",(function(){return b})),r.d(t,"k",(function(){return f})),r.d(t,"g",(function(){return d})),r.d(t,"d",(function(){return m})),function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"}(n||(n={})),function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"}(a||(a={}))},143:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n,a=r(136),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},u=function(e){function t(r,n,a,c){var o=e.call(this)||this;return o.message=r,o.expected=n,o.found=a,o.location=c,o.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(o,t),o}return c(t,e),t.buildMessage=function(e,t){function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function c(e){switch(e.type){case"literal":return'"'+n(e.text)+'"';case"class":var t=e.parts.map((function(e){return Array.isArray(e)?a(e[0])+"-"+a(e[1]):a(e)}));return"["+(e.inverted?"^":"")+t+"]";case"any":return"any character";case"end":return"end of input";case"other":return e.description}}return"Expected "+function(e){var t,r,n=e.map(c);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+(((o=t)?'"'+n(o)+'"':"end of input")+" found.");var o},t}(Error);var l=function(e,t){t=void 0!==t?t:{};var r,n={},c={start:Ee},l=Ee,i=Ae("#",!1),s=xe("tagElement"),p=Ae("<",!1),b=Ae("/>",!1),f=Ae(">",!1),d=function(e){return Qe.pop(),!0},m=Ae("</",!1),h=xe("argumentElement"),g=Ae("{",!1),O=Ae("}",!1),j=xe("numberSkeletonId"),v=/^['\/{}]/,y=Ne(["'","/","{","}"],!1,!1),A={type:"any"},N=xe("numberSkeletonTokenOption"),x=Ae("/",!1),C=xe("numberSkeletonToken"),w=Ae("::",!1),T=function(e){return Qe.pop(),e.replace(/\s*$/,"")},k=Ae(",",!1),E=Ae("number",!1),S=function(e,t,r){return o({type:"number"===t?a.a.number:"date"===t?a.a.date:a.a.time,style:r&&r[2],value:e},et())},F=Ae("'",!1),P=/^[^']/,M=Ne(["'"],!0,!1),_=/^[^a-zA-Z'{}]/,D=Ne([["a","z"],["A","Z"],"'","{","}"],!0,!1),I=/^[a-zA-Z]/,z=Ne([["a","z"],["A","Z"]],!1,!1),B=Ae("date",!1),U=Ae("time",!1),H=Ae("plural",!1),J=Ae("selectordinal",!1),R=Ae("offset:",!1),Z=Ae("select",!1),L=Ae("=",!1),X=xe("whitespace"),G=/^[\t-\r \x85\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,$=Ne([["\t","\r"]," ","\x85","\xa0","\u1680",["\u2000","\u200a"],"\u2028","\u2029","\u202f","\u205f","\u3000"],!1,!1),K=xe("syntax pattern"),V=/^[!-\/:-@[-\^`{-~\xA1-\xA7\xA9\xAB\xAC\xAE\xB0\xB1\xB6\xBB\xBF\xD7\xF7\u2010-\u2027\u2030-\u203E\u2041-\u2053\u2055-\u205E\u2190-\u245F\u2500-\u2775\u2794-\u2BFF\u2E00-\u2E7F\u3001-\u3003\u3008-\u3020\u3030\uFD3E\uFD3F\uFE45\uFE46]/,q=Ne([["!","/"],[":","@"],["[","^"],"`",["{","~"],["\xa1","\xa7"],"\xa9","\xab","\xac","\xae","\xb0","\xb1","\xb6","\xbb","\xbf","\xd7","\xf7",["\u2010","\u2027"],["\u2030","\u203e"],["\u2041","\u2053"],["\u2055","\u205e"],["\u2190","\u245f"],["\u2500","\u2775"],["\u2794","\u2bff"],["\u2e00","\u2e7f"],["\u3001","\u3003"],["\u3008","\u3020"],"\u3030","\ufd3e","\ufd3f","\ufe45","\ufe46"],!1,!1),Q=xe("optional whitespace"),W=xe("number"),Y=Ae("-",!1),ee=(xe("apostrophe"),xe("double apostrophes")),te=Ae("''",!1),re=Ae("\n",!1),ne=xe("argNameOrNumber"),ae=xe("validTag"),ce=xe("argNumber"),oe=Ae("0",!1),ue=/^[1-9]/,le=Ne([["1","9"]],!1,!1),ie=/^[0-9]/,se=Ne([["0","9"]],!1,!1),pe=xe("argName"),be=xe("tagName"),fe=0,de=0,me=[{line:1,column:1}],he=0,ge=[],Oe=0;if(void 0!==t.startRule){if(!(t.startRule in c))throw new Error("Can't start parsing from rule \""+t.startRule+'".');l=c[t.startRule]}function je(){return e.substring(de,fe)}function ve(){return we(de,fe)}function ye(e,t){throw function(e,t){return new u(e,[],"",t)}(e,t=void 0!==t?t:we(de,fe))}function Ae(e,t){return{type:"literal",text:e,ignoreCase:t}}function Ne(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function xe(e){return{type:"other",description:e}}function Ce(t){var r,n=me[t];if(n)return n;for(r=t-1;!me[r];)r--;for(n={line:(n=me[r]).line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return me[t]=n,n}function we(e,t){var r=Ce(e),n=Ce(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function Te(e){fe<he||(fe>he&&(he=fe,ge=[]),ge.push(e))}function ke(e,t,r){return new u(u.buildMessage(e,t),e,t,r)}function Ee(){return Se()}function Se(){var e,t;for(e=[],t=Fe();t!==n;)e.push(t),t=Fe();return e}function Fe(){var t;return(t=function(){var e,t;e=fe,(t=Pe())!==n&&(de=e,r=t,t=o({type:a.a.literal,value:r},et()));var r;return e=t}())===n&&(t=function(){var t,r,c,u;Oe++,t=fe,123===e.charCodeAt(fe)?(r="{",fe++):(r=n,0===Oe&&Te(g));r!==n&&Re()!==n&&(c=$e())!==n&&Re()!==n?(125===e.charCodeAt(fe)?(u="}",fe++):(u=n,0===Oe&&Te(O)),u!==n?(de=t,l=c,r=o({type:a.a.argument,value:l},et()),t=r):(fe=t,t=n)):(fe=t,t=n);var l;Oe--,t===n&&(r=n,0===Oe&&Te(h));return t}())===n&&(t=function(){var t;(t=function(){var t,r,a,c,u,l,i,s,p;t=fe,123===e.charCodeAt(fe)?(r="{",fe++):(r=n,0===Oe&&Te(g));r!==n&&Re()!==n&&(a=$e())!==n&&Re()!==n?(44===e.charCodeAt(fe)?(c=",",fe++):(c=n,0===Oe&&Te(k)),c!==n&&Re()!==n?("number"===e.substr(fe,6)?(u="number",fe+=6):(u=n,0===Oe&&Te(E)),u!==n&&Re()!==n?(l=fe,44===e.charCodeAt(fe)?(i=",",fe++):(i=n,0===Oe&&Te(k)),i!==n&&(s=Re())!==n&&(p=function(){var t,r,a;t=fe,"::"===e.substr(fe,2)?(r="::",fe+=2):(r=n,0===Oe&&Te(w));r!==n&&(a=function(){var e,t,r;if(e=fe,t=[],(r=De())!==n)for(;r!==n;)t.push(r),r=De();else t=n;t!==n&&(de=e,t=o({type:0,tokens:t},et()));return e=t}())!==n?(de=t,t=r=a):(fe=t,t=n);t===n&&(t=fe,de=fe,Qe.push("numberArgStyle"),(r=(r=!0)?void 0:n)!==n&&(a=Pe())!==n?(de=t,r=T(a),t=r):(fe=t,t=n));return t}())!==n?l=i=[i,s,p]:(fe=l,l=n),l===n&&(l=null),l!==n&&(i=Re())!==n?(125===e.charCodeAt(fe)?(s="}",fe++):(s=n,0===Oe&&Te(O)),s!==n?(de=t,r=S(a,u,l),t=r):(fe=t,t=n)):(fe=t,t=n)):(fe=t,t=n)):(fe=t,t=n)):(fe=t,t=n);return t}())===n&&(t=function(){var t,r,a,c,u,l,i,s,p;t=fe,123===e.charCodeAt(fe)?(r="{",fe++):(r=n,0===Oe&&Te(g));r!==n&&Re()!==n&&(a=$e())!==n&&Re()!==n?(44===e.charCodeAt(fe)?(c=",",fe++):(c=n,0===Oe&&Te(k)),c!==n&&Re()!==n?("date"===e.substr(fe,4)?(u="date",fe+=4):(u=n,0===Oe&&Te(B)),u===n&&("time"===e.substr(fe,4)?(u="time",fe+=4):(u=n,0===Oe&&Te(U))),u!==n&&Re()!==n?(l=fe,44===e.charCodeAt(fe)?(i=",",fe++):(i=n,0===Oe&&Te(k)),i!==n&&(s=Re())!==n&&(p=function(){var t,r,a;t=fe,"::"===e.substr(fe,2)?(r="::",fe+=2):(r=n,0===Oe&&Te(w));r!==n&&(a=function(){var t,r,a,c;t=fe,r=fe,a=[],(c=Ie())===n&&(c=ze());if(c!==n)for(;c!==n;)a.push(c),(c=Ie())===n&&(c=ze());else a=n;r=a!==n?e.substring(r,fe):a;r!==n&&(de=t,r=o({type:1,pattern:r},et()));return t=r}())!==n?(de=t,t=r=a):(fe=t,t=n);t===n&&(t=fe,de=fe,Qe.push("dateOrTimeArgStyle"),(r=(r=!0)?void 0:n)!==n&&(a=Pe())!==n?(de=t,r=T(a),t=r):(fe=t,t=n));return t}())!==n?l=i=[i,s,p]:(fe=l,l=n),l===n&&(l=null),l!==n&&(i=Re())!==n?(125===e.charCodeAt(fe)?(s="}",fe++):(s=n,0===Oe&&Te(O)),s!==n?(de=t,r=S(a,u,l),t=r):(fe=t,t=n)):(fe=t,t=n)):(fe=t,t=n)):(fe=t,t=n)):(fe=t,t=n);return t}());return t}())===n&&(t=function(){var t,r,c,u,l,i,s,p,b,f,d;t=fe,123===e.charCodeAt(fe)?(r="{",fe++):(r=n,0===Oe&&Te(g));if(r!==n)if(Re()!==n)if((c=$e())!==n)if(Re()!==n)if(44===e.charCodeAt(fe)?(u=",",fe++):(u=n,0===Oe&&Te(k)),u!==n)if(Re()!==n)if("plural"===e.substr(fe,6)?(l="plural",fe+=6):(l=n,0===Oe&&Te(H)),l===n&&("selectordinal"===e.substr(fe,13)?(l="selectordinal",fe+=13):(l=n,0===Oe&&Te(J))),l!==n)if(Re()!==n)if(44===e.charCodeAt(fe)?(i=",",fe++):(i=n,0===Oe&&Te(k)),i!==n)if(Re()!==n)if(s=fe,"offset:"===e.substr(fe,7)?(p="offset:",fe+=7):(p=n,0===Oe&&Te(R)),p!==n&&(b=Re())!==n&&(f=Ze())!==n?s=p=[p,b,f]:(fe=s,s=n),s===n&&(s=null),s!==n)if((p=Re())!==n){if(b=[],(f=Ue())!==n)for(;f!==n;)b.push(f),f=Ue();else b=n;b!==n&&(f=Re())!==n?(125===e.charCodeAt(fe)?(d="}",fe++):(d=n,0===Oe&&Te(O)),d!==n?(de=t,r=function(e,t,r,n){return o({type:a.a.plural,pluralType:"plural"===t?"cardinal":"ordinal",value:e,offset:r?r[2]:0,options:n.reduce((function(e,t){var r=t.id,n=t.value,a=t.location;return r in e&&ye('Duplicate option "'+r+'" in plural element: "'+je()+'"',ve()),e[r]={value:n,location:a},e}),{})},et())}(c,l,s,b),t=r):(fe=t,t=n)):(fe=t,t=n)}else fe=t,t=n;else fe=t,t=n;else fe=t,t=n;else fe=t,t=n;else fe=t,t=n;else fe=t,t=n;else fe=t,t=n;else fe=t,t=n;else fe=t,t=n;else fe=t,t=n;else fe=t,t=n;else fe=t,t=n;return t}())===n&&(t=function(){var t,r,c,u,l,i,s,p,b;t=fe,123===e.charCodeAt(fe)?(r="{",fe++):(r=n,0===Oe&&Te(g));if(r!==n)if(Re()!==n)if((c=$e())!==n)if(Re()!==n)if(44===e.charCodeAt(fe)?(u=",",fe++):(u=n,0===Oe&&Te(k)),u!==n)if(Re()!==n)if("select"===e.substr(fe,6)?(l="select",fe+=6):(l=n,0===Oe&&Te(Z)),l!==n)if(Re()!==n)if(44===e.charCodeAt(fe)?(i=",",fe++):(i=n,0===Oe&&Te(k)),i!==n)if(Re()!==n){if(s=[],(p=Be())!==n)for(;p!==n;)s.push(p),p=Be();else s=n;s!==n&&(p=Re())!==n?(125===e.charCodeAt(fe)?(b="}",fe++):(b=n,0===Oe&&Te(O)),b!==n?(de=t,r=function(e,t){return o({type:a.a.select,value:e,options:t.reduce((function(e,t){var r=t.id,n=t.value,a=t.location;return r in e&&ye('Duplicate option "'+r+'" in select element: "'+je()+'"',ve()),e[r]={value:n,location:a},e}),{})},et())}(c,s),t=r):(fe=t,t=n)):(fe=t,t=n)}else fe=t,t=n;else fe=t,t=n;else fe=t,t=n;else fe=t,t=n;else fe=t,t=n;else fe=t,t=n;else fe=t,t=n;else fe=t,t=n;else fe=t,t=n;else fe=t,t=n;return t}())===n&&(t=function(){var t,r,c,u,l,i;Oe++,t=fe,r=fe,60===e.charCodeAt(fe)?(c="<",fe++):(c=n,0===Oe&&Te(p));c!==n&&(u=Ke())!==n&&(l=Re())!==n?("/>"===e.substr(fe,2)?(i="/>",fe+=2):(i=n,0===Oe&&Te(b)),i!==n?r=c=[c,u,l,i]:(fe=r,r=n)):(fe=r,r=n);r!==n&&(de=t,h=r,r=o({type:a.a.literal,value:h.join("")},et()));var h;(t=r)===n&&(t=fe,(r=function(){var t,r,a,c;t=fe,60===e.charCodeAt(fe)?(r="<",fe++):(r=n,0===Oe&&Te(p));r!==n?(de=fe,Qe.push("openingTag"),(!0?void 0:n)!==n&&(a=Ke())!==n?(62===e.charCodeAt(fe)?(c=">",fe++):(c=n,0===Oe&&Te(f)),c!==n?(de=fe,(d()?void 0:n)!==n?(de=t,t=r=a):(fe=t,t=n)):(fe=t,t=n)):(fe=t,t=n)):(fe=t,t=n);return t}())!==n&&(c=Se())!==n&&(u=function(){var t,r,a,c;t=fe,"</"===e.substr(fe,2)?(r="</",fe+=2):(r=n,0===Oe&&Te(m));r!==n?(de=fe,Qe.push("closingTag"),(!0?void 0:n)!==n&&(a=Ke())!==n?(62===e.charCodeAt(fe)?(c=">",fe++):(c=n,0===Oe&&Te(f)),c!==n?(de=fe,(d()?void 0:n)!==n?(de=t,t=r=a):(fe=t,t=n)):(fe=t,t=n)):(fe=t,t=n)):(fe=t,t=n);return t}())!==n?(de=t,O=c,(g=r)!==(j=u)&&ye('Mismatch tag "'+g+'" !== "'+j+'"',ve()),r=o({type:a.a.tag,value:g,children:O},et()),t=r):(fe=t,t=n));var g,O,j;Oe--,t===n&&(r=n,0===Oe&&Te(s));return t}())===n&&(t=function(){var t,r;t=fe,35===e.charCodeAt(fe)?(r="#",fe++):(r=n,0===Oe&&Te(i));r!==n&&(de=t,r=o({type:a.a.pound},et()));return t=r}()),t}function Pe(){var e,t,r;if(e=fe,t=[],(r=Le())===n&&(r=Xe())===n&&(r=Ge()),r!==n)for(;r!==n;)t.push(r),(r=Le())===n&&(r=Xe())===n&&(r=Ge());else t=n;return t!==n&&(de=e,t=t.join("")),e=t}function Me(){var t,r,a,c,o;if(Oe++,t=fe,r=[],a=fe,c=fe,Oe++,(o=He())===n&&(v.test(e.charAt(fe))?(o=e.charAt(fe),fe++):(o=n,0===Oe&&Te(y))),Oe--,o===n?c=void 0:(fe=c,c=n),c!==n?(e.length>fe?(o=e.charAt(fe),fe++):(o=n,0===Oe&&Te(A)),o!==n?a=c=[c,o]:(fe=a,a=n)):(fe=a,a=n),a!==n)for(;a!==n;)r.push(a),a=fe,c=fe,Oe++,(o=He())===n&&(v.test(e.charAt(fe))?(o=e.charAt(fe),fe++):(o=n,0===Oe&&Te(y))),Oe--,o===n?c=void 0:(fe=c,c=n),c!==n?(e.length>fe?(o=e.charAt(fe),fe++):(o=n,0===Oe&&Te(A)),o!==n?a=c=[c,o]:(fe=a,a=n)):(fe=a,a=n);else r=n;return t=r!==n?e.substring(t,fe):r,Oe--,t===n&&(r=n,0===Oe&&Te(j)),t}function _e(){var t,r,a;return Oe++,t=fe,47===e.charCodeAt(fe)?(r="/",fe++):(r=n,0===Oe&&Te(x)),r!==n&&(a=Me())!==n?(de=t,t=r=a):(fe=t,t=n),Oe--,t===n&&(r=n,0===Oe&&Te(N)),t}function De(){var e,t,r,a;if(Oe++,e=fe,Re()!==n)if((t=Me())!==n){for(r=[],a=_e();a!==n;)r.push(a),a=_e();r!==n?(de=e,e=function(e,t){return{stem:e,options:t}}(t,r)):(fe=e,e=n)}else fe=e,e=n;else fe=e,e=n;return Oe--,e===n&&(n,0===Oe&&Te(C)),e}function Ie(){var t,r,a,c;if(t=fe,39===e.charCodeAt(fe)?(r="'",fe++):(r=n,0===Oe&&Te(F)),r!==n){if(a=[],(c=Le())===n&&(P.test(e.charAt(fe))?(c=e.charAt(fe),fe++):(c=n,0===Oe&&Te(M))),c!==n)for(;c!==n;)a.push(c),(c=Le())===n&&(P.test(e.charAt(fe))?(c=e.charAt(fe),fe++):(c=n,0===Oe&&Te(M)));else a=n;a!==n?(39===e.charCodeAt(fe)?(c="'",fe++):(c=n,0===Oe&&Te(F)),c!==n?t=r=[r,a,c]:(fe=t,t=n)):(fe=t,t=n)}else fe=t,t=n;if(t===n)if(t=[],(r=Le())===n&&(_.test(e.charAt(fe))?(r=e.charAt(fe),fe++):(r=n,0===Oe&&Te(D))),r!==n)for(;r!==n;)t.push(r),(r=Le())===n&&(_.test(e.charAt(fe))?(r=e.charAt(fe),fe++):(r=n,0===Oe&&Te(D)));else t=n;return t}function ze(){var t,r;if(t=[],I.test(e.charAt(fe))?(r=e.charAt(fe),fe++):(r=n,0===Oe&&Te(z)),r!==n)for(;r!==n;)t.push(r),I.test(e.charAt(fe))?(r=e.charAt(fe),fe++):(r=n,0===Oe&&Te(z));else t=n;return t}function Be(){var t,r,a,c,u,l,i;return t=fe,Re()!==n&&(r=qe())!==n&&Re()!==n?(123===e.charCodeAt(fe)?(a="{",fe++):(a=n,0===Oe&&Te(g)),a!==n?(de=fe,Qe.push("select"),(!0?void 0:n)!==n&&(c=Se())!==n?(125===e.charCodeAt(fe)?(u="}",fe++):(u=n,0===Oe&&Te(O)),u!==n?(de=t,l=r,i=c,Qe.pop(),t=o({id:l,value:i},et())):(fe=t,t=n)):(fe=t,t=n)):(fe=t,t=n)):(fe=t,t=n),t}function Ue(){var t,r,a,c,u,l,i;return t=fe,Re()!==n&&(r=function(){var t,r,a,c;return t=fe,r=fe,61===e.charCodeAt(fe)?(a="=",fe++):(a=n,0===Oe&&Te(L)),a!==n&&(c=Ze())!==n?r=a=[a,c]:(fe=r,r=n),(t=r!==n?e.substring(t,fe):r)===n&&(t=qe()),t}())!==n&&Re()!==n?(123===e.charCodeAt(fe)?(a="{",fe++):(a=n,0===Oe&&Te(g)),a!==n?(de=fe,Qe.push("plural"),(!0?void 0:n)!==n&&(c=Se())!==n?(125===e.charCodeAt(fe)?(u="}",fe++):(u=n,0===Oe&&Te(O)),u!==n?(de=t,l=r,i=c,Qe.pop(),t=o({id:l,value:i},et())):(fe=t,t=n)):(fe=t,t=n)):(fe=t,t=n)):(fe=t,t=n),t}function He(){var t;return Oe++,G.test(e.charAt(fe))?(t=e.charAt(fe),fe++):(t=n,0===Oe&&Te($)),Oe--,t===n&&(n,0===Oe&&Te(X)),t}function Je(){var t;return Oe++,V.test(e.charAt(fe))?(t=e.charAt(fe),fe++):(t=n,0===Oe&&Te(q)),Oe--,t===n&&(n,0===Oe&&Te(K)),t}function Re(){var t,r,a;for(Oe++,t=fe,r=[],a=He();a!==n;)r.push(a),a=He();return t=r!==n?e.substring(t,fe):r,Oe--,t===n&&(r=n,0===Oe&&Te(Q)),t}function Ze(){var t,r,a,c,o;return Oe++,t=fe,45===e.charCodeAt(fe)?(r="-",fe++):(r=n,0===Oe&&Te(Y)),r===n&&(r=null),r!==n&&(a=Ve())!==n?(de=t,c=r,t=r=(o=a)?c?-o:o:0):(fe=t,t=n),Oe--,t===n&&(r=n,0===Oe&&Te(W)),t}function Le(){var t,r;return Oe++,t=fe,"''"===e.substr(fe,2)?(r="''",fe+=2):(r=n,0===Oe&&Te(te)),r!==n&&(de=t,r="'"),Oe--,(t=r)===n&&(r=n,0===Oe&&Te(ee)),t}function Xe(){var t,r,a,c,o,u;if(t=fe,39===e.charCodeAt(fe)?(r="'",fe++):(r=n,0===Oe&&Te(F)),r!==n)if((a=function(){var t,r,a,c;t=fe,r=fe,e.length>fe?(a=e.charAt(fe),fe++):(a=n,0===Oe&&Te(A));a!==n?(de=fe,(c=(c="<"===(o=a)||">"===o||"{"===o||"}"===o||Ye()&&"#"===o)?void 0:n)!==n?r=a=[a,c]:(fe=r,r=n)):(fe=r,r=n);var o;t=r!==n?e.substring(t,fe):r;return t}())!==n){for(c=fe,o=[],"''"===e.substr(fe,2)?(u="''",fe+=2):(u=n,0===Oe&&Te(te)),u===n&&(P.test(e.charAt(fe))?(u=e.charAt(fe),fe++):(u=n,0===Oe&&Te(M)));u!==n;)o.push(u),"''"===e.substr(fe,2)?(u="''",fe+=2):(u=n,0===Oe&&Te(te)),u===n&&(P.test(e.charAt(fe))?(u=e.charAt(fe),fe++):(u=n,0===Oe&&Te(M)));(c=o!==n?e.substring(c,fe):o)!==n?(39===e.charCodeAt(fe)?(o="'",fe++):(o=n,0===Oe&&Te(F)),o===n&&(o=null),o!==n?(de=t,t=r=a+c.replace("''","'")):(fe=t,t=n)):(fe=t,t=n)}else fe=t,t=n;else fe=t,t=n;return t}function Ge(){var t,r,a,c,o;return t=fe,r=fe,e.length>fe?(a=e.charAt(fe),fe++):(a=n,0===Oe&&Te(A)),a!==n?(de=fe,(c=(c=!("<"===(o=a)||"{"===o||Ye()&&"#"===o||We()&&"}"===o||We()&&">"===o))?void 0:n)!==n?r=a=[a,c]:(fe=r,r=n)):(fe=r,r=n),r===n&&(10===e.charCodeAt(fe)?(r="\n",fe++):(r=n,0===Oe&&Te(re))),t=r!==n?e.substring(t,fe):r}function $e(){var t,r;return Oe++,t=fe,(r=Ve())===n&&(r=qe()),t=r!==n?e.substring(t,fe):r,Oe--,t===n&&(r=n,0===Oe&&Te(ne)),t}function Ke(){var t,r;return Oe++,t=fe,(r=Ve())===n&&(r=function(){var t,r,a,c,o;Oe++,t=fe,r=[],45===e.charCodeAt(fe)?(a="-",fe++):(a=n,0===Oe&&Te(Y));a===n&&(a=fe,c=fe,Oe++,(o=He())===n&&(o=Je()),Oe--,o===n?c=void 0:(fe=c,c=n),c!==n?(e.length>fe?(o=e.charAt(fe),fe++):(o=n,0===Oe&&Te(A)),o!==n?a=c=[c,o]:(fe=a,a=n)):(fe=a,a=n));if(a!==n)for(;a!==n;)r.push(a),45===e.charCodeAt(fe)?(a="-",fe++):(a=n,0===Oe&&Te(Y)),a===n&&(a=fe,c=fe,Oe++,(o=He())===n&&(o=Je()),Oe--,o===n?c=void 0:(fe=c,c=n),c!==n?(e.length>fe?(o=e.charAt(fe),fe++):(o=n,0===Oe&&Te(A)),o!==n?a=c=[c,o]:(fe=a,a=n)):(fe=a,a=n));else r=n;t=r!==n?e.substring(t,fe):r;Oe--,t===n&&(r=n,0===Oe&&Te(be));return t}()),t=r!==n?e.substring(t,fe):r,Oe--,t===n&&(r=n,0===Oe&&Te(ae)),t}function Ve(){var t,r,a,c,o;if(Oe++,t=fe,48===e.charCodeAt(fe)?(r="0",fe++):(r=n,0===Oe&&Te(oe)),r!==n&&(de=t,r=0),(t=r)===n){if(t=fe,r=fe,ue.test(e.charAt(fe))?(a=e.charAt(fe),fe++):(a=n,0===Oe&&Te(le)),a!==n){for(c=[],ie.test(e.charAt(fe))?(o=e.charAt(fe),fe++):(o=n,0===Oe&&Te(se));o!==n;)c.push(o),ie.test(e.charAt(fe))?(o=e.charAt(fe),fe++):(o=n,0===Oe&&Te(se));c!==n?r=a=[a,c]:(fe=r,r=n)}else fe=r,r=n;r!==n&&(de=t,r=parseInt(r.join(""),10)),t=r}return Oe--,t===n&&(r=n,0===Oe&&Te(ce)),t}function qe(){var t,r,a,c,o;if(Oe++,t=fe,r=[],a=fe,c=fe,Oe++,(o=He())===n&&(o=Je()),Oe--,o===n?c=void 0:(fe=c,c=n),c!==n?(e.length>fe?(o=e.charAt(fe),fe++):(o=n,0===Oe&&Te(A)),o!==n?a=c=[c,o]:(fe=a,a=n)):(fe=a,a=n),a!==n)for(;a!==n;)r.push(a),a=fe,c=fe,Oe++,(o=He())===n&&(o=Je()),Oe--,o===n?c=void 0:(fe=c,c=n),c!==n?(e.length>fe?(o=e.charAt(fe),fe++):(o=n,0===Oe&&Te(A)),o!==n?a=c=[c,o]:(fe=a,a=n)):(fe=a,a=n);else r=n;return t=r!==n?e.substring(t,fe):r,Oe--,t===n&&(r=n,0===Oe&&Te(pe)),t}var Qe=["root"];function We(){return Qe.length>1}function Ye(){return"plural"===Qe[Qe.length-1]}function et(){return t&&t.captureLocation?{location:ve()}:{}}if((r=l())!==n&&fe===e.length)return r;throw r!==n&&fe<e.length&&Te({type:"end"}),ke(ge,he<e.length?e.charAt(he):null,he<e.length?we(he,he+1):we(he,he))},i=(r(12),function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var c=arguments[t],o=0,u=c.length;o<u;o++,a++)n[a]=c[o];return n}),s=/(^|[^\\])#/g;function p(e,t){var r=l(e,t);return t&&!1===t.normalizeHashtagInPlural||function e(t){t.forEach((function(t){(Object(a.h)(t)||Object(a.j)(t))&&Object.keys(t.options).forEach((function(r){for(var n,c=t.options[r],o=-1,u=void 0,p=0;p<c.value.length;p++){var b=c.value[p];if(Object(a.e)(b)&&s.test(b.value)){o=p,u=b;break}}if(u){var f=u.value.replace(s,"$1{"+t.value+", number}"),d=l(f);(n=c.value).splice.apply(n,i([o,1],d))}e(c.value)}))}))}(r),r}}}]);