function e(e){return Array.from(new Set(e))}function t(e,t){let r=n();return r[e]??(r[e]=t)}function n(){var e;return globalThis._vike??(globalThis._vike={}),(e=globalThis._vike).globals??(e.globals={}),globalThis._vike.globals}var r=new Proxy({},{get:(e,t)=>e=>t===`code`?`\`${e}\``:t===`string`?`'${e}'`:e});const i=`0.4.250`;var a;a??=o();function o(){return t(`utils/assertSingleInstance.ts`,{instances:[],alreadyLogged:new Set})}function s(){return a??=o(),a}var c=`Client runtime of both Server Routing and Client Routing loaded https://vike.dev/client-runtimes-conflict`,l=`Client runtime loaded twice https://vike.dev/client-runtime-duplicated`;function u(){let t=s();{let n=e(t.instances);p(n.length<=1,`vike@${r.bold(n[0])} and vike@${r.bold(n[1])} loaded which is highly discouraged, see ${r.underline(`https://vike.dev/warning/version-mismatch`)}`,{onlyOnce:!0,showStackTrace:!1})}t.checkSingleInstance&&t.instances.length>1&&p(!1,l,{onlyOnce:!0,showStackTrace:!0})}function d(e){let t=s();p(t.isClientRouting!==!1,c,{onlyOnce:!0,showStackTrace:!0}),p(t.isClientRouting===void 0,l,{onlyOnce:!0,showStackTrace:!0}),t.isClientRouting=!0,e&&(t.checkSingleInstance=!0),u()}function f(){s().instances.push(i),u()}function p(e,t,{onlyOnce:n,showStackTrace:r}){let i=s();if(e)return;let a=`[Vike][Warning] ${t}`;if(n){let{alreadyLogged:e}=i,t=n===!0?a:n;if(e.has(t))return;e.add(t)}r?console.warn(Error(a)):console.warn(a)}function m(){return!(typeof process>`u`||!process.cwd||!process.versions||process.versions.node===void 0||!process.release||process.release.name!==`node`)}function ee(e,t){let n=Error(e);return m()&&(n.stack=te(n.stack,t)),n}function te(e,t){if(!e)return e;let n=re(e),r=0;return n.filter(e=>e.includes(` (internal/`)||e.includes(` (node:internal`)?!1:r<t&&ne(e)?(r++,!1):!0).join(`
`)}function ne(e){return e.startsWith(`    at `)}function re(e){return e.split(/\r?\n/)}function h(e){return r.bold(r.yellow(e))}function ie(e){return r.bold(r.red(e))}function ae(e){return r.yellow(e)}var g=t(`utils/assert.ts`,{alreadyLogged:new Set});f();var oe=`[vike]`,se=`[vike@${i}]`,ce=`Bug`;function _(e,t){if(e)return;let n=(()=>{if(!t)return null;let e=typeof t==`string`?t:JSON.stringify(t);return r.dim(`Debug for maintainers (you can ignore this): ${e}`)})(),i=[`You stumbled upon a Vike bug. Go to ${r.underline(`https://github.com/vikejs/vike/issues/new?template=bug.yml`)} and copy-paste this error. A maintainer will fix the bug (usually within 24 hours).`,n].filter(Boolean).join(` `);i=b(i,ce,!0);let a=x(i);throw g.onBeforeLog?.(),g.onBeforeErr?.(a),a}function v(e,t,{showStackTrace:n,exitOnError:r}={}){if(e)return;n||=g.alwaysShowStackTrace,t=b(t,`Wrong Usage`);let i=x(t);if(g.onBeforeLog?.(),g.onBeforeErr?.(i),r)console.error(n?i:t),process.exit(1);else throw i}function le(e){return e=b(e,`Error`),x(e)}function y(e,t,{onlyOnce:n,showStackTrace:r}){if(e)return;if(r||=g.alwaysShowStackTrace,n){let{alreadyLogged:e}=g,r=n===!0?t:n;if(e.has(r))return;e.add(r)}let i=b(t,`Warning`);if(g.onBeforeLog?.(),r){let e=x(i);g.onBeforeErr?.(e),console.warn(e)}else console.warn(i)}function ue(e,t,{onlyOnce:n}){if(!e){if(t=b(t,null),n){let{alreadyLogged:e}=g,n=t;if(e.has(n))return;e.add(n)}g.onBeforeLog?.(),console.log(t)}}function b(e,t,n=!1){let r=pe(n),i=fe(t),a=de(e);return g.addTagsDev?`${g.addTagsDev(r,i)}${a}${e}`:`${`${r}${i}`}${a}${e}`}function de(e){return e.startsWith(`[`)?``:` `}function fe(e){if(!e)return``;let t=`[${e}]`;return t=e===`Warning`?ae(t):ie(t),t}function pe(e=!1){return h(e?se:oe)}function x(e){let t=ee(e,3);return g.addTagsDev&&(t.stack=t.stack?.replace(/^Error:\s*/,``)),t}function me(e){let t=e/1e3;if(t<120){let e=he(t);return`${e} second${ge(e)}`}{let e=he(t/60);return`${e} minute${ge(e)}`}}function he(e){let t=e.toFixed(1);return t.endsWith(`.0`)&&(t=t.slice(0,-2)),t}function ge(e){return e===`1`?``:`s`}function S(e){return typeof e==`object`&&!!e}function C(e,t,n){return typeof e==`string`?_e(e.split(``),t,n).join(``):_e(e,t,n)}function _e(e,t,n){let r=[],i=t>=0?t:e.length+t;_(i>=0&&i<=e.length);let a=n>=0?n:e.length+n;for(_(a>=0&&a<=e.length);!(i===a||(i===e.length&&(i=0),i===a));){let t=e[i];_(t!==void 0),r.push(t),i++}return r}function ve(e,t){_(Pe(e),e),_(t.startsWith(`/`));let{hashString:n,withoutHash:r}=ye(e);_(n===null||n.startsWith(`#`));let i=n===null?``:xe(n.slice(1)),{searchString:a,withoutSearch:o}=be(r);_(a===null||a.startsWith(`?`));let s=``;if(a!==null)s=a;else if(e.startsWith(`#`)){let e=we();s=e&&be(e).searchString||``}let c={},l={};Array.from(new URLSearchParams(s)).forEach(([e,t])=>{c[e]=t,l[e]=[...l.hasOwnProperty(e)?l[e]:[],t]});let{protocol:u,origin:d,pathnameAbsoluteWithBase:f}=Ce(o,t),p=o.slice((d||``).length);Me(e,d,p,a,n);let{pathname:m,isBaseMissing:ee}=Ae(f,t),te=Ne(d,m,a,n),{hostname:ne,port:re}=Ee(d?d.slice(u.length):null,e);return m=Se(m),_(m.startsWith(`/`)),{href:te,protocol:u,hostname:ne,port:re,origin:d,pathname:m,pathnameOriginal:p,isBaseMissing:ee,search:c,searchAll:l,searchOriginal:a,hash:i,hashOriginal:n}}function ye(e){let[t,...n]=e.split(`#`);return{hashString:[``,...n].join(`#`)||null,withoutHash:t}}function be(e){let[t,...n]=e.split(`?`);return{searchString:[``,...n].join(`?`)||null,withoutSearch:t}}function xe(e){try{return decodeURIComponent(e)}catch{}try{return decodeURI(e)}catch{}return e}function Se(e){return e=e.replace(/\s+$/,``),e=e.split(`/`).map(e=>xe(e).split(`/`).join(`%2F`)).join(`/`),e}function Ce(e,t){_(!e.includes(`?`)&&!e.includes(`#`));{let{protocol:t,origin:n,pathname:r}=Te(e);if(n)return{protocol:t,origin:n,pathnameAbsoluteWithBase:r};_(r===e)}if(e.startsWith(`/`))return{protocol:null,origin:null,pathnameAbsoluteWithBase:e};{let n=we(),r;return r=n?Te(n.split(`?`)[0].split(`#`)[0]).pathname:t,{protocol:null,origin:null,pathnameAbsoluteWithBase:ke(e,r)}}}function we(){return typeof window<`u`?window?.document?.baseURI:void 0}function Te(e){if(ze(e)){let{protocol:t,uriWithoutProtocol:n}=De(e);_(t);let[r,...i]=n.split(`/`),a=t+r;return{pathname:`/`+i.join(`/`),origin:a,protocol:t}}else return{pathname:e,origin:null,protocol:null}}function Ee(e,t){let n={hostname:null,port:null};if(!e)return n;let r=e.split(`:`);if(r.length>1){let e=parseInt(r.pop(),10);_(e||e===0,t),n.port=e}return n.hostname=r.join(`:`),n}function De(e){let[t,...n]=e.split(`:`);if(n.length===0||!/^[a-z][a-z0-9\+\-]*$/i.test(t))return{protocol:null,uriWithoutProtocol:e};let r=t+`:`,i=n.join(`:`);return i.startsWith(`//`)&&(r+=`//`,i=i.slice(2)),{protocol:r,uriWithoutProtocol:i}}function Oe(e){return[`ipfs://`,`ipns://`].includes(e)?!1:e.endsWith(`://`)}function ke(e,t){let n=t.split(`/`),r=e.split(`/`),i=t.endsWith(`/`);for(let t in e.startsWith(`.`)&&n.pop(),r){let e=r[t];e==``&&t===`0`||e!=`.`&&(e==`..`?n.pop():(i=!1,n.push(e)))}let a=n.join(`/`);return i&&!a.endsWith(`/`)&&(a+=`/`),a.startsWith(`/`)||(a=`/`+a),a}function Ae(e,t){_(e.startsWith(`/`)),_(je(t));let n=e;if(_(n.startsWith(`/`)),_(t.startsWith(`/`)),t===`/`)return{pathname:e,isBaseMissing:!1};let r=t;return t.endsWith(`/`)&&n===C(t,0,-1)&&(r=C(t,0,-1),_(n===r)),n.startsWith(r)?(_(n.startsWith(`/`)||n.startsWith(`http`)),_(n.startsWith(r)),n=n.slice(r.length),n.startsWith(`/`)||(n=`/`+n),_(n.startsWith(`/`)),{pathname:n,isBaseMissing:!1}):{pathname:e,isBaseMissing:!0}}function je(e){return e.startsWith(`/`)}function Me(e,t,n,r,i){_(e===Ne(t,n,r,i))}function Ne(e,t,n,r){return`${e||``}${t}${n||``}${r||``}`}function Pe(e){return Fe(e)||Le(e)}function Fe(e){return Ie(e)||ze(e)}function Ie(e){return e.startsWith(`/`)}function Le(e){return[`.`,`?`,`#`].some(t=>e.startsWith(t))||e===``}function Re(e){return!e.startsWith(`/`)&&!Le(e)}function ze(e){let{protocol:t}=De(e);return!!t&&Oe(t)}function Be(e,t){v(Fe(e),Ve(e,t,!0))}function Ve(e,t,n,i){let a=`${t} is ${r.string(e)} but it should start with ${r.string(`/`)}`;return n&&(a+=` or a protocol (e.g. ${r.string(`http://`)})`),i&&(a+=`, or be ${r.string(`*`)}`),a}function w(e,t,n){t&&(n||_(!t._isOriginalObject),Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)))}function He(e,t,n){Object.keys(e).filter(e=>!n?.includes(e)).forEach(t=>delete e[t]),Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}function T(e){return e instanceof Function||typeof e==`function`}function Ue(e){return(t,n)=>{let r=e(t),i=e(n);return r===i?0:r>i?-1:1}}function We(e){return(t,n)=>{let r=e(t),i=e(n);return r===i?0:r<i?-1:1}}function E(e){return(t,n)=>{let r=e(t),i=e(n);if(_([!0,!1,null].includes(r)),_([!0,!1,null].includes(i)),r===i)return 0;if(r===!0||i===!1)return-1;if(i===!0||r===!1)return 1;_(!1)}}function Ge(e){return E(t=>{let n=e(t);return n===null?null:!n})}function D(){return typeof window<`u`&&typeof window.scrollY==`number`}function O(e){return Array.isArray(e)}function Ke(e){return O(e)&&e.every(e=>typeof e==`string`)}function qe(e){return S(e)&&Object.values(e).every(e=>typeof e==`string`)}function k(e,t,n){if(!S(e))return!1;if(!(t in e))return n===`undefined`;if(n===void 0)return!0;let r=e[t];return n===`undefined`?r===void 0:n===`array`?O(r):n===`object`?S(r):n===`string[]`?Ke(r):n===`string{}`?qe(r):n===`function`?T(r):O(n)?typeof r==`string`&&n.includes(r):n===`null`?r===null:n===`true`?r===!0:n===`false`?r===!1:typeof r===n}function A(e){return typeof e!=`object`||!e?!1:Object.getPrototypeOf(e)===null?!0:e.constructor.name===`Object`}function Je(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}function Ye(e){return e==null}function Xe(e){return!Ye(e)}function Ze(e){return`[`+e.map(e=>`'`+e+`'`).join(`, `)+`]`}function Qe(e,t){let n=Object.getOwnPropertyDescriptor(e,t);return!!n&&!(`value`in n)&&!!n.get}function $e(e){return typeof e==`object`&&!!e&&`then`in e&&T(e.then)}function et(e){return[null,void 0].includes(e)?String(e):[`boolean`,`number`,`string`].includes(typeof e)?JSON.stringify(e):null}function tt(e){return e.replace(/[/\-\\^$*+?.()|[\]{}]/g,`\\$&`)}function j(e,t,n){let r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(e,t,{...r,enumerable:n})}function M(e,t,{get:n,...r}){Object.defineProperty(e,t,{...r,get:n})}var nt=[`js`,`cjs`,`mjs`],rt=[`ts`,`cts`,`mts`],it=[...nt,...rt],at=[`jsx`,`cjsx`,`mjsx`],ot=[`tsx`,`ctsx`,`mtsx`],st=[...at,...ot],ct=[`vue`,`svelte`,`marko`,`md`,`mdx`],lt=[...it,...st,...ct];``+lt.join(`|`);function ut(e){return lt.some(t=>e.endsWith(`.`+t))}function dt(e){return ct.some(t=>e.endsWith(`.`+t))}function ft(e){return typeof e==`string`&&pt(e)?`.${e}`:`[${JSON.stringify(e)}]`}function pt(e){return/^[a-z0-9\$_]+$/i.test(e)}var mt=25*1e3;function ht({timeout:e=mt}={}){let t,n,r=!1,i=new Promise((e,i)=>{t=(...t)=>(r=!0,a(),e(...t)),n=(...e)=>(r=!0,a(),i(...e))}),a=()=>o.forEach(e=>clearTimeout(e)),o=[],s;return s=e?new Proxy(i,{get(t,n){if(n===`then`&&!r){let t=Error(`Promise hasn't resolved after ${me(e)}`);o.push(setTimeout(()=>{_(t.stack),y(!1,gt(t.stack),{onlyOnce:!1})},e))}let i=Reflect.get(t,n);return typeof i==`function`?i.bind(t):i}}):i,{promise:s,resolve:t,reject:n}}function gt(e){return e.startsWith(`Error: `)&&(e=e.slice(7)),e}function _t(e,t){let n=t.find(t=>t.pageId===e);return _(t.length>0),_(n),n}function vt(e){if(!e||O(e)||e.definedBy)return null;let{filePathToShowToUser:t}=e;return _(t),t}function yt(e){let t=vt(e);return _(t),t}function bt(e,t){if(!e)return null;let[n,...r]=e;if(!n||r.length===0&&[`*`,`default`,t].includes(n))return null;_(n!==`*`);let i=``,a=``;return n===`default`?i=`export default`:(i=`export`,r=[n,...r]),r.forEach(e=>{i=`${i} { ${e}`,a=` }${a}`}),i+a}function xt(e,t,n){return`${Ct(e,t)} at ${N(n,t)}`}function St(e,t,n){return n?`${Ct(e,t)} at ${N(n,t)}`:`${Ct(e,t)} internally`}function Ct(e,t){return`${e} ${r.cyan(t)} defined`}function N(e,t){let n;return n=O(e)?e:[e],_(n.length>=1),n.map(e=>{if(e.definedBy)return wt(e,t);let{filePathToShowToUser:n,fileExportPathToShowToUser:i}=e,a=bt(i,t);return a?`${n} > ${r.cyan(a)}`:n}).join(` / `)}function wt(e,t){if(e.definedBy===`api`)return`API call ${r.cyan(`${e.operation}({ vikeConfig: { ${t} } })`)}`;let{definedBy:n}=e;if(n===`cli`)return`CLI option ${r.cyan(`--${t}`)}`;if(n===`env`)return`environment variable ${r.cyan(`VIKE_CONFIG="{${t}}"`)}`;_(!1)}function Tt(e,t,n){let{value:r,definedAtData:i}=e;return n&&Et(r,n,t,i),e}function Et(e,t,n,i){_(e!==null);let a=typeof e;if(a===t)return;let o=et(e),s=o===null?`type ${r.cyan(a)}`:`value ${r.cyan(o)}`;v(!1,`${St(`Config`,n,i)} has an invalid ${s}: it should be a ${r.cyan(t)} instead`)}function P(e,t,n){let r=e.configValues[t];return r?Tt(r,t,n):null}var Dt=t(`hooks/getHook.ts`,{});function Ot(e,t){if(!(t in e.exports))return null;let{hooksTimeout:n}=e.config,r=Ft(n,t),i=e.exports[t];if(i===null)return null;let a=e.exportsAll[t][0];_(a.exportValue===i);let o=a.filePath;return _(o),F(i,t,o,r)}function kt(e,t){let{hooksTimeout:n}=t.config,r=Ft(n,e),i=[];return t.exportsAll[e]?.forEach(t=>{let n=t.exportValue;if(n===null)return;let a=t.filePath;_(a),i.push(F(n,e,a,r))}),i}function At(e,t){let n=e.configValues[t];if(!n?.value)return null;let{hookFn:r,hookFilePath:i}=Nt(n);return F(r,t,i,Mt(t))}function jt(e,t){let n=e.configValues[t];if(!n?.value)return[];let r=n.value;return _(O(r)),r.map((e,r)=>{let i=e,a=Mt(t);return _(O(n.definedAtData)),F(i,t,yt(n.definedAtData[r]),a)})}function Mt(e){return I(e)}function F(e,t,n,r){return _(n),Pt(e,{hookName:t,hookFilePath:n}),{hookFn:e,hookName:t,hookFilePath:n,hookTimeout:r}}function Nt(e){let t=e.value;return _(t),{hookFn:t,hookFilePath:yt(e.definedAtData)}}function Pt(e,{hookName:t,hookFilePath:n}){_(t&&n),_(!t.endsWith(`)`)),_(!n.endsWith(` `)),v(T(e),`Hook ${t}() defined by ${n} should be a function`)}function Ft(e,t){let n=It(e);if(n===!1)return{error:!1,warning:!1};let r=n[t],i=I(t);return r?.error!==void 0&&(i.error=r.error),r?.warning!==void 0&&(i.warning=r.warning),i}function It(e){if(e===void 0)return{};if(e===!1)return!1;v(S(e),`Setting ${r.cyan(`hooksTimeout`)} should be ${r.cyan(`false`)} or an object`);let t={};return Object.entries(e).forEach(([e,n])=>{if(n===!1){t[e]={error:!1,warning:!1};return}v(S(n),`Setting ${r.cyan(`hooksTimeout.${e}`)} should be ${r.cyan(`false`)} or an object`);let[i,a]=[`error`,`warning`].map(t=>{let i=n[t];if(i===void 0||i===!1)return i;let a=`Setting ${r.cyan(`hooksTimeout.${e}.${t}`)} should be`;return v(typeof i==`number`,`${a} ${r.cyan(`false`)} or a number`),v(i>0,`${a} a positive number`),i});t[e]={error:i,warning:a}}),t}function I(e){return e===`onBeforeRoute`?{error:5*1e3,warning:1*1e3}:Dt.isPrerendering?{error:120*1e3,warning:30*1e3}:(_(!e.toLowerCase().includes(`prerender`)),{error:30*1e3,warning:4*1e3})}function Lt(e){Rt(e)}function Rt(e){if(e.is404===void 0||e.is404===null)return;let t=e.pageProps||{};if(!S(t)){y(!1,`pageContext.pageProps should be an object`,{showStackTrace:!0,onlyOnce:!0});return}t.is404=t.is404||e.is404,e.pageProps=t}function zt(e,t,n,r){return new Proxy(e,{get:(i,a)=>Bt(a,e,t,n,r)})}function Bt(e,...t){let[n,r,i,a]=t,o=String(e);if(e===`_isProxyObject`)return!0;if(e===`dangerouslyUseInternals`)return t[2]=!0,zt(...t);if(e===`_originalObject`)return n;if(a&&!(e in n))return a(e);let s=n[e];return Vt(o,s,r),s}function Vt(e,t,n){if(t!==`__VIKE__NOT_SERIALIZABLE__`)return;let r=ft(e);_(D()),v(!1,`Can't access ${n}${r} on the client side. Because it can't be serialized, see server logs.`)}function Ht(e){return _(e._isOriginalObject),zt(e,`globalContext`)}function Ut(e){_(!e._isProxyObject),_(!e.globalContext),_(e._isOriginalObject),Lt(e),`_pageId`in e||Object.defineProperty(e,`_pageId`,{get(){return y(!1,`pageContext._pageId has been renamed to pageContext.pageId`,{showStackTrace:!0,onlyOnce:!0}),e.pageId},enumerable:!1}),Wt(e);let t=Ht(e._globalContext);return zt(e,`pageContext`,!0,e=>{if(e===`globalContext`)return t;if(e in t)return t[e]})}function Wt(e){let t=Object.getOwnPropertyDescriptors(e);for(let t of Object.keys(e))delete e[t];t=Object.fromEntries(Object.entries(t).sort(([e],[t])=>Je(e,t))),Object.defineProperties(e,t)}function Gt(e){[`urlPathname`,`urlParsed`,`url`,`pageExports`].forEach(t=>{e.prop&&_(Qe(e,t))})}var L=t(`utils/execHook.ts`,{userHookErrors:new WeakMap,pageContext:null});async function Kt(e,t,n){return await R(kt(e,t),t,n)}async function qt(e,t,n,r,i){let a=jt(t,e),o=i(r);await Promise.all(a.map(async e=>{await Xt(()=>e.hookFn(o),e,n)}))}async function R(e,t,n){if(!e.length)return[];let r=n(t);return await Promise.all(e.map(async e=>{let t=await Xt(()=>e.hookFn(r),e,r);return{...e,hookReturn:t}}))}async function Jt(e,t,n){let{hookReturn:r}=(await R([e],t,n))[0];v(r===void 0,`The ${e.hookName}() hook defined by ${e.hookFilePath} isn't allowed to return a value`)}function Yt(e){return S(e)?L.userHookErrors.get(e)??!1:!1}function Xt(e,t,n){let{hookName:r,hookFilePath:i,hookTimeout:{error:a,warning:o}}=t,s,c,l=new Promise((e,t)=>{s=t=>{u(),e(t)},c=e=>{u(),t(e)}}),u=()=>{d&&clearTimeout(d),f&&clearTimeout(f)},d=Qt(o)&&setTimeout(()=>{y(!1,`The ${r}() hook defined by ${i} is slow: it's taking more than ${me(o)} (https://vike.dev/hooksTimeout)`,{onlyOnce:!1})},o),f=Qt(a)&&setTimeout(()=>{let e=le(`The ${r}() hook defined by ${i} timed out: it didn't finish after ${me(a)} (https://vike.dev/hooksTimeout)`);c(e)},a);return(async()=>{try{en(n);let t=await e();s(t)}catch(e){S(e)&&L.userHookErrors.set(e,{hookName:r,hookFilePath:i}),c(e)}})(),l}function Zt(e,t,n){let r=n(t);return en(r),{hookReturn:e.hookFn(r)}}function Qt(e){return!!e&&e!==1/0}function $t(e){en(e)}function en(e){L.pageContext=e,Promise.resolve().then(()=>{L.pageContext=null})}function tn(){_(D())}var nn=t(`utils/assertRouterType.ts`,{});function z(){an(rn()),nn.isClientRouting=!0}function rn(){return nn.isClientRouting!==!1}function an(e){v(D(),`${r.cyan(`import { something } from 'vike/client/router'`)} is forbidden on the server-side`,{showStackTrace:!0}),y(e,"You shouldn't `import { something } from 'vike/client/router'` when using Server Routing. The 'vike/client/router' utilities work only with Client Routing. In particular, don't `import { navigate }` nor `import { prefetch }` as they unnecessarily bloat your client-side bundle sizes.",{showStackTrace:!0,onlyOnce:!0})}function on(){tn(),z()}function sn(){let e=!!window.__REACT_DEVTOOLS_GLOBAL_HOOK__?.renderers?.size,t=!!window.__REACT_DEVTOOLS_GLOBAL_HOOK__?.rendererInterfaces?.size,n=!!window.__vite_plugin_react_preamble_installed__;return e||t||n}function B(e){window.location.href=e}function cn(e){return new Promise(t=>setTimeout(t,e))}function ln(e,t){let n=!1;return()=>{n||(n=!0,setTimeout(()=>{n=!1,e()},t))}}function un(e){window.addEventListener(`visibilitychange`,()=>{document.visibilityState===`hidden`&&e()})}function dn(e){window.addEventListener(`visibilitychange`,()=>{document.visibilityState===`visible`&&e()})}function V(e,t){_(e===t)}var fn={};function pn(e,t=100,n=5){let r=new Date,i=fn[e]??(fn[e]=mn(r));r.getTime()-i.start.getTime()>n*1e3&&(i=fn[e]=mn(r)),i.count++;let a=`[Infinite Loop] Rendering ${i.count} times within ${n} seconds [${e}]`;i.count>t&&v(!1,a),!i.warned&&i.count>t*.5&&(y(!1,a,{onlyOnce:!1,showStackTrace:!0}),i.warned=!0)}function mn(e){return{count:0,start:e}}on();var hn=[H({is:e=>e===void 0,match:e=>e===`!undefined`,serialize:()=>`!undefined`,deserialize:()=>void 0}),H({is:e=>e===1/0,match:e=>e===`!Infinity`,serialize:()=>`!Infinity`,deserialize:()=>1/0}),H({is:e=>e===-1/0,match:e=>e===`!-Infinity`,serialize:()=>`!-Infinity`,deserialize:()=>-1/0}),H({is:e=>typeof e==`number`&&isNaN(e),match:e=>e===`!NaN`,serialize:()=>`!NaN`,deserialize:()=>NaN}),H({is:e=>e instanceof Date,match:e=>e.startsWith(`!Date:`),serialize:e=>`!Date:`+e.toISOString(),deserialize:e=>new Date(e.slice(6))}),H({is:e=>typeof e==`bigint`,match:e=>e.startsWith(`!BigInt:`),serialize:e=>`!BigInt:`+e.toString(),deserialize:e=>{if(typeof BigInt>`u`)throw Error(`Your JavaScript environement does not support BigInt. Consider adding a polyfill.`);return BigInt(e.slice(8))}}),H({is:e=>e instanceof RegExp,match:e=>e.startsWith(`!RegExp:`),serialize:e=>`!RegExp:`+e.toString(),deserialize:e=>{e=e.slice(8);let t=e.match(/\/(.*)\/(.*)?/),n=t[1],r=t[2];return new RegExp(n,r)}}),H({is:e=>e instanceof Map,match:e=>e.startsWith(`!Map:`),serialize:(e,t)=>`!Map:`+t(Array.from(e.entries())),deserialize:(e,t)=>new Map(t(e.slice(5)))}),H({is:e=>e instanceof Set,match:e=>e.startsWith(`!Set:`),serialize:(e,t)=>`!Set:`+t(Array.from(e.values())),deserialize:(e,t)=>new Set(t(e.slice(5)))}),H({is:e=>typeof e==`string`&&e.startsWith(`!`),match:e=>e.startsWith(`!`),serialize:e=>`!`+e,deserialize:e=>e.slice(1)})];function H(e){return e}function gn(e,t={}){return _n(JSON.parse(e),t)}function _n(e,t={}){return typeof e==`string`?vn(e,t):(typeof e==`object`&&e&&Object.entries(e).forEach(([n,r])=>{e[n]=_n(r,t)}),e)}function vn(e,t){let n=e=>gn(e,t);{let r=t.reviver?.(void 0,e,n);if(r){if(typeof r.replacement!=`string`)return r.replacement;if(e=r.replacement,r.resolved)return e}}for(let{match:t,deserialize:r}of hn)if(t(e))return r(e,n);return e}function yn(){let e=xn(`vike_pageContext`);return _(k(e,`pageId`,`string`)),_(k(e,`routeParams`,`string{}`)),e}function bn(){return xn(`vike_globalContext`)}function xn(e){let t=document.getElementById(e);v(t,`Couldn't find #${e} (which Vike automatically injects in the HTML): make sure it exists (i.e. don't remove it and make sure your HTML isn't malformed)`);let n=t.textContent;return _(n),gn(n,{reviver(e,t){if(typeof t==`string`)return{replacement:t.replaceAll(`\\/`,`/`),resolved:!1}}})}function Sn(e,t){return wn(e,t,!0)}function Cn(e,t){return wn(e,t,!1)}function wn(e,t,n){let r=n?`CLIENT_ONLY`:`SERVER_ONLY`,i=e.filter(e=>e.isRelevant(t)&&e.fileType!==`.page.route`).sort(Tn(n,t)),a=e=>{let n=i.filter(n=>n.pageId===t&&n.isEnv(e?`CLIENT_AND_SERVER`:r));v(n.length<=1,`Merge the following files into a single file: ${n.map(e=>e.filePath).join(` `)}`);let a=n[0];return _(a===void 0||!a.isDefaultPageFile),a},o=a(!1),s=a(!0),c=e=>i.filter(t=>t.isRendererPageFile&&t.isEnv(e?`CLIENT_AND_SERVER`:r))[0],l=c(!1),u=c(!0);return[o,s,...i.filter(e=>e.isDefaultPageFile&&!e.isRendererPageFile&&(e.isEnv(r)||e.isEnv(`CLIENT_AND_SERVER`))),l,u].filter(Xe)}function Tn(e,t){let n=e?`CLIENT_ONLY`:`SERVER_ONLY`;return(e,r)=>{if(!e.isDefaultPageFile&&r.isDefaultPageFile)return-1;if(!r.isDefaultPageFile&&e.isDefaultPageFile)return 1;{let t=e.isRendererPageFile,n=r.isRendererPageFile;if(!t&&n)return-1;if(!n&&t)return 1;_(t===n)}{let n=En(t,e.filePath),i=En(t,r.filePath);if(n<i)return-1;if(i<n)return 1;_(n===i)}return e.isEnv(n)&&r.isEnv(`CLIENT_AND_SERVER`)?-1:r.isEnv(n)&&e.isEnv(`CLIENT_AND_SERVER`)?1:0}}function En(e,t){let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);let r=e.slice(n),i=t.slice(n);return r.split(`/`).length+i.split(`/`).length}async function Dn(e,t){let n=Cn(e,t).filter(e=>e.fileType===`.page.server`);return await Promise.all(n.map(async e=>{e.exportNames||(_(e.loadExportNames,t),await e.loadExportNames())})),{hasOnBeforeRenderServerSideOnlyHook:n.some(({exportNames:e})=>(_(e),e.includes(`onBeforeRender`)))}}var On=[`urlPathname`,`urlParsed`],kn=[`Page`,`pageExports`,`exports`];function An(e){[...kn,...On].forEach(t=>{t in e&&(On.includes(t)?(_(t.startsWith(`url`)),y(!1,`pageContext.${t} is already available in the browser when using Client Routing; adding '${t}' to passToClient has no effect`,{onlyOnce:!0})):y(!1,`pageContext.${t} is a built-in that cannot be overridden; adding '${t}' to passToClient has no effect`,{onlyOnce:!0}),delete e[t])})}function jn(e,t,n){let{pathnameOriginal:r,searchOriginal:i,hashOriginal:a}=ve(e,`/`);e.startsWith(`/`)&&_(e===`${r}${i||``}${a||``}`,{url:e});let o=r.endsWith(`/`),s;return n&&r!==`/`?(s=o?C(r,0,-1):r,_(!s.endsWith(`/`),{url:e}),_(s!==``)):s=r+(o?``:`/`)+`index`,_(s),s+=t,`${s}${i||``}${a||``}`}var Mn=`.pageContext.json`;function Nn(e){return jn(e,Mn,!1)}function Pn(e,{hookName:t,hookFilePath:n}){if(e==null)return;_(!t.endsWith(`)`));let i=`The ${r.cyan(`pageContext`)} object provided by the ${t}() hook defined by ${n}`;v(S(e),`${i} should be an object (but it's ${r.cyan(`typeof pageContext === ${JSON.stringify(typeof e)}`)} instead)`),v(!(`isPageContext`in e),`${i} shouldn't be the whole ${r.cyan(`pageContext`)} object, see https://vike.dev/pageContext-manipulation#do-not-return-entire-pagecontext`),y(!(`pageId`in e),`${i} sets ${r.cyan(`pageContext.pageId`)} which means that Vike's routing is overridden. This is an experimental feature: make sure to contact a vike maintainer before using this.`,{onlyOnce:!0}),v(!(`is404`in e),`${i} sets ${r.cyan(`pageContext.is404`)} which is forbidden, use ${r.cyan(`throw render()`)} instead, see https://vike.dev/render`)}function Fn(e,t,n){_(!n.endsWith(` `));let r=[],i=Object.keys(e);for(let e of i)t.includes(e)||r.push(e);v(r.length===0,[n,`returned an object with following unknown keys:`,Ze(r)+`.`,`Only following keys are allowed:`,Ze(t)+`.`].join(` `))}function In(e,t){if(e==null)return;let n=`The onBeforeRender() hook defined by ${t}`;v(A(e),`${n} should return a plain JavaScript object, ${r.cyan(`undefined`)}, or ${r.cyan(`null`)}`),Fn(e,[`pageContext`],n),e.pageContext&&Pn(e.pageContext,{hookName:`onBeforeRender`,hookFilePath:t})}function Ln(e,t){if(!A(e))return!1;for(let n of Object.keys(e))if(!t.includes(n))return!1;return!0}function Rn(e,t,n=e=>e){if(_(e.length>0),e.length===1)return n(e[0]);let r=e.slice(0,e.length-1),i=e[e.length-1],a=e.length>2?`,`:``;return r.map(n).join(`, `)+`${a} ${t} `+n(i)}D()&&z();var zn=`The guard() hook defined by`;async function Bn(e,t){let n;e._globalContext._pageFilesAll.length>0?(_(e._globalContext._pageConfigs.length===0),n=Vn(e.pageId,e._globalContext._pageFilesAll)):n=Ot(e,`guard`),n&&await Jt(n,e,t)}function Vn(e,t){let n=t.find(t=>t.pageId===e&&t.fileType===`.page.route`);if(!n)return null;let{filePath:r,fileExports:i}=n;_(i);let a=i.guard;if(!a)return null;let o=r,s=I(`guard`);return v(T(a),`${zn} ${o} should be a function`),{hookFn:a,hookName:`guard`,hookFilePath:o,hookTimeout:s}}function Hn(e){let t=Error(`AbortRender`);return w(t,{_pageContextAbort:e,[Un]:!0}),t}var Un=`_isAbortError`;function Wn(e){return typeof e==`object`&&!!e&&Un in e}function Gn(e){return e._urlRewrite||e._urlRedirect||e.abortStatusCode?(_(k(e,`_abortCall`,`string`)),!0):!1}function Kn(e,t,n){if(t)return;let i=n._urlRewrite??n.urlOriginal;_(i);let a=e._pageContextAbort._abortCall;_(a);let o=Yt(e),s=``;o&&(s=` by ${r.cyan(`${o.hookName}()`)} hook defined at ${o.hookFilePath}`),ue(!1,`${r.cyan(a)} thrown${s} while rendering ${r.cyan(i)}`,{onlyOnce:!1})}function qn(e){let t=e.at(-1);if(!t)return null;let n=t._pageContextAbort;return _(n),n}function Jn(e,t,n){w(t,{_pageContextAbort:n}),e.push(t),Yn(e)}function Yn(t){if(t.length<10)return;let n=t.map(e=>e._pageContextAbort._abortCall);e(n).length!==n.length&&v(!1,`Infinite loop: ${n.join(` => `)}`)}function Xn(){tn()}Xn();function Zn(e){return w(e,{Page:e.config?.Page||e.exports?.Page}),Gt(e),$n(e),Qn(e)}function Qn(e){return Ut(e)}function $n(e){er(e)}function er(e){Object.entries(e).forEach(([t,n])=>{delete e[t],e[t]=n})}function U(e){return Zn(e)}var tr=t(`runtime-client-routing/getPageContextFromHooks.ts`,{}),nr=[`guard`,`data`,`onBeforeRender`];function rr(){let e=yn();return _r(e),w(e,{_hasPageContextFromServer:!0}),e}async function ir(e){for(let t of nr)mr(t,e)&&(t===`guard`?await yr(e):await cr(t,e));return e}async function ar(e,t){let n={_hasPageContextFromServer:!1};if(!t&&await fr(e)){let t=await gr(e);if(`is404ServerSideRouted`in t)return{is404ServerSideRouted:!0};let{pageContextFromServer:r}=t;n._hasPageContextFromServer=!0,_(!(`_isServerSideError`in r)),_(!(`serverSideError`in r)),w(n,r)}return{pageContextFromHooksServer:n}}async function or(e,t){let n=!1;for(let r of nr)if(!(!mr(r,e)&&e._hasPageContextFromServer))if(r===`guard`){if(t)continue;await yr(e)}else r===`data`&&(n=!0),await cr(r,e);let r=hr(`data`,e);return(n&&r.client||e._hasPageContextFromServer&&r.server)&&await sr(`onData`,e),e}async function sr(e,t){return await Kt(e,t,e=>U(e))}async function cr(e,t){let n;n=e===`data`?await lr(t):await ur(t),Object.assign(t,n)}async function lr(e){let t=(await sr(`data`,e))[0];if(!t)return;let{hookReturn:n}=t;return{data:n}}async function ur(e){let t=(await sr(`onBeforeRender`,e))[0];if(!t)return;let{hookReturn:n,hookFilePath:r}=t,i={};In(n,r);let a=n?.pageContext;return a&&w(i,a),i}function dr(e){e._pageContextInitIsPassedToClient&&(tr.pageContextInitIsPassedToClient=!0)}async function fr(e){if(vr(e)){let{hasOnBeforeRenderServerSideOnlyHook:t}=await Dn(e._pageFilesAll,e.pageId);return t}return!!tr.pageContextInitIsPassedToClient||pr(e)}function pr(e){if(vr(e))return!1;let t=P(_t(e.pageId,e._globalContext._pageConfigs),`hasServerOnlyHook`)?.value;return _(t===!0||t===!1),t}function mr(e,t){let n=hr(e,t);return!!n.client&&!n.server}function hr(e,t){return vr(t)?{client:!1,server:!0}:P(_t(t.pageId,t._globalContext._pageConfigs),`${e}Env`)?.value??{}}async function gr(e){let t=Nn(e._urlRewrite??e.urlOriginal),n=await fetch(t);{let r=n.headers.get(`content-type`),i=`application/json`,a=r&&r.includes(i);if(!a&&n.status===404)return B(e.urlOriginal),{is404ServerSideRouted:!0};v(a,`Wrong Content-Type for ${t}: it should be ${i} but it's ${r} instead. Make sure to properly use pageContext.httpResponse.headers, see https://vike.dev/renderPage`)}let r=gn(await n.text());if(_(S(r)),Gn(r))throw Hn(r);if(`serverSideError`in r||`_isServerSideError`in r)throw le(`pageContext couldn't be fetched because an error occurred on the server-side`);return _r(r),{pageContextFromServer:r}}function _r(e){v(!(`urlOriginal`in e),`Adding 'urlOriginal' to passToClient is forbidden`),_(k(e,`pageId`,`string`)),An(e)}function vr(e){return e._globalContext._pageConfigs.length===0}async function yr(e){await Bn(e,e=>U(e))}function br(e,t){return w(e,t),e}function xr(){let e={_isOriginalObject:!0,isPageContext:!0};return j(e,`_isOriginalObject`,!1),e}function Sr(e){_(typeof e.urlOriginal==`string`),Gt(e);let t={};return M(t,`urlPathname`,{get:wr,enumerable:!0,configurable:!0}),M(t,`url`,{get:Tr,enumerable:!1,configurable:!0}),M(t,`urlParsed`,{get:Er,enumerable:!0,configurable:!0}),t}function Cr(e){let t=e=>_(typeof n==`string`,{src:e,urlResolved:n}),n,r;e.urlLogical?(n=e.urlLogical,r=!1,t(1)):e._urlRewrite?(n=e._urlRewrite,r=!1,t(2)):(n=e.urlOriginal,r=!0,t(3)),t(4);let i=e._urlHandler;i||=e=>e,n=i(n);let a=r?e._baseServer:`/`;return ve(n,a)}function wr(){let{pathname:e}=Cr(this),t=e;return _(t.startsWith(`/`)),t}function Tr(){return y(!1,"`pageContext.url` is outdated. Use `pageContext.urlPathname`, `pageContext.urlParsed`, or `pageContext.urlOriginal` instead. (See https://vike.dev/migration/0.4.23 for more information.)",{onlyOnce:!0,showStackTrace:!0}),wr.call(this)}function Er(){let{isBaseMissing:e,...t}=Cr(this),n=D(),r=e=>{y(n,`pageContext.urlParsed.${e} isn't available on the server-side (HTTP requests don't include the URL hash)`,{onlyOnce:!0,showStackTrace:!0})},i={...t,get hash(){return r(`hash`),t.hash},get hashOriginal(){return r(`hashOriginal`),t.hashOriginal},get hashString(){return y(!1,`pageContext.urlParsed.hashString has been renamed to pageContext.urlParsed.hashOriginal`,{onlyOnce:!0,showStackTrace:!0}),r(`hashString`),t.hashOriginal},get searchString(){return y(!1,`pageContext.urlParsed.searchString has been renamed to pageContext.urlParsed.searchOriginal`,{onlyOnce:!0,showStackTrace:!0}),t.searchOriginal}};return j(i,`hashString`,!1),j(i,`searchString`,!1),n||(j(i,`hash`,!1),j(i,`hashOriginal`,!1)),i}function Dr(){return _(Or(`/`)),`/`}function Or(e){return e.startsWith(`/`)}var kr=[`clientRouting`];function Ar(e){kr.forEach(t=>{if(_(e.fileExports),!(t in e.fileExports))return;let n=`The value of \`${t}\` is only allowed to be \`true\`.`;v(e.fileExports[t]!==!1,`${e.filePath} has \`export { ${t} }\` with the value \`false\` which is prohibited: remove \`export { ${t} }\` instead. (${n})`),v(e.fileExports[t]===!0,`${e.filePath} has \`export { ${t} }\` with a forbidden value. ${n}`)})}var jr=[`render`,`clientRouting`,`prerender`,`doNotPrerender`];function Mr(e,t){v(!jr.includes(e),`${t} has \`export default { ${e} }\` which is prohibited, use \`export { ${e} }\` instead.`)}function Nr(e){let t=`.page.`,n=C(e.split(t),0,-1).join(t);return _(!n.includes(`\\`)),n}function Pr(t,n){if(n.length>0){let e=n.filter(e=>e.isErrorPage);return e.length===0?null:(v(e.length===1,`Only one error page can be defined`),e[0].pageId)}let r=e(t.map(({pageId:e})=>e).filter(e=>Fr(e,!1)));if(v(r.length<=1,`Only one _error.page.js is allowed, but found several: ${r.join(` `)}`),r.length>0){let e=r[0];return _(e),e}return null}function Fr(e,t){return _(!e.includes(`\\`)),e.includes(`/_error`)}var Ir=[`.page`,`.page.server`,`.page.route`,`.page.client`,`.css`];function Lr(e){if(e.endsWith(`.css`))return`.css`;_(ut(e),e);let t=e.split(`/`).slice(-1)[0].split(`.`),n=t.slice(-3)[0],r=t.slice(-2)[0];if(r===`page`)return`.page`;if(_(n===`page`,e),r===`server`)return`.page.server`;if(r===`client`)return`.page.client`;if(r===`route`)return`.page.route`;_(!1,e)}function Rr(e){let t=e=>r.pageId===e||r.isDefaultPageFile&&(Br(r.filePath)||Vr(e,r.filePath)),n=Lr(e),r={filePath:e,fileType:n,isEnv:e=>{if(_(n!==`.page.route`),e===`CLIENT_ONLY`)return n===`.page.client`||n===`.css`;if(e===`SERVER_ONLY`)return n===`.page.server`;if(e===`CLIENT_AND_SERVER`)return n===`.page`;_(!1)},isRelevant:t,isDefaultPageFile:zr(e),isRendererPageFile:n!==`.css`&&zr(e)&&Br(e),isErrorPageFile:Fr(e,!1),pageId:Nr(e)};return r}function zr(e){return Fr(e,!1)?!1:e.includes(`/_default`)}function Br(e){return e.includes(`/renderer/`)}function Vr(e,t){_(!e.endsWith(`/`)),_(!t.endsWith(`/`)),_(zr(t));let n=C(t.split(`/`),0,-1).filter(e=>e!==`_default`).join(`/`);return e.startsWith(n)}var Hr=[`$$registrations`,`_rerender_only`],Ur=[`.md`,`.mdx`];function Wr(e,t,n){let i=Object.keys(e),a=e=>e===`default`||e===n,o=i.filter(a),s=r.code(`export default`),c=r.code(`export { ${n} }`);o.length===0&&v(!1,`${t} should define ${c} or ${s}`),o.length===2&&v(!1,`${t} is ambiguous: remove ${s} or ${c}`),_(o.length===1);let l=i.filter(e=>!a(e)).filter(e=>!Hr.includes(e));Ur.some(e=>t.endsWith(e))||l.forEach(e=>{y(!1,`${t} unexpected ${r.cyan(`export { ${e} }`)}, see https://vike.dev/no-side-exports`,{onlyOnce:!0})})}function Gr(e,t){let n=e.map(e=>{let t=qr(e.configValuesSerialized);return Kr(t),{...e,configValues:t}}),r={configValues:{}};{let e=qr(t.configValuesSerialized);Object.assign(r.configValues,e)}return{pageConfigs:n,pageConfigGlobal:r}}function Kr(e){let t=`route`,n=e[t];if(!n)return;let{value:r,definedAtData:i}=n,a=typeof r;_(i);let o=xt(`Config`,t,i);v(a===`string`||T(r),`${o} has an invalid type '${a}': it should be a string or a function instead, see https://vike.dev/route`)}function qr(e){let t={};return Object.entries(e).forEach(([e,r])=>{let i;if(r.type===`cumulative`){let{valueSerialized:t,...a}=r;i={value:t.map((t,i)=>{let{value:a,sideExports:o}=Jr(t,e,()=>{let e=r.definedAtData[i];return _(e),e});return n(o),a}),...a}}else{let{valueSerialized:t,...a}=r,{value:o,sideExports:s}=Jr(t,e,()=>{_(r.type!==`computed`);let{definedAtData:e}=r;return Array.isArray(e)?e[0]:e});n(s),i={value:o,...a}}t[e]=i}),t;function n(e){e.forEach(e=>{let{configName:n,configValue:r}=e;t[n]||(t[n]=r)})}}function Jr(e,t,n){if(e.type===`js-serialized`){let{value:t}=e;return t=_n(t),{value:t,sideExports:[]}}if(e.type===`pointer-import`){let{value:t}=e;return{value:t,sideExports:[]}}if(e.type===`plus-file`){let r=n(),{exportValues:i}=e;_(!r.definedBy),Wr(i,r.filePathToShowToUser,t);let a,o=!1,s=[];return Object.entries(i).forEach(([e,n])=>{e!==`default`&&e!==t?s.push({configName:e,configValue:{type:`standard`,value:n,definedAtData:{filePathToShowToUser:r.filePathToShowToUser,fileExportPathToShowToUser:[e]}}}):(a=n,_(!o),o=!0)}),_(o),{value:a,sideExports:s}}_(!1)}function Yr(e,t,n){(!e||!t(e))&&_(!1,{moduleExports:e,moduleExportsKeys:Xr(e),moduleId:n})}function Xr(e){return e===void 0?null:[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e),...Object.keys(e)]}function Zr(e){Yr(e,e=>`pageFilesLazy`in e),_(k(e,`pageFilesLazy`,`object`)),_(k(e,`pageFilesEager`,`object`)),_(k(e,`pageFilesExportNamesLazy`,`object`)),_(k(e,`pageFilesExportNamesEager`,`object`)),_(k(e.pageFilesLazy,`.page`)),_(k(e.pageFilesLazy,`.page.client`)||k(e.pageFilesLazy,`.page.server`)),_(k(e,`pageFilesList`,`string[]`)),_(k(e,`pageConfigsSerialized`)),_(k(e,`pageConfigGlobalSerialized`));let{pageConfigsSerialized:t,pageConfigGlobalSerialized:n}=e;ei(t),ti(n);let{pageConfigs:r,pageConfigGlobal:i}=Gr(t,n),a={};Qr(e.pageFilesLazy).forEach(({filePath:e,pageFile:t,globValue:n})=>{t=a[e]=a[e]??t;let r=n;$r(r),t.loadFile=async()=>{`fileExports`in t||(t.fileExports=await r(),Ar(t))}}),Qr(e.pageFilesExportNamesLazy).forEach(({filePath:e,pageFile:t,globValue:n})=>{t=a[e]=a[e]??t;let r=n;$r(r),t.loadExportNames=async()=>{if(!(`exportNames`in t)){let e=await r();_(k(e,`exportNames`,`string[]`),t.filePath),t.exportNames=e.exportNames}}}),Qr(e.pageFilesEager).forEach(({filePath:e,pageFile:t,globValue:n})=>{t=a[e]=a[e]??t;let r=n;_(S(r)),t.fileExports=r}),Qr(e.pageFilesExportNamesEager).forEach(({filePath:e,pageFile:t,globValue:n})=>{t=a[e]=a[e]??t;let r=n;_(S(r)),_(k(r,`exportNames`,`string[]`),t.filePath),t.exportNames=r.exportNames}),e.pageFilesList.forEach(e=>{a[e]=a[e]??Rr(e)});let o=Object.values(a);return o.forEach(({filePath:e})=>{_(!e.includes(`\\`))}),{pageFilesAll:o,pageConfigs:r,pageConfigGlobal:i}}function Qr(e){let t=[];return Object.entries(e).forEach(([e,n])=>{_(Ir.includes(e)),_(S(n)),Object.entries(n).forEach(([n,r])=>{let i=Rr(n);_(i.fileType===e),t.push({filePath:n,pageFile:i,globValue:r})})}),t}function $r(e){_(T(e))}function ei(e){_(O(e)),e.forEach(e=>{_(S(e)),_(k(e,`pageId`,`string`)),_(k(e,`routeFilesystem`)),_(k(e,`configValuesSerialized`))})}function ti(e){_(k(e,`configValuesSerialized`))}function ni(e,t,n){let r=ri(ii({pageConfigGlobalValues:e,pageConfigValues:n})),i=(()=>{if(t.isErrorPage)return{...r,isErrorPage:!0};{let e=r.config.route??t.routeFilesystem.routeString;return{...r,route:e}}})();return[t.pageId,i]}function ri(e){return{config:e.config,_source:e.source,_sources:e.sources,_from:e.from}}function ii({pageConfigGlobalValues:e,pageConfigValues:t}){return ci({configValues:{...e,...t}})}function ai(e,t,n){let r={},i={},a={};e.forEach(e=>{li(e).forEach(({exportName:t,exportValue:n,isFromDefaultExport:r})=>{_(t!==`default`),a[t]=a[t]??[],a[t].push({exportValue:n,exportSource:`${e.filePath} > ${r?`\`export default { ${t} }\``:`\`export { ${t} }\``}`,filePath:e.filePath,_filePath:e.filePath,_fileType:e.fileType,_isFromDefaultExport:r})})});let o,s,c;if(t){let e=ii({pageConfigGlobalValues:n.configValues,pageConfigValues:t.configValues});o=e.source,s=e.sources,c=e.from,Object.assign(r,e.config),Object.assign(i,e.configEntries),Object.assign(a,e.exportsAll)}else o={},s={},c={configsStandard:{},configsCumulative:{},configsComputed:{}};let l={},u={};Object.entries(a).forEach(([e,t])=>{t.forEach(({exportValue:t,_fileType:n,_isFromDefaultExport:r})=>{u[e]=u[e]??t,n===`.page`&&!r&&(e in l||(l[e]=t))})}),_(!(`default`in u)),_(!(`default`in a));let d={config:r,from:c,source:o,sources:s,configEntries:i,exports:u,exportsAll:a};return M(d,`pageExports`,{get:()=>(D()||y(!1,`pageContext.pageExports is outdated, use pageContext.exports instead`,{onlyOnce:!0,showStackTrace:!0}),l),enumerable:!1,configurable:!0}),d}function oi(e,t){return si(e,t,e=>e.configValues)}function si(e,t,n){let r=n(t,!0),i=ri(ci({configValues:r})),a=Object.fromEntries(e.map(e=>ni(r,e,n(e)))),o={...i,pages:a};return{...o,_globalConfigPublic:o}}function ci(e){let t={},n={},r={},i={},a={},o={configsStandard:{},configsCumulative:{},configsComputed:{}},s=(e,t)=>{i[t]=e,a[t]??(a[t]=[]),a[t].push(e)},c=(e,t,i)=>{let a=vt(i),o=St(`Config`,e,i);n[e]=n[e]??[],n[e].push({configValue:t,configDefinedAt:o,configDefinedByFile:a});let s=e;r[s]=r[s]??[],r[s].push({exportValue:t,exportSource:o,filePath:a,_filePath:a,_fileType:null,_isFromDefaultExport:null})};return Object.entries(e.configValues).forEach(([e,n])=>{let{value:r}=n;if(t[e]=t[e]??r,n.type===`standard`){let t={type:`configsStandard`,value:n.value,definedAt:N(n.definedAtData,e)};s(t,e),o.configsStandard[e]=t,c(e,r,n.definedAtData)}if(n.type===`cumulative`){let t={type:`configsCumulative`,definedAt:N(n.definedAtData,e),values:n.value.map((t,r)=>{let i=n.definedAtData[r];_(i);let a=N(i,e);return c(e,t,i),{value:t,definedAt:a}})};s(t,e),o.configsCumulative[e]=t}if(n.type===`computed`){let t={type:`configsComputed`,definedAt:`Vike`,value:n.value};s(t,e),o.configsComputed[e]=t,c(e,r,n.definedAtData)}}),{config:t,configEntries:n,exportsAll:r,source:i,sources:a,from:o}}function li(e){let{filePath:t,fileExports:n}=e;_(n),_(ut(t));let i=[];return Object.entries(n).sort(Ge(([e])=>e===`default`)).forEach(([e,n])=>{let a=e===`default`;if(a)if(dt(t))e=`Page`;else{v(S(n),`The ${r.cyan(`export default`)} of ${t} should be an object.`),Object.entries(n).forEach(([e,n])=>{Mr(e,t),i.push({exportName:e,exportValue:n,isFromDefaultExport:a})});return}i.push({exportName:e,exportValue:n,isFromDefaultExport:a})}),i.forEach(({exportName:e,isFromDefaultExport:t})=>{_(!(t&&jr.includes(e)))}),i}async function ui(e,t,n,r,i){let{previousCreateGlobalContextPromise:a}=t,{promise:o,resolve:s}=ht({timeout:null});t.previousCreateGlobalContextPromise=o,a&&(_(t.globalContext),await a);try{let a=di(e),o;if(t.globalContext?o=!0:(t.globalContext=a,o=!1),n&&a._pageConfigs.length>0){let e=n?.(a);w(a,e)}else w(a,await r?.(a));w(a,await i?.(a));let s=jt(a._pageConfigGlobal,`onCreateGlobalContext`),c=!1;return pi(t.onCreateGlobalContextHooks??[],s)||(t.onCreateGlobalContextHooks=s,await qt(`onCreateGlobalContext`,a._pageConfigGlobal,null,a,Ht),c=!0),o&&(c?He(t.globalContext,a):w(t.globalContext,a,!0)),t.globalContext}finally{s()}}function di(e){let{pageFilesAll:t,pageConfigs:n,pageConfigGlobal:r}=Zr(e),i={isGlobalContext:!0,_isOriginalObject:!0,_virtualFileExportsGlobalEntry:e,_pageFilesAll:t,_pageConfigs:n,_pageConfigGlobal:r,_allPageIds:fi(t,n),...oi(n,r)};return j(i,`_isOriginalObject`,!1),i}function fi(t,n){let r=e(t.filter(({isDefaultPageFile:e})=>!e).map(({pageId:e})=>e)),i=n.map(e=>e.pageId);return[...r,...i]}function pi(e,t){let n=e.map(e=>e.hookFn),r=t.map(e=>e.hookFn);return n.every(e=>r.includes(e))&&r.every(e=>n.includes(e))}var W=t(`getGlobalContextClientInternalShared.ts`,(()=>{let{promise:e,resolve:t}=ht();return{globalContextInitialPromise:e,globalContextInitialPromiseResolve:t}})());async function mi(){if(W.globalContextPromise)return await W.globalContextPromise;let e=ui(W.virtualFileExportsGlobalEntry,W,()=>{let e={isClientSide:!0};return w(e,bn()),e});W.globalContextPromise=e;let t=await e;return _(W.globalContext===t),W.globalContextInitialPromiseResolve(),t}async function hi(e){W.virtualFileExportsGlobalEntry!==e&&(delete W.globalContextPromise,W.virtualFileExportsGlobalEntry=e,await mi())}function gi(e,t){let n=t.filter(({filesystemRoot:t})=>e.startsWith(t)).sort(Ue(({filesystemRoot:e})=>e.length))[0],r;if(n){let{filesystemRoot:t,urlRoot:i}=n,a={pageId:e,filesystemRoot:t,urlRoot:i};_(i.startsWith(`/`)&&e.startsWith(`/`)&&t.startsWith(`/`),a),_(e.startsWith(t),a),t===`/`?r=e:(_(!t.endsWith(`/`),a),r=C(e,t.length,0)),_(r.startsWith(`/`),a),r=i+(i.endsWith(`/`)?``:`/`)+C(r,1,0)}else r=e;return _(r.startsWith(`/`)),r=r.split(`/`).filter(e=>e!==`pages`&&e!==`src`&&e!==`index`).join(`/`),_(!r.includes(`.page.`)),_(!r.endsWith(`.`)),r.endsWith(`/index`)&&(r=C(r,0,-6)),r===``&&(r=`/`),_(r.startsWith(`/`)),_(!r.endsWith(`/`)||r===`/`),r}async function _i(e,t,n){let{hookReturn:i}=Zt({hookFn:e,hookFilePath:n,hookName:`route`},t,Ut);if(vi(i,`The Route Function ${n}`),i=await i,i===!1)return null;if(i===!0&&(i={}),v(A(i),`The Route Function ${n} should return a boolean or a plain JavaScript object (but it's ${r.cyan(`typeof result === ${JSON.stringify(typeof i)}`)} instead)`),`match`in i){let{match:e}=i;if(v(typeof e==`boolean`,`The ${r.cyan(`match`)} value returned by the Route Function ${n} should be a boolean.`),!e)return null}let a=null;`precedence`in i&&(a=i.precedence,v(typeof a==`number`,`The ${r.cyan(`precedence`)} value returned by the Route Function ${n} should be a number.`)),bi(i,`The ${r.cyan(`routeParams`)} object returned by the Route Function ${n} should`);let o=i.routeParams||{};return v(!(`pageContext`in i),`Providing ${r.cyan(`pageContext`)} in Route Functions is prohibited, see https://vike.dev/route-function#cannot-provide-pagecontext`),_(A(o)),Object.keys(i).forEach(e=>{v(e===`match`||e===`routeParams`||e===`precedence`,`The Route Function ${n} returned an object with an unknown property ${r.cyan(e)} (the known properties are ${r.cyan(`match`)}, ${r.cyan(`routeParams`)}, and ${r.cyan(`precedence`)})`)}),{precedence:a,routeParams:o}}function vi(e,t){y(!$e(e),`${t} returned a promise, but asynchronous routing is deprecated and will be removed in the next major release, see https://vike.dev/route-function#async`,{onlyOnce:!0})}function yi(){y(!1,`${r.cyan(`iKnowThePerformanceRisksOfAsyncRouteFunctions`)} is deprecated and will be removed in the next major release`,{onlyOnce:!0})}function bi(e,t){_(t.endsWith(` should`)),k(e,`routeParams`)&&v(k(e,`routeParams`,`string{}`),`${t} be ${r.bold(`Record<string, string>`)}`)}async function xi(e,t,n,r){return await Promise.all(e.filter(e=>e.fileType===`.page.route`).map(e=>e.loadFile?.())),Si(e,t,n,r)}function Si(e,t,n,r){let{onBeforeRouteHook:i,filesystemRoots:a}=wi(e,t,n);return{pageRoutes:Ci(a,e,t,r),onBeforeRouteHook:i}}function Ci(e,t,n,r){let i=[];return n.length>0&&(_(e===null),n.filter(e=>!e.isErrorPage).forEach(e=>{let t=e.pageId,n=null;{let r=`route`,i=P(e,r);if(i){let a=i.value;_(i.definedAtData);let o=N(i.definedAtData,r);if(typeof a==`string`)n={pageId:t,comesFromV1PageConfig:!0,routeString:a,routeDefinedAtString:o,routeType:`STRING`};else{let{definedAtData:r}=i;_(!O(r)&&!r.definedBy);let{filePathToShowToUser:s}=r;_(s),_(T(a)),P(e,`iKnowThePerformanceRisksOfAsyncRouteFunctions`,`boolean`)&&yi(),n={pageId:t,comesFromV1PageConfig:!0,routeFunction:a,routeFunctionFilePath:s,routeDefinedAtString:o,routeType:`FUNCTION`}}}}if(!n){let{routeFilesystem:r}=e;_(r);let{routeString:i,definedAtLocation:a}=r;_(r.routeString.startsWith(`/`)),n={pageId:t,routeFilesystemDefinedBy:a,comesFromV1PageConfig:!0,routeString:i,routeDefinedAtString:null,routeType:`FILESYSTEM`}}_(n),i.push(n)})),n.length===0&&(_(e),r.filter(e=>!Fr(e,!1)).forEach(n=>{let r=t.find(e=>e.pageId===n&&e.fileType===`.page.route`);if(!r||!(`default`in r.fileExports)){let t=gi(n,e);_(t.startsWith(`/`)),_(!t.endsWith(`/`)||t===`/`),i.push({pageId:n,comesFromV1PageConfig:!1,routeString:t,routeDefinedAtString:null,routeFilesystemDefinedBy:`${n}.page.*`,routeType:`FILESYSTEM`})}else{let{filePath:e,fileExports:t}=r;if(_(t.default),k(t,`default`,`string`)){let r=t.default;v(r.startsWith(`/`),`A Route String should start with a leading slash '/' but ${e} has \`export default '${r}'\`. Make sure to \`export default '/${r}'\` instead.`),i.push({pageId:n,comesFromV1PageConfig:!1,routeString:r,routeDefinedAtString:e,routeType:`STRING`});return}if(k(t,`default`,`function`)){let r=t.default;`iKnowThePerformanceRisksOfAsyncRouteFunctions`in t&&yi(),i.push({pageId:n,comesFromV1PageConfig:!1,routeFunction:r,routeFunctionFilePath:e,routeDefinedAtString:e,routeType:`FUNCTION`});return}v(!1,`The default export of ${e} should be a string or a function.`)}})),i}function wi(e,t,n){if(t.length>0)return{onBeforeRouteHook:At(n,`onBeforeRoute`),filesystemRoots:null};let r=null,i=[];return e.filter(e=>e.fileType===`.page.route`&&e.isDefaultPageFile).forEach(({filePath:e,fileExports:t})=>{if(_(t),`onBeforeRoute`in t){v(k(t,`onBeforeRoute`,`function`),`\`export { onBeforeRoute }\` of ${e} should be a function.`);let{onBeforeRoute:n}=t,i=`onBeforeRoute`;r={hookFilePath:e,hookFn:n,hookName:i,hookTimeout:I(i)}}`filesystemRoutingRoot`in t&&(v(k(t,`filesystemRoutingRoot`,`string`),`\`export { filesystemRoutingRoot }\` of ${e} should be a string.`),v(k(t,`filesystemRoutingRoot`,`string`),`\`export { filesystemRoutingRoot }\` of ${e} is \`'${t.filesystemRoutingRoot}'\` but it should start with a leading slash \`/\`.`),i.push({filesystemRoot:Ti(e),urlRoot:t.filesystemRoutingRoot}))}),{onBeforeRouteHook:r,filesystemRoots:i}}function Ti(e){_(e.startsWith(`/`)),_(!e.endsWith(`/`));let t=C(e.split(`/`),0,-1).join(`/`)||`/`;return _(t.startsWith(`/`)),_(!t.endsWith(`/`)||t===`/`),t}async function Ei(){let e=await mi();return w(e,await Di(e)),e}async function Di(e){let{pageRoutes:t,onBeforeRouteHook:n}=await xi(e._pageFilesAll,e._pageConfigs,e._pageConfigGlobal,e._allPageIds);return{_pageRoutes:t,_onBeforeRouteHook:n}}async function Oi(e){let t=await Ei(),n=Dr();_(je(n));let r=xr();return w(r,{isClientSide:!0,isPrerendering:!1,urlOriginal:e,_globalContext:t,_pageFilesAll:t._pageFilesAll,_urlHandler:null,_baseServer:n}),w(r,Sr(r)),V(r,br(r,t._globalConfigPublic)),r}function ki(e,t){let n=e.filter(e=>e.pageId===t);return _(n.length<=1),n[0]??null}async function Ai(e,t){if(`isPageEntryLoaded`in e&&!t)return e;let{moduleId:n,moduleExportsPromise:r}=e.loadVirtualFilePageEntry(),i=await r;Yr(i,()=>`configValuesSerialized`in i,n);let a=ji(i);return Object.assign(e.configValues,a),w(e,{isPageEntryLoaded:!0}),e}function ji(e){return qr(e.configValuesSerialized)}var Mi=`_isAssetsError`;async function Ni(e,t,n,r){let i=Sn(t,e),a=ki(n,e),o;try{o=(await Promise.all([a&&Ai(a,!1),...i.map(e=>e.loadFile?.())]))[0]}catch(e){throw Fi(e)&&Object.assign(e,{[Mi]:!0}),e}let s={};return w(s,ai(i,o,r)),w(s,{_pageFilesLoaded:i}),s}function Pi(e){return e?e[Mi]===!0:!1}function Fi(e){return e instanceof Error?[`Failed to fetch dynamically imported module`,`error loading dynamically imported module`,`Importing a module script failed`,`error resolving module specifier`,`failed to resolve module`].some(t=>e.message.toLowerCase().includes(t.toLowerCase())):!1}function G(e,t){_(!e.startsWith(`#`));let{searchOriginal:n,hashOriginal:r,pathname:i}=ve(e,`/`),a=`${i}${n||``}`;return t?.withoutHash||(a+=r||``),_(a.startsWith(`/`)),a}function Ii(e){let t=e.getAttribute(`href`);return t===null||!Pe(t)||t===``||Re(t)||Bi(t)||Ri(e)||zi(e)||!Hi(t)||!Li(e)}function Li(e){if(Ui()){let t=e.getAttribute(`data-vike-link`);return t!==null&&t!==`false`}else return!0}function Ri(e){let t=e.getAttribute(`target`),n=e.getAttribute(`rel`);return t===`_blank`||t===`_external`||n===`external`||e.hasAttribute(`download`)}function zi(e){return e.getAttribute(`data-vike`)===`false`}function Bi(e){return!!(e.startsWith(`#`)||e.includes(`#`)&&G(e,{withoutHash:!0})===G(window.location.href,{withoutHash:!0}))}function Vi(e){return e.startsWith(`#`)?e===window.location.hash:G(e)===G(window.location.href)}function Hi(e){let t=Dr();_(je(t));let{isBaseMissing:n}=ve(e,t);return!n}function Ui(){return!!window._disableAutomaticLinkInterception}function K(e){return e.fileType===`.css`?[]:e.exportNames?e.exportNames:(_(e.fileExports,e.filePath),Object.keys(e.fileExports))}function Wi({pageFilesClientSide:e,pageFilesServerSide:t,pageId:n}){return{isHtmlOnly:r(),isClientRouting:a()};function r(){return t.some(e=>e.pageId===n&&e.fileType===`.page`)?(i(),!1):!(!t.some(e=>e.pageId===n&&e.fileType===`.page.server`)||e.some(e=>e.pageId===n&&e.fileType===`.page.client`&&K(e).includes(`render`)))}function i(){v(e.some(e=>K(e).includes(`render`)),["No client-side `render()` hook found.",`See https://vike.dev/render-modes for more information.`,["Loaded client-side page files (none of them `export { render }`):",...e.map((e,t)=>` (${t+1}): ${e.filePath}`)].join(`
`)].join(` `))}function a(){return e.some(e=>K(e).includes(`clientRouting`))}}function Gi({pageFilesClientSide:e,pageFilesServerSide:t,isHtmlOnly:n,isClientRouting:r}){let i=[],a=t.filter(t=>!e.includes(t)),o=[];if(o.push(...e.map(e=>({id:e.filePath,onlyAssets:!1,eagerlyImported:!1}))),o.push(...a.map(e=>({id:e.filePath,onlyAssets:!0,eagerlyImported:!1}))),n)i=e.map(e=>e.filePath);else{let e=Ki(r);o.push({id:e,onlyAssets:!1,eagerlyImported:!1}),i=[e]}return{clientEntries:i,clientDependencies:o}}function Ki(e){return e?`@@vike/dist/client/runtime-client-routing/entry.js`:`@@vike/dist/client/runtime-server-routing/entry.js`}function qi(e,t){let n=Sn(e,t),r=Cn(e,t),{isHtmlOnly:i,isClientRouting:a}=Wi({pageFilesClientSide:n,pageFilesServerSide:r,pageId:t});i&&(n=n.filter(e=>e.isEnv(`CLIENT_ONLY`)&&!K(e).includes(`render`)),n=Yi(n));let{clientEntries:o,clientDependencies:s}=Gi({pageFilesClientSide:n,pageFilesServerSide:r,isHtmlOnly:i,isClientRouting:a});return{isHtmlOnly:i,isClientRouting:a,clientEntries:o,clientDependencies:s,pageFilesClientSide:n,pageFilesServerSide:r}}async function Ji(e,t,{sharedPageFilesAlreadyLoaded:n}){let r=Sn(e,t);await Promise.all(r.map(async e=>{_(e.isEnv(`CLIENT_ONLY`)||e.isEnv(`CLIENT_AND_SERVER`)),!(n&&e.isEnv(`CLIENT_AND_SERVER`))&&await e.loadExportNames?.()}))}function Yi(e){let t=[];for(let n of e)if(t.push(n),K(n).includes(`overrideDefaultPages`))break;return t}function Xi(e,t,n){if(e){let t=P(e,`clientRouting`,`boolean`)?.value??!1;return{isClientRuntimeLoaded:P(e,`isClientRuntimeLoaded`,`boolean`)?.value??!1,isClientRouting:t}}else{let{isHtmlOnly:e,isClientRouting:r}=qi(t,n);return{isClientRuntimeLoaded:!e,isClientRouting:r}}}async function Zi(e,t){await Ji(t._pageFilesAll,e,{sharedPageFilesAlreadyLoaded:!1});let{isClientRuntimeLoaded:n,isClientRouting:r}=Xi(ki(t._globalContext._pageConfigs,e),t._pageFilesAll,e);return n&&r}var Qi=`@`,$i=`:`;function ea(e,t=`Invalid`){let n=`${t} Route String ${q(e)}`;v(e!==``,`${n} (empty string): set it to ${q(`/`)} instead`),v([`/`,`*`].includes(e[0]),`${n}: it should start with ${q(`/`)} or ${q(`*`)}`),v(!e.includes(`**`),`${n}: set it to ${q(e.split(`**`).join(`*`))} instead`)}function ta(e,t){ea(e);let n=na(e),r=n.map(e=>e.param?`[^/]+`:e.glob?`.*`:tt(e.static)).map(e=>`(${e})`).join(``),i=RegExp(`^${r}/?$`),a=t.match(i);if(!a)return null;let o={},[s,...c]=a,l=0,u=n.filter(e=>e.glob).length>1;return n.forEach((e,t)=>{let n=c[t];if(e.param&&(o[e.param]=n),e.glob){let e=`*${u?++l:``}`;o[e]=n}}),{routeParams:o}}function na(e){let t=[],n=e=>{let n=t[t.length-1];n?.static?n.static+=e:t.push({static:e})},r=e.split(`/`);return r.forEach((i,a)=>{a!==0&&n(`/`),aa(i)?(y(!i.startsWith($i),`Outdated Route String ${q(e)}, use ${q(e.split($i).join(Qi))} instead`,{onlyOnce:!0}),t.push({param:i.slice(1)})):i===`*`&&a===r.length-1&&e!==`*`&&e!==`/*`?t.push({glob:!0}):i.split(`*`).forEach((e,r)=>{r!==0&&t.push({glob:!0}),e!==``&&n(e)})}),t}function ra(e){let t=[];return na(e).forEach(e=>{e.param&&t.push(e.param)}),t}function ia(e){let t=na(e),n=e=>e?.split(`/`).filter(Boolean).length||0,r=0;for(let e of t){if(!e.static)break;r+=n(e.static)}let i=t.map(e=>n(e.static)).reduce((e,t)=>e+t,0),a=t.filter(e=>e.param).length,o=t.filter(e=>e.glob).length;return{numberOfStaticPartsBeginning:r,numberOfStaticParts:i,numberOfParams:a,numberOfGlobs:o}}function aa(e){return e.startsWith(Qi)||e.startsWith($i)}function oa(e){let t=ta(e,e);return _(t),Object.keys(t.routeParams).length===0}function q(e){return D()?`'${e}'`:(e===``&&(e=`''`),r.cyan(e))}function sa(e){e.sort(ca).sort(E(e=>e.routeType===`FUNCTION`&&!!e.precedence&&e.precedence<0)).sort(E(e=>e.routeType===`STRING`&&oa(e.routeString)===!1)).sort(E(e=>e.routeType===`FUNCTION`&&!e.precedence)).sort(E(e=>e.routeType===`STRING`&&oa(e.routeString)===!0)).sort(E(e=>e.routeType===`FILESYSTEM`)).sort(E(e=>e.routeType===`FUNCTION`&&!!e.precedence&&e.precedence>0))}function ca(e,t){{let n=e.precedence??0,r=t.precedence??0;if(n!==r)return n>r?-1:1}if(!t.routeString||!e.routeString)return 0;{let n=Ue(e=>ia(e).numberOfStaticPartsBeginning)(e.routeString,t.routeString);if(n!==0)return n}{let n=Ue(e=>ia(e).numberOfStaticParts)(e.routeString,t.routeString);if(n!==0)return n}{let n=We(e=>ia(e).numberOfGlobs)(e.routeString,t.routeString);if(n!==0)return n}{let n=Ue(e=>ia(e).numberOfParams)(e.routeString,t.routeString);if(n!==0)return n}return 0}async function la(e){let t={};if(!e._globalContext._onBeforeRouteHook)return null;let n=await ua(e._globalContext._onBeforeRouteHook,e);return n&&(w(t,n),k(t,`pageId`,`string`)||k(t,`pageId`,`null`))?(k(t,`routeParams`)?_(k(t,`routeParams`,`object`)):w(t,{routeParams:{}}),w(t,{_routingProvidedByOnBeforeRouteHook:!0}),t):(w(t,{_routingProvidedByOnBeforeRouteHook:!1}),t)}async function ua(e,t){let{hookReturn:n}=Zt(e,t,Ut);vi(n,`The onBeforeRoute() hook ${e.hookFilePath}`),n=await n;let i=`The onBeforeRoute() hook defined by ${e.hookFilePath}`;if(v(n==null||Ln(n,[`pageContext`])&&k(n,`pageContext`),`${i} should return ${r.cyan(`null`)}, ${r.cyan(`undefined`)}, or a plain JavaScript object ${r.cyan(`{ pageContext: { /* ... */ } }`)}`),n==null)return null;if(v(k(n,`pageContext`,`object`),`${i} returned ${r.cyan(`{ pageContext }`)} but pageContext should be a plain JavaScript object.`),k(n.pageContext,`pageId`)&&!k(n.pageContext,`pageId`,`null`)){let e=`${i} returned ${r.cyan(`{ pageContext: { pageId } }`)} but ${r.cyan(`pageId`)} should be`;v(k(n.pageContext,`pageId`,`string`),`${e} a string or null`),v(t._globalContext._allPageIds.includes(n.pageContext.pageId),`${e} ${Rn(t._globalContext._allPageIds.map(e=>r.cyan(e)),`or`)}`)}k(n.pageContext,`routeParams`)&&bi(n.pageContext,`${i} returned ${r.cyan(`{ pageContext: { routeParams } }`)} but routeParams should`);let a=e=>`${i} returned ${r.cyan(`{ pageContext: { ${e} } }`)} which is deprecated. Return ${r.cyan(`{ pageContext: { urlLogical } }`)} instead.`;k(n.pageContext,`url`)&&(y(!1,a(`url`),{onlyOnce:!0}),n.pageContext.urlLogical=n.pageContext.url,delete n.pageContext.url),k(n.pageContext,`urlOriginal`)&&(y(!1,a(`urlOriginal`),{onlyOnce:!0}),n.pageContext.urlLogical=n.pageContext.urlOriginal,delete n.pageContext.urlOriginal),k(n.pageContext,`urlLogical`)&&Be(n.pageContext.urlLogical,`${i} returned ${r.cyan(`{ pageContext: { urlLogical } }`)} and ${r.cyan(`urlLogical`)}`),Pn(n.pageContext,{hookFilePath:e.hookFilePath,hookName:`onBeforeRoute`});let o={};return w(o,n.pageContext),o}D()&&z();async function da(e,t){let n={};if(!t){let t=await la(e);if(t){if(t._routingProvidedByOnBeforeRouteHook)return _(t.pageId),t;w(n,t)}w(e,t)}let r=e._globalContext._allPageIds;v(r.length>0,`No page found. You must create at least one page.`),_(e._globalContext._pageFilesAll.length>0||e._globalContext._pageConfigs.length>0);let{urlPathname:i}=e;_(i.startsWith(`/`));let a=[];await Promise.all(e._globalContext._pageRoutes.map(async t=>{let{pageId:n,routeType:r}=t;if(t.routeType===`FILESYSTEM`){let{routeString:e}=t,o=ta(e,i);if(o){let{routeParams:t}=o;a.push({pageId:n,routeParams:t,routeString:e,routeType:r})}return}if(t.routeType===`STRING`){let{routeString:e}=t,o=ta(e,i);if(o){let{routeParams:t}=o;_(r===`STRING`),a.push({pageId:n,routeString:e,routeParams:t,routeType:r})}return}if(t.routeType===`FUNCTION`){let{routeFunction:i,routeFunctionFilePath:o}=t,s=await _i(i,e,o);if(s){let{routeParams:e,precedence:t}=s;a.push({pageId:n,precedence:t,routeParams:e,routeType:r})}return}_(!1)})),sa(a);let o=a[0]??null;if(w(n,{_routeMatch:o}),!o)return w(n,{pageId:null,routeParams:{}}),n;{let{routeParams:e}=o;_(A(e)),w(n,{pageId:o.pageId,routeParams:o.routeParams})}return n}var fa=t(`runtime-client-routing/getPageContextCurrent.ts`,{pageContextCurrent:null});function pa(){let{pageContextCurrent:e}=fa;return e}function ma(e){fa.pageContextCurrent=e}var J=5e3,ha={staticAssets:`hover`,pageContext:J},ga={staticAssets:`hover`,pageContext:!1},_a=ga;function va(e,t){let n=_a;if(`prefetchLinks`in e.exports&&v(!1,"`export { prefetchLinks }` is deprecated, use `export { prefetchStaticAssets }` instead."),`prefetchStaticAssets`in e.exports){let t=e.exports.prefetchStaticAssets;n.staticAssets=t}if(`prefetch`in e.exports){let{prefetch:t}=e.exports;t===!0&&(n=ha),t===!1&&(n=ga),Object.assign(n,t),n.pageContext===!0&&(n.pageContext=J)}if(n.staticAssets,t){{let e=t.getAttribute(`data-prefetch`);e!==null&&(e===``&&(e=`true`),e===`true`&&(n=ha),e===`false`&&(n=ga))}{let e=t.getAttribute(`data-prefetch-static-assets`);e!==null&&(e===`false`&&(n.staticAssets=!1),n.staticAssets=e)}{let e=t.getAttribute(`data-prefetch-page-context`);if(e!==null){e===``&&(e=`true`),e===`true`&&(n.pageContext=J),e===`false`&&(n.pageContext=!1);let t=parseInt(e,10);Number.isNaN(t)||(n.pageContext=t)}}}return n}function ya(e,t){let n=`URL ${e} passed to ${t}() is invalid`;return v(Pe(e),n),e.startsWith(location.origin)&&(e=e.slice(location.origin.length)),v(e.startsWith(`/`)||Le(e),n),e}z();var Y=t(`runtime-client-routing/prefetch.ts`,{linkPrefetchHandlerAdded:new WeakSet,addLinkPrefetchHandlers_debounce:null,mutationObserver:new MutationObserver(Ea),linkTags:document.getElementsByTagName(`A`),prefetchedPageContexts:{}});function ba(e){if(!va(e,null).pageContext)return null;let t=Pa(e.urlPathname),n=Y.prefetchedPageContexts[t];return!n||n.result.is404ServerSideRouted||Ma(n)?null:n.result.pageContextFromHooksServer}async function xa(e){try{await Ni(e.pageId,e._pageFilesAll,e._globalContext._pageConfigs,e._globalContext._pageConfigGlobal)}catch(e){if(Pi(e))_o(e,!0);else throw e}}async function Sa(e,t){wa(e,await ar(e,!1),t)}function Ca(e,t){Fa()&&wa(e,t,null)}function wa(e,t,n){n===null&&(n=Ta());let r=Pa(e.urlPathname);_(Fa()),Y.prefetchedPageContexts[r]={resultFetchedAt:Date.now(),resultMaxAge:n,result:t}}function Ta(){let e=pa();if(!e)return 1/0;let t=va(e,null);return typeof t.pageContext==`number`?t.pageContext:J}function Ea(){Y.addLinkPrefetchHandlers_debounce&&clearTimeout(Y.addLinkPrefetchHandlers_debounce),Y.addLinkPrefetchHandlers_debounce=setTimeout(()=>{`requestIdleCallback`in window?requestIdleCallback(Aa,{timeout:300}):setTimeout(Aa,150)},250)}function Da(){Ea()}function Oa(){Y.mutationObserver.observe(document.body,{childList:!0,subtree:!0})}function ka(){Y.mutationObserver.disconnect()}function Aa(){for(let e of Y.linkTags)Y.linkPrefetchHandlerAdded.has(e)||(Y.linkPrefetchHandlerAdded.add(e),!Ii(e)&&(e.addEventListener(`mouseover`,()=>{ja(e,`hover`)},{passive:!0}),e.addEventListener(`touchstart`,()=>{ja(e,`hover`)},{passive:!0}),new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&ja(e,`viewport`)})}).observe(e)))}async function ja(e,t){let n,r=pa();if(r)n=va(r,e);else if(Fa())n={staticAssets:`hover`,pageContext:1/0};else return;if(Ii(e))return;let i=e.getAttribute(`href`),a=await Na(i);a?.pageId&&(_(k(a,`pageId`,`string`)),await Zi(a.pageId,a)&&await Promise.all([(async()=>{n.staticAssets===t&&await xa(a)})(),(async()=>{if(t!==`viewport`&&n.pageContext){let e=Pa(i),t=Y.prefetchedPageContexts[e];if(!t||Ma(t)){let e=n.pageContext;await Sa(a,e)}}})()]))}function Ma(e){return Date.now()-e.resultFetchedAt>e.resultMaxAge}async function Na(e){let t=await Oi(e),n;try{n=await da(t)}catch{return null}return w(t,n),t}function Pa(e){return e.startsWith(`#`)&&(e=`/`),_(e.startsWith(`/`),{urlPathname:e}),e.split(`#`)[0]}function Fa(){return`_isBrilloutDocpress`in window}async function Ia(e,t){let n=null;n=Ot(e,`render`);{let t=Ot(e,`onRenderClient`);t&&(n=t)}if(!n){let t=La(e);if(_(t),e._globalContext._pageConfigs.length>0)v(!1,`No onRenderClient() hook defined for URL '${t}', but it's needed, see https://vike.dev/onRenderClient`);else{let n=e._pageFilesLoaded.filter(e=>e.fileType===`.page.client`),r;r=n.length===0?"No file `*.page.client.*` found for URL "+t:`One of the following files should export a render() hook: `+n.map(e=>e.filePath).join(` `),v(!1,r)}}await Jt(n,e,t)}function La(e){let t;try{t=e.urlPathname??e.urlOriginal}catch{}return t??=window.location.href,t}function X(e){return G(window.location.href,e)}var Z=t(`history.ts`,{monkeyPatched:!1,previous:void 0});Xa(),Z.previous=Ja();function Ra(){Q(window.history.state)||Wa({vike:{timestamp:Va(),scrollPosition:Ba(),triggeredBy:`browser`}})}function za(){let e=window.history.state;return qa(e),e}function Ba(){return{x:window.scrollX,y:window.scrollY}}function Va(){return new Date().getTime()}function Ha(){let e=Ba();if(!Q(window.history.state))return;let t=za();Wa({...t,vike:{...t.vike,scrollPosition:e}})}function Ua(e,t){if(t)Wa(za(),e);else{let t={vike:{timestamp:Va(),scrollPosition:null,triggeredBy:`vike`}};window.history.pushState(t,``,e)}}function Wa(e,t){let n=t??null;window.history.replaceState(e,``,n),qa(window.history.state)}function Ga(e,t){History.prototype.replaceState.bind(window.history)(e,``,t)}function Ka(){Z.monkeyPatched||(Z.monkeyPatched=!0,[`pushState`,`replaceState`].forEach(e=>{let t=window.history[e].bind(window.history);window.history[e]=(n={},...r)=>{v(n==null||S(n),`history.${e}(state) argument state must be an object`);let i=Q(n)?n:{...n,vike:{scrollPosition:Ba(),timestamp:Va(),triggeredBy:`user`}};t(i,...r),qa(window.history.state),Z.previous=Ja(),queueMicrotask(()=>{Q(window.history.state)||(Object.assign(i,window.history.state),Ga(i))})}}))}function Q(e){return!!e?.vike}function qa(e){Q(e)||_(!1,{state:e})}function Ja(){return{url:X(),state:za()}}function Ya(){let{previous:e}=Z,t=Q(window.history.state),n=window.history.state===null;if(!t&&!n)return B(X()),{skip:!0};t||Ra();let r=Ja();return Z.previous=r,n?{skip:!0}:{previous:e,current:r}}function Xa(){Ka(),Ra()}function Za(e,t){if(!e&&t&&$a(t)){Qa(t);return}if(e&&`x`in e){no(e);return}e?.preserveScroll||eo(ro())}function Qa(e){let t=window.history.state;Ga(null,e),_(window.history.state===null),window.location.replace(e),Ga(t,e)}function $a(e){return e.includes(`#`)&&e.includes(`:~:text`)}function eo(e){if(!e)to();else{let t=decodeURIComponent(e),n=document.getElementById(t)||document.getElementsByName(t)[0];n?(n.scrollIntoView(),n.focus()):e===`top`&&to()}}function to(){no({x:0,y:0})}function no(e){let t=()=>{window.scrollTo(e.x,e.y)},n=()=>window.scrollX===e.x&&window.scrollY===e.y;n()||(t(),!n()&&requestAnimationFrame(()=>{t(),!n()&&setTimeout(async()=>{if(t(),n())return;let e=new Date().getTime();for(;;)if(await cn(10),t(),n()||new Date().getTime()-e>100)return},0)}))}function ro(){let{hash:e}=window.location;return e===``?null:(_(e.startsWith(`#`)),e=e.slice(1),e)}function io(){window.addEventListener(`scroll`,ln(Ha,334),{passive:!0}),un(Ha)}var ao=t(`runtime-client-routing/scrollRestoration.ts`,{});function oo(){lo(),un(lo),dn(()=>ao.initialRenderIsDone&&co())}function so(){ao.initialRenderIsDone=!0,co()}function co(){`scrollRestoration`in window.history&&(window.history.scrollRestoration=`manual`)}function lo(){`scrollRestoration`in window.history&&(window.history.scrollRestoration=`auto`)}function uo(e){S(e)&&e.isAlreadyLogged||console.error(e)}var $=t(`runtime-client-routing/renderPageClient.ts`,(()=>{let{promise:e,resolve:t}=ht();return{renderCounter:0,firstRenderStartPromise:e,firstRenderStartPromiseResolve:t}})()),{firstRenderStartPromise:fo}=$;async function po(e){pn(`renderPageClient()`);let{urlOriginal:t=X(),overwriteLastHistoryEntry:n=!1,isBackwardNavigation:r=!1,isHistoryNavigation:i=!1,doNotRenderIfSamePage:a,isClientSideNavigation:o=!0,pageContextInitClient:s,pageContextsAborted:c=[]}=e,{scrollTarget:l}=e,{previousPageContext:u}=$;ka();let{isRenderOutdated:d,setHydrationCanBeAborted:f,isFirstRender:p}=vo(),m={urlOriginal:t,isBackwardNavigation:r,isHistoryNavigation:i,pageContextsAborted:c,isClientSideNavigation:o,pageContextInitClient:s,isFirstRender:p};if($.clientRoutingIsDisabled){B(t);return}if($.firstRenderStartPromiseResolve(),d())return;return await ee();async function ee(){let e=async e=>{await te({err:e})},n=await mo(!1,m);if(d())return;if($.isFirstRenderDone&&(_(u),!$.isTransitioning)){$.isTransitioning=!0;let t=kt(`onPageTransitionStart`,u);try{await R(t,n,Qn)}catch(t){await e(t);return}if(d())return}if(p){let e=rr();_(!(`urlOriginal`in e)),w(n,e),Ca(n,{pageContextFromHooksServer:e})}{let r;try{r=await da(n)}catch(t){await e(t);return}if(d())return;if(_(!(`urlOriginal`in r)),p){let{pageId:e,routeParams:t,...i}=r;w(n,i),_(k(n,`routeParams`,`string{}`))}else w(n,r);if(!p){if(!r.pageId){B(t);return}let e=await Zi(r.pageId,n);if(d())return;if(!e){B(t);return}let i=r.pageId&&u?.pageId&&r.pageId===u.pageId;if(a&&i)return}}_(k(n,`pageId`,`string`));let r=await So(n,p,d);if(!r.skip){if(`err`in r){await e(r.err);return}if(V(n,r.pageContext),ma(n),n.exports.hydrationCanBeAborted?f():y(!sn(),`You seem to be using React; we recommend setting hydrationCanBeAborted to true, see https://vike.dev/hydrationCanBeAborted`,{onlyOnce:!0}),!d())if(p){_(k(n,`_hasPageContextFromServer`,`true`));let t;try{t=await ir(n)}catch(t){await e(t);return}return d()?void 0:(V(n,t),await h(n))}else{let t,r=ba(n);if(r)t=r;else try{let e=await ar(n,!1);if(e.is404ServerSideRouted)return;t=e.pageContextFromHooksServer,Ca(n,e)}catch(t){await e(t);return}if(d())return;_(!(`urlOriginal`in t)),w(n,t);let i;try{i=await or(n,!1)}catch(t){await e(t);return}return d()?void 0:(V(n,i),await h(n))}}}async function te(e){let{err:t}=e;_(t),Wn(t)||uo(t);let n=await mo(!0,m);if(d())return;w(n,{errorWhileRendering:t});let r;if(Wn(t)){let e=await re(t,n);if(e.skip)return;r=e.pageContextAbort}await ne(n,e,r)}async function ne(e,n,r){let i=e=>{uo(e)},a=Pr(e._pageFilesAll,e._globalContext._pageConfigs);if(!a)throw Error(`No error page defined.`);w(e,{pageId:a,routeParams:{}}),r?(_(r.abortStatusCode),_(!(`urlOriginal`in r)),w(e,r),w(e,{is404:r.abortStatusCode===404})):w(e,{is404:!1});let o=await Zi(e.pageId,e);if(d())return;if(!o){B(t);return}let s=await So(e,p,d);if(s.skip)return;if(`err`in s){i(s.err);return}V(e,s.pageContext),ma(e);let c;try{let t=await ar(e,!0);if(t.is404ServerSideRouted)return;c=t.pageContextFromHooksServer}catch(e){i(e);return}if(d())return;_(!(`urlOriginal`in c)),w(e,c);let l;try{l=await or(e,!0)}catch(e){i(e);return}d()||(V(e,l),await h(e,n))}async function re(t,n){let r=t;Kn(t,!0,n);let i=r._pageContextAbort;if(Jn(c,n,i),i._urlRewrite)return await po({...e,scrollTarget:void 0,pageContextsAborted:c}),{skip:!0};if(i._urlRedirect){let t=i._urlRedirect.url;if(t.startsWith(`/`))await po({...e,scrollTarget:void 0,urlOriginal:t,overwriteLastHistoryEntry:!1,pageContextsAborted:c});else return B(t),{skip:!0};return{skip:!0}}return{pageContextAbort:i}}async function h(e,r){let i=async e=>{r?uo(e):await te({err:e})};if($.onRenderClientPreviousPromise&&(await $.onRenderClientPreviousPromise,_($.onRenderClientPreviousPromise===void 0),d()))return;go(t,n),$.previousPageContext=e,_($.onRenderClientPreviousPromise===void 0);let a=(async()=>{let t;try{await Ia(e,U)}catch(e){_(e),t=e}return $.onRenderClientPreviousPromise=void 0,$.isFirstRenderDone=!0,t})();$.onRenderClientPreviousPromise=a;let o=await a;if(_($.onRenderClientPreviousPromise===void 0),!(o&&(await i(o),!r))){if(p&&!o){try{await Kt(`onHydrationEnd`,e,U)}catch(e){if(await i(e),!r)return}if(d(!0))return}if(!d(!0)){if($.isTransitioning){$.isTransitioning=void 0,_(u);let t=kt(`onPageTransitionEnd`,u);try{await R(t,e,U)}catch(e){if(await i(e),!r)return}if(d(!0))return}if(!l&&u){let t=bo(u),n=bo(e);n!==!1&&t!==!1&&xo(n,t)&&(l={preserveScroll:!0})}return Za(l,t),so(),e._hasPageContextFromServer&&dr(e),Oa(),Ea(),$.renderedPageContext=e,ho(t),e}}}}async function mo(e,{urlOriginal:t,isBackwardNavigation:n,isHistoryNavigation:r,pageContextsAborted:i,isClientSideNavigation:a,pageContextInitClient:o,isFirstRender:s}){let c=$.previousPageContext??null,l=await Oi(t);w(l,{isBackwardNavigation:n,isHistoryNavigation:r,isClientSideNavigation:a,isHydration:s&&!e,previousPageContext:c,pageContextsAborted:i,...o}),$.currentPageContext=l,Object.defineProperty(l,`_previousPageContext`,{get(){return y(!1,`pageContext._previousPageContext has been renamed pageContext.previousPageContext`,{showStackTrace:!0,onlyOnce:!0}),c},enumerable:!1});{let e=qn(i);_(!e||!(`urlOriginal`in e)),w(l,e)}return l}function ho(e){window._vike??(window._vike={}),window._vike.fullyRenderedUrl=e}function go(e,t){X()!==e&&Ua(e,t)}function _o(e,t){$.clientRoutingIsDisabled=!0,_(Pi(e)),t&&console.log(e),ue(!1,[`Failed to fetch static asset.`,`This usually happens when a new frontend is deployed.`,`Falling back to Server Routing.`,`(The next page navigation will use Server Routing instead of Client Routing.)`].filter(Boolean).join(` `),{onlyOnce:!0})}function vo(){let e=++$.renderCounter;_(e>=1);let t=!1;return{isRenderOutdated:n=>e===1&&!t&&!n?!1:e!==$.renderCounter,setHydrationCanBeAborted:()=>{t=!0},isFirstRender:e===1}}function yo(){return $.renderCounter}function bo(e){let t=e.from.configsStandard.keepScrollPosition;if(!t)return!1;let n=t.value,r=t.definedAt;_(r);let i=ra(r);return T(n)&&(n=n(e,{configDefinedAt:t.definedAt})),n===!0?[r,...i.map(t=>{let n=e.routeParams[t];return _(n),n})]:n}function xo(e,t){return e===t?!0:!Array.isArray(e)||!Array.isArray(t)?!1:e.length===t.length&&e.every((n,r)=>e[r]===t[r])}async function So(e,t,n){let r=!1,i,a;try{a=await Ni(e.pageId,e._pageFilesAll,e._globalContext._pageConfigs,e._globalContext._pageConfigGlobal)}catch(n){if(i=n,r=!0,Co(i,e,t))return{skip:!0}}if(n())return{skip:!0};if(r)return{err:i};w(e,a);try{await Kt(`onCreatePageContext`,e,U)}catch{i=i,r=!0}return n()?{skip:!0}:r?{err:i}:{pageContext:e}}function Co(e,t,n){if(!Pi(e))return!1;if(n)throw _o(e,!1),e;return _o(e,!0),B(t.urlOriginal),!0}export{z as _,io as a,d as b,Xa as c,ya as d,Vi as f,pn as g,hi as h,oo as i,Ya as l,Ii as m,yo as n,eo as o,zi as p,po as r,Za as s,fo as t,Da as u,$t as v,_ as y};