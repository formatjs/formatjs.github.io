"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[663],{6279:(e,t,a)=>{a.d(t,{a:()=>i,b:()=>o});var r=a(1137),s=a(927),i=class extends Error{static{(0,s.a)(this,"OramaClientNotInitializedError")}constructor(){super("Orama Client is not initialized")}},o=class{static{(0,s.a)(this,"ChatService")}constructor(e){this.sendQuestion=e=>{if(!this.oramaClient)throw new i;return this.answerSession||(this.answerSession=this.oramaClient.createAnswerSession({events:{onStateChange:(0,s.a)((e=>{let t=e.filter((e=>!!e.query));r.b.interactions=t.map(((t,a)=>{var s;let i=r.a.loading;t.aborted?i=r.a.aborted:t.loading&&t.sources?i=r.a.rendering:t.loading&&t.response?i=r.a.streaming:!t.loading&&t.response&&(i=r.a.done);let o=null===(s=t.sources)||void 0===s?void 0:s.map((e=>e.document));return{query:t.query,interactionId:t.interactionId,response:t.response,relatedQueries:t.relatedQueries,status:i,latest:e.length-1===a,sources:o}}))}),"onStateChange")}})),this.answerSession.ask({term:e,related:{howMany:3,format:"question"}}).catch((e=>{r.b.interactions=r.b.interactions.map(((e,t)=>t===r.b.interactions.length-1?Object.assign(Object.assign({},e),{status:r.a.error}):e)),console.error(e)}))},this.abortAnswer=()=>{if(!this.answerSession)throw new i;this.answerSession.abortAnswer()},this.regenerateLatest=async()=>{if(!this.answerSession)throw new i;this.answerSession.regenerateLast({stream:!1})},this.resetChat=async()=>{if(!this.answerSession)throw new i;r.b.interactions.length<1||(["loading","rendering","streaming"].includes(r.b.interactions[r.b.interactions.length-1].status)&&this.answerSession.abortAnswer(),this.answerSession.clearSession())},this.oramaClient=e}}},210:(e,t,a)=>{a.d(t,{a:()=>p});var r=a(4218),s=a(927),i=(0,s.a)(((e,t,a)=>{let r=e.get(t);r?r.includes(a)||r.push(a):e.set(t,[a])}),"appendToMap"),o=(0,s.a)(((e,t)=>{let a;return(...r)=>{a&&clearTimeout(a),a=setTimeout((()=>{a=0,e(...r)}),t)}}),"debounce"),n=(0,s.a)((e=>!("isConnected"in e)||e.isConnected),"isConnected"),h=o((e=>{for(let t of e.keys())e.set(t,e.get(t).filter(n))}),2e3),c=(0,s.a)((()=>{if("function"!=typeof r.f)return{};let e=new Map;return{dispose:(0,s.a)((()=>e.clear()),"dispose"),get:(0,s.a)((t=>{let a=(0,r.f)();a&&i(e,t,a)}),"get"),set:(0,s.a)((t=>{let a=e.get(t);a&&e.set(t,a.filter(r.g)),h(e)}),"set"),reset:(0,s.a)((()=>{e.forEach((e=>e.forEach(r.g))),h(e)}),"reset")}}),"stencilSubscription"),l=(0,s.a)((e=>"function"==typeof e?e():e),"unwrap"),d=(0,s.a)(((e,t=(e,t)=>e!==t)=>{let a=l(e),r=new Map(Object.entries(a??{})),i={dispose:[],get:[],set:[],reset:[]},o=(0,s.a)((()=>{var t;r=new Map(Object.entries(null!==(t=l(e))&&void 0!==t?t:{})),i.reset.forEach((e=>e()))}),"reset"),n=(0,s.a)((()=>{i.dispose.forEach((e=>e())),o()}),"dispose"),h=(0,s.a)((e=>(i.get.forEach((t=>t(e))),r.get(e))),"get"),c=(0,s.a)(((e,a)=>{let s=r.get(e);t(a,s,e)&&(r.set(e,a),i.set.forEach((t=>t(e,a,s))))}),"set"),d=typeof Proxy>"u"?{}:new Proxy(a,{get:(e,t)=>h(t),ownKeys:e=>Array.from(r.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>r.has(t),set:(e,t,a)=>(c(t,a),!0)}),p=(0,s.a)(((e,t)=>(i[e].push(t),()=>{u(i[e],t)})),"on");return{state:d,get:h,set:c,on:p,onChange:(0,s.a)(((t,a)=>{let r=p("set",((e,r)=>{e===t&&a(r)})),s=p("reset",(()=>a(l(e)[t])));return()=>{r(),s()}}),"onChange"),use:(0,s.a)(((...e)=>{let t=e.reduce(((e,t)=>(t.set&&e.push(p("set",t.set)),t.get&&e.push(p("get",t.get)),t.reset&&e.push(p("reset",t.reset)),t.dispose&&e.push(p("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))}),"use"),dispose:n,reset:o,forceUpdate:(0,s.a)((e=>{let t=r.get(e);i.set.forEach((a=>a(e,t,t)))}),"forceUpdate")}}),"createObservableMap"),u=(0,s.a)(((e,t)=>{let a=e.indexOf(t);a>=0&&(e[a]=e[e.length-1],e.length--)}),"removeFromArray"),p=(0,s.a)(((e,t)=>{let a=d(e,t);return a.use(c()),a}),"createStore")},9358:(e,t,a)=>{a.d(t,{a:()=>s});var r=(0,a(210).a)({count:0,facets:[],facetProperty:"",results:[],resultMap:{},highlightedIndex:-1,loading:!1,error:!1,searchService:null,searchParams:null}),{state:s}=r;!function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(a[r[s]]=e[r[s]])}}(r,["state"])},1137:(e,t,a)=>{a.d(t,{a:()=>r,b:()=>n,c:()=>h});var r,s,i=a(210);(s=r||(r={})).idle="idle",s.loading="loading",s.rendering="rendering",s.streaming="streaming",s.error="error",s.aborted="aborted",s.done="done";var o=(0,i.a)({chatService:null,interactions:[],sourceBaseURL:"",sourcesMap:{title:"title",description:"description",path:"path"}}),{state:n}=o,h=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(a[r[s]]=e[r[s]])}return a}(o,["state"])},4328:(e,t,a)=>{a.d(t,{a:()=>s,b:()=>i});var r=(0,a(210).a)({open:!1,currentTask:"search",currentTerm:""}),{state:s}=r,i=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(a[r[s]]=e[r[s]])}return a}(r,["state"])},663:(e,t,a)=>{a.r(t),a.d(t,{orama_search_box:()=>u});var r=a(6279),s=a(2511),i=a(9358),o=a(4328),n=a(1137),h=(a(210),a(4218)),c=a(927),l=class{static{(0,c.a)(this,"SearchService")}constructor(e){this.search=(e,t)=>{var a;if(!this.oramaClient)throw new r.a;if(this.abortSearch(),!e)return i.a.results=[],i.a.count=0,i.a.facets=[],void(i.a.highlightedIndex=-1);i.a.loading=!0;let s=this.abortController,o=null!==(a=i.a.searchParams)&&void 0!==a?a:{},{limit:n,offset:h,where:c}=o,l=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(a[r[s]]=e[r[s]])}return a}(o,["limit","offset","where"]);this.oramaClient.search(Object.assign(Object.assign(Object.assign(Object.assign({},l),{term:e,limit:n||10}),c?{where:c}:{}),i.a.facetProperty&&Object.assign({facets:{[i.a.facetProperty]:{}}},t&&"All"!==t&&{where:Object.assign({[i.a.facetProperty]:{eq:t}},c)})),{abortController:this.abortController}).then((e=>{s.signal.aborted||(i.a.results=this.parserResults(e?.hits,i.a.resultMap),i.a.count=e?.count||0,i.a.facets=this.parseFacets(e?.facets,i.a.facetProperty),i.a.highlightedIndex=-1,i.a.loading=!1)})).catch((()=>{i.a.loading=!1}))},this.retry=()=>{throw new Error("Not implemented")},this.parserResults=(e,t)=>{if(!e)return[];let a=[],r={};for(let s of e){let e=this.hitToSearchResultParser(s,t),i=s.document[t.section];if(void 0===r[i])a.push({section:i,items:[e]}),r[i]=a.length-1;else{a[r[i]].items.push(e)}}return a},this.hitToSearchResultParser=(e,t)=>({id:e.id,score:e.score,title:t.title?e.document[t.title]:e.document.title,description:t.description?e.document[t.description]:e.document.description,path:t.path?e.document[t.path]:e.document.path}),this.parseFacets=(e,t)=>{var a;if(!t||!e||null===(a=e[t])||void 0===a||!a.values)return[];let r=e[t],s=Object.values(r.values).reduce(((e,t)=>e+t),0),i=Object.keys(r.values).map((e=>({name:e,count:r.values[e]})));return i.unshift({name:"All",count:s}),i},this.oramaClient=e,this.abortController=new AbortController}abortSearch(){this.abortController.abort(),this.abortController=new AbortController}},d=new class extends EventTarget{static{(0,c.a)(this,"WindowService")}constructor(){super(),this._width=window.innerWidth,this.handleResize=this.handleResize.bind(this),window.addEventListener("resize",this.handleResize)}handleResize(){this._width=window.innerWidth,this.dispatchEvent(new CustomEvent("widthChange",{detail:this._width}))}get width(){return this._width}},u=class{static{(0,c.a)(this,"SearchBox")}constructor(e){(0,h.a)(this,e),this.searchboxClosed=(0,h.e)(this,"searchboxClosed",7),this.closeSearchbox=()=>{o.a.open=!1,this.open=!1},this.onPrefersColorSchemeChange=e=>{this.systemScheme=e.matches?"dark":"light",this.updateTheme()},this.updateWindowWidth=e=>{this.windowWidth=e.detail},this.themeConfig=void 0,this.colorScheme="light",this.index=void 0,this.clientInstance=void 0,this.open=!1,this.facetProperty=void 0,this.resultMap={},this.sourceBaseUrl=void 0,this.sourcesMap=void 0,this.disableChat=!1,this.layout="modal",this.placeholder=void 0,this.chatPlaceholder=void 0,this.searchPlaceholder=void 0,this.suggestions=void 0,this.searchParams=void 0,this.oramaClient=void 0,this.componentID=(0,s.e)("search-box"),this.systemScheme="light",this.windowWidth=void 0}indexChanged(){this.startServices()}watchHandler(){this.updateTheme()}handleOpenPropChange(e){o.a.open=e}handleFacetPropertyChange(e){i.a.facetProperty=e}handleSearchParamsChange(e){i.a.searchParams=e}handleItemClick(e){console.log("Item clicked",e.detail)}handleCloseOnEsc(e){"Escape"===e.key&&this.closeSearchbox()}modalStatusChangedHandler(e){e.detail.id===this.modalRef&&(e.detail.open||(o.a.open=!1,this.open=!1))}updateTheme(){let e="system"===this.colorScheme?this.systemScheme:this.colorScheme,t=this.htmlElement;t&&e&&(t.classList.remove("theme-light","theme-dark"),t.classList.add(`theme-${e}`)),this.updateCssVariables(e)}updateCssVariables(e){var t;let a=this.themeConfig,r=this.htmlElement;if(r&&a&&e){if(null!==(t=a.colors)&&void 0!==t&&t[e])for(let t of Object.keys(a.colors[e]))r.style.setProperty(`${t}`,a.colors[e][t]);if(a.typography)for(let e of Object.keys(a.typography))r.style.setProperty(`${e}`,a.typography[e])}}startServices(){(0,s.c)(this.htmlElement,this.index,this.clientInstance),this.oramaClient=this.clientInstance?this.clientInstance:(0,s.d)(this.index),i.a.searchService=new l(this.oramaClient),n.b.chatService=new r.b(this.oramaClient)}componentWillLoad(){i.a.facetProperty=this.facetProperty,i.a.resultMap=this.resultMap,i.a.searchParams=this.searchParams,this.htmlElement.id=this.componentID,this.startServices()}connectedCallback(){this.windowWidth=d.width,o.a.open=this.open,o.b.onChange("open",(()=>{this.open=o.a.open})),this.htmlElement.id=this.componentID,this.schemaQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.systemScheme=this.schemaQuery.matches?"dark":"light",this.updateTheme(),this.schemaQuery.addEventListener("change",this.onPrefersColorSchemeChange),d.addEventListener("widthChange",this.updateWindowWidth)}disconnectedCallback(){var e;d.removeEventListener("widthChange",this.updateWindowWidth),null===(e=this.schemaQuery)||void 0===e||e.removeEventListener("change",this.onPrefersColorSchemeChange)}getSearchBox(){return(0,h.b)(h.i,null,(0,h.b)("orama-search",{class:""+(this.windowWidth>1024||"search"===o.a.currentTask?"section-active":"section-inactive"),placeholder:(null==this?void 0:this.searchPlaceholder)||"Search...",focusInput:"search"===o.a.currentTask,sourceBaseUrl:this.sourceBaseUrl,disableChat:this.disableChat,suggestions:this.suggestions}))}getChatBox(){return(0,h.b)(h.i,null,(0,h.b)("orama-chat",{class:""+("chat"===o.a.currentTask?"section-active":"section-inactive"),defaultTerm:"chat"===o.a.currentTask?o.a.currentTerm:"",showClearChat:!1,focusInput:"chat"===o.a.currentTask||0===n.b.interactions.length,placeholder:(null==this?void 0:this.chatPlaceholder)||this.placeholder,sourceBaseUrl:this.sourceBaseUrl,sourcesMap:this.sourcesMap,suggestions:this.suggestions}))}getSlidingPanel(e={withBackdrop:!1}){return(0,h.b)(h.i,null,this.windowWidth>1024&&(0,h.b)("orama-sliding-panel",{open:"chat"===o.a.currentTask,backdrop:e.withBackdrop,closed:(0,c.a)((()=>{o.a.currentTask="search"}),"closed")},this.getChatBox()))}getInnerContent(){return(0,h.b)(h.i,null,this.disableChat?null:(0,h.b)("orama-navigation-bar",{handleClose:this.closeSearchbox,showChatActions:"chat"===o.a.currentTask}),(0,h.b)("div",{class:"main"},this.getSearchBox(),this.windowWidth<=1024&&this.getChatBox()),(0,h.b)("orama-footer",{colorScheme:"system"===this.colorScheme?this.systemScheme:this.colorScheme}))}getModalLayout(){return(0,h.b)(h.i,null,(0,h.b)("orama-modal",{ref:(0,c.a)((e=>this.modalRef=e),"ref"),open:o.a.open,class:"modal",mainTitle:"Start your search",closeOnEscape:"search"===o.a.currentTask||this.windowWidth<=1024},this.getInnerContent()),this.getSlidingPanel())}getEmbedLayout(){return(0,h.b)(h.i,null,(0,h.b)("div",{class:"embed"},this.getInnerContent()),this.getSlidingPanel({withBackdrop:!0}))}render(){return i.a.searchService?n.b.chatService?"embed"===this.layout?this.getEmbedLayout():this.getModalLayout():(0,h.b)("orama-text",{as:"p"},"Unable to initialize chat service"):(0,h.b)("orama-text",{as:"p"},"Unable to initialize search service")}get htmlElement(){return(0,h.d)(this)}static get watchers(){return{index:["indexChanged"],themeConfig:["watchHandler"],colorScheme:["watchHandler"],open:["handleOpenPropChange"],facetProperty:["handleFacetPropertyChange"],searchParams:["handleSearchParamsChange"]}}};u.style="@keyframes showIn{0%{opacity:0;transform:translateY(-25%)}to{opacity:1;transform:translateY(0)}}@media (min-width:1024.02px){.modal orama-input{border-radius:0;margin:0;padding:0}.modal input[type=search]{border-radius:.75rem .75rem 0 0;border-radius:var(--radius-m,calc(12rem/var(--orama-base-font-size, 16))) var(--radius-m,calc(12rem/var(--orama-base-font-size, 16))) 0 0}}.embed{background-color:#fff;background-color:var(--background-color-secondary,#fff);border:1px solid #dadada;border:1px solid var(--border-color-primary,#dadada);border-radius:.75rem;border-radius:var(--radius-m,calc(12rem/var(--orama-base-font-size, 16)));display:flex;flex-direction:column;height:100%;inset:0;margin:0 auto;max-height:25rem;max-height:calc(400rem/var(--orama-base-font-size, 16));overflow:hidden;padding:0;width:100%}@media (min-width:1024.02px){.embed orama-input{border-radius:0;margin:0;padding:0}.embed input[type=search]{border-radius:.75rem .75rem 0 0;border-radius:var(--radius-m,calc(12rem/var(--orama-base-font-size, 16))) var(--radius-m,calc(12rem/var(--orama-base-font-size, 16))) 0 0}}.main{flex-direction:column;flex-grow:1;overflow:hidden}.main,.section-active{display:flex}.section-inactive{display:none}"}}]);